!function(){function s(t){return t&&(t.ownerDocument||t.document||t).documentElement}function F(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function o(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function c(t){return null===t?NaN:+t}function l(t){return!isNaN(t)}function t(a){return{left:function(t,e,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=t.length);n<r;){var i=n+r>>>1;a(t[i],e)<0?n=i+1:r=i}return n},right:function(t,e,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=t.length);n<r;){var i=n+r>>>1;0<a(t[i],e)?r=i:n=i+1}return n}}}function u(t){return t.length}function f(t){for(var e=1;t*e%1;)e*=10;return e}function e(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function y(){this._=Object.create(null)}function n(t){return(t+="")===ho||t[0]===go?go+t:t}function r(t){return(t+="")[0]===go?t.slice(1):t}function i(t){return n(t)in this._}function a(t){return(t=n(t))in this._&&delete this._[t]}function d(){var t=[];for(var e in this._)t.push(r(e));return t}function h(){var t=0;for(var e in this._)++t;return t}function g(){for(var t in this._)return!1;return!0}function p(){this._=Object.create(null)}function z(t){return t}function x(e,n,r){return function(){var t=r.apply(n,arguments);return t===n?e:t}}function v(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=po.length;n<r;++n){var i=po[n]+e;if(i in t)return i}}function _(){}function m(){}function b(i){function t(){for(var t,e=a,n=-1,r=e.length;++n<r;)(t=e[n].on)&&t.apply(this,arguments);return i}var a=[],o=new y;return t.on=function(t,e){var n,r=o.get(t);return arguments.length<2?r&&r.on:(r&&(r.on=null,a=a.slice(0,n=a.indexOf(r)).concat(a.slice(n+1)),o.remove(t)),e&&a.push(o.set(t,{on:e})),i)},t}function R(){eo.event.preventDefault()}function w(){for(var t,e=eo.event;t=e.sourceEvent;)e=t;return e}function N(i){for(var a=new m,t=0,e=arguments.length;++t<e;)a[arguments[t]]=b(a);return a.of=function(n,r){return function(t){try{var e=t.sourceEvent=eo.event;t.target=i,eo.event=t,a[t.type].apply(n,r)}finally{eo.event=e}}},a}function T(t){return vo(t,bo),t}function A(t){return"function"==typeof t?t:function(){return yo(t,this)}}function M(t){return"function"==typeof t?t:function(){return mo(t,this)}}function S(e,n){function t(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,n)}function a(){this.setAttributeNS(e.space,e.local,n)}function o(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}function s(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}return e=eo.ns.qualify(e),null==n?e.local?r:t:"function"==typeof n?e.local?s:o:e.local?a:i}function L(t){return t.trim().replace(/\s+/g," ")}function k(t){return new RegExp("(?:^|\\s+)"+eo.requote(t)+"(?:\\s+|$)","g")}function C(t){return(t+"").trim().split(/^|\s+/)}function E(n,r){function t(){for(var t=-1;++t<i;)n[t](this,r)}function e(){for(var t=-1,e=r.apply(this,arguments);++t<i;)n[t](this,e)}var i=(n=C(n).map(D)).length;return"function"==typeof r?e:t}function D(r){var i=k(r);return function(t,e){if(n=t.classList)return e?n.add(r):n.remove(r);var n=t.getAttribute("class")||"";e?(i.lastIndex=0,i.test(n)||t.setAttribute("class",L(n+" "+r))):t.setAttribute("class",L(n.replace(i," ")))}}function I(e,n,r){function t(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,n,r)}function a(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}return null==n?t:"function"==typeof n?a:i}function X(e,n){function t(){delete this[e]}function r(){this[e]=n}function i(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}return null==n?t:"function"==typeof n?i:r}function Y(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=eo.ns.qualify(n)).local?e:t}function O(){var t=this.parentNode;t&&t.removeChild(this)}function P(t){return{__data__:t}}function B(t){return function(){return _o(this,t)}}function H(n){return arguments.length||(n=o),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function V(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,a=t[n],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,n);return t}function q(t){return vo(t,To),t}function j(o){var s,u;return function(t,e,n){var r,i=o[n].update,a=i.length;for(n!=u&&(u=n,s=0),s<=e&&(s=e+1);!(r=i[s])&&++s<a;);return r}}function U(i,e,n){function r(){var t=this[o];t&&(this.removeEventListener(i,t,t.$),delete this[o])}function t(){var t=u(e,ro(arguments));r.call(this),this.addEventListener(i,this[o]=t,t.$=n),t._=e}function a(){var t,e=new RegExp("^__on([^.]+)"+eo.requote(i)+"$");for(var n in this)if(t=n.match(e)){var r=this[n];this.removeEventListener(t[1],r,r.$),delete this[n]}}var o="__on"+i,s=i.indexOf("."),u=W;0<s&&(i=i.slice(0,s));var c=Ao.get(i);return c&&(i=c,u=G),s?e?t:r:e?_:a}function W(n,r){return function(t){var e=eo.event;eo.event=t,r[0]=this.__data__;try{n.apply(this,r)}finally{eo.event=e}}}function G(t,e){var r=W(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||r.call(e,t)}}function Z(t){var n=".dragsuppress-"+ ++So,r="click"+n,i=eo.select(F(t)).on("touchmove"+n,R).on("dragstart"+n,R).on("selectstart"+n,R);if(null==Mo&&(Mo=!("onselectstart"in t)&&v(t.style,"userSelect")),Mo){var a=s(t).style,o=a[Mo];a[Mo]="none"}return function(t){if(i.on(n,null),Mo&&(a[Mo]=o),t){var e=function(){i.on(r,null)};i.on(r,function(){R(),e()},!0),setTimeout(e,0)}}}function $(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(Lo<0){var i=F(t);if(i.scrollX||i.scrollY){var a=(n=eo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Lo=!(a.f||a.e),n.remove()}}return r.y=Lo?(r.x=e.pageX,e.pageY):(r.x=e.clientX,e.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function K(){return eo.event.changedTouches[0].identifier}function J(t){return 0<t?1:t<0?-1:0}function Q(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return 1<t?0:t<-1?Eo:Math.acos(t)}function et(t){return 1<t?Xo:t<-1?-Xo:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function rt(t){return((t=Math.exp(t))+1/t)/2}function it(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function ot(){}function st(t,e,n){return this instanceof st?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):bt(""+t,wt,st):new st(t,e,n)}function ut(t,e,n){function r(t){return 360<t?t-=360:t<0&&(t+=360),t<60?a+(o-a)*t/60:t<180?o:t<240?a+(o-a)*(240-t)/60:a}function i(t){return Math.round(255*r(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:1<e?1:e,a=2*(n=n<0?0:1<n?1:n)-(o=n<=.5?n*(1+e):n+e-n*e),new vt(i(t+120),i(t),i(t-120))}function ct(t,e,n){return this instanceof ct?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):ht(t instanceof ft?t.l:(t=Tt((t=eo.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,e,n)}function lt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ft(n,Math.cos(t*=Fo)*e,Math.sin(t)*e)}function ft(t,e,n){return this instanceof ft?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ft?new ft(t.l,t.a,t.b):t instanceof ct?lt(t.h,t.c,t.l):Tt((t=vt(t)).r,t.g,t.b):new ft(t,e,n)}function dt(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return new vt(xt(3.2404542*(i=gt(i)*jo)-1.5371385*(r=gt(r)*Uo)-.4985314*(a=gt(a)*Wo)),xt(-.969266*i+1.8760108*r+.041556*a),xt(.0556434*i-.2040259*r+1.0572252*a))}function ht(t,e,n){return 0<t?new ct(Math.atan2(n,e)*zo,Math.sqrt(e*e+n*n),t):new ct(NaN,NaN,t)}function gt(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function pt(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function xt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function vt(t,e,n){return this instanceof vt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof vt?new vt(t.r,t.g,t.b):bt(""+t,vt,ut):new vt(t,e,n)}function yt(t){return new vt(t>>16,t>>8&255,255&t)}function mt(t){return yt(t)+""}function _t(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function bt(t,e,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Mt(i[0]),Mt(i[1]),Mt(i[2]))}return(a=$o.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,u=15&a,u|=u<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),e(o,s,u))}function wt(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,u=(o+a)/2;return s?(i=u<.5?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=0<u&&u<1?0:r),new st(r,i,u)}function Tt(t,e,n){var r=pt((.4124564*(t=At(t))+.3575761*(e=At(e))+.1804375*(n=At(n)))/jo),i=pt((.2126729*t+.7151522*e+.072175*n)/Uo);return ft(116*i-16,500*(r-i),200*(i-pt((.0193339*t+.119192*e+.9503041*n)/Wo)))}function At(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function St(t){return"function"==typeof t?t:function(){return t}}function Lt(r){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),kt(t,e,r,n)}}function kt(i,a,r,t){function e(){var t,e=c.status;if(!e&&Et(c)||200<=e&&e<300||304===e){try{t=r.call(o,c)}catch(n){return void s.error.call(o,n)}s.load.call(o,t)}else s.error.call(o,c)}var o={},s=eo.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(i)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=e:c.onreadystatechange=function(){3<c.readyState&&e()},c.onprogress=function(t){var e=eo.event;eo.event=t;try{s.progress.call(o,c)}finally{eo.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(a=null==t?null:t+"",o):a},o.responseType=function(t){return arguments.length?(l=t,o):l},o.response=function(t){return r=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ro(arguments)))}}),o.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),c.open(t,i,!0),null==a||"accept"in u||(u.accept=a+",*/*"),c.setRequestHeader)for(var r in u)c.setRequestHeader(r,u[r]);return null!=a&&c.overrideMimeType&&c.overrideMimeType(a),null!=l&&(c.responseType=l),null!=n&&o.on("error",n).on("load",function(t){n(null,t)}),s.beforesend.call(o,c),c.send(null==e?null:e),o},o.abort=function(){return c.abort(),o},eo.rebind(o,s,"on"),null==t?o:o.get(Ct(t))}function Ct(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Et(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Dt(){var t=It(),e=Xt()-t;24<e?(isFinite(e)&&(clearTimeout(ts),ts=setTimeout(Dt,e)),Qo=0):(Qo=1,ns(Dt))}function It(){var t=Date.now();for(es=Ko;es;)t>=es.t&&(es.f=es.c(t-es.t)),es=es.n;return t}function Xt(){for(var t,e=Ko,n=Infinity;e;)e=e.f?t?t.n=e.n:Ko=e.n:(e.t<n&&(n=e.t),(t=e).n);return Jo=t,n}function Ft(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function zt(t,e){var n=Math.pow(10,3*fo(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}}function Rt(t){var A=t.decimal,s=t.thousands,u=t.grouping,r=t.currency,M=u&&s?function(t,e){for(var n=t.length,r=[],i=0,a=u[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),r.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=u[i=(i+1)%u.length];return r.reverse().join(s)}:z;return function(t){var e=is.exec(t),l=e[1]||" ",f=e[2]||">",d=e[3]||"-",n=e[4]||"",h=e[5],g=+e[6],p=e[7],x=e[8],v=e[9],y=1,m="",_="",b=!1,w=!0;switch(x&&(x=+x.substring(1)),(h||"0"===l&&"="===f)&&(h=l="0",f="="),v){case"n":p=!0,v="g";break;case"%":y=100,_="%",v="f";break;case"p":y=100,_="%",v="r";break;case"b":case"o":case"x":case"X":"#"===n&&(m="0"+v.toLowerCase());case"c":w=!1;case"d":b=!0,x=0;break;case"s":y=-1,v="r"}"$"===n&&(m=r[0],_=r[1]),"r"!=v||x||(v="g"),null!=x&&("g"==v?x=Math.max(1,Math.min(21,x)):"e"!=v&&"f"!=v||(x=Math.max(0,Math.min(20,x)))),v=as.get(v)||Nt;var T=h&&p;return function(t){var e=_;if(b&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===d?"":d;if(y<0){var r=eo.formatPrefix(t,x);t=r.scale(t),e=r.symbol+_}else t*=y;var i,a,o=(t=v(t,x)).lastIndexOf(".");if(o<0){var s=w?t.lastIndexOf("e"):-1;a=s<0?(i=t,""):(i=t.substring(0,s),t.substring(s))}else i=t.substring(0,o),a=A+t.substring(o+1);!h&&p&&(i=M(i,Infinity));var u=m.length+i.length+a.length+(T?0:n.length),c=u<g?new Array(u=g-u+1).join(l):"";return T&&(i=M(c+i,c.length?g-a.length:Infinity)),n+=m,t=i+a,("<"===f?n+t+c:">"===f?c+n+t:"^"===f?c.substring(0,u>>=1)+n+t+c.substring(u):n+(T?t:c+t))+e}}}function Nt(t){return t+""}function Yt(t){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):t)}function Ot(r,a,o){function t(t){var e=r(t),n=i(e,1);return t-e<n-t?e:n}function s(t){return a(t=r(new ss(t-1)),1),t}function i(t,e){return a(t=new ss(+t),e),t}function u(t,e,n){var r=s(t),i=[];if(1<n)for(;r<e;)o(r)%n||i.push(new Date(+r)),a(r,1);else for(;r<e;)i.push(new Date(+r)),a(r,1);return i}function e(t,e,n){try{var r=new(ss=Yt);return r._=t,u(r,e,n)}finally{ss=Date}}(r.floor=r).round=t,r.ceil=s,r.offset=i,r.range=u;var n=r.utc=Pt(r);return(n.floor=n).round=Pt(t),n.ceil=Pt(s),n.offset=Pt(i),n.range=e,r}function Pt(r){return function(t,e){try{var n=new(ss=Yt);return n._=t,r(n,e)._}finally{ss=Date}}}function Bt(t){function r(s){function t(t){for(var e,n,r,i=[],a=-1,o=0;++a<u;)37===s.charCodeAt(a)&&(i.push(s.slice(o,a)),null!=(n=cs[e=s.charAt(++a)])&&(e=s.charAt(++a)),(r=k[e])&&(e=r(t,null==n?"e"===e?" ":"0":n)),i.push(e),o=a+1);return i.push(s.slice(o,a)),i.join("")}var u=s.length;return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(i(e,s,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&ss!==Yt,r=new(n?Yt:ss);return"j"in e?r.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(r.setFullYear(e.y,0,1),r.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(r.getDay()+5)%7:e.w+7*e.U-(r.getDay()+6)%7)):r.setFullYear(e.y,e.m,e.d),r.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),n?r._:r},t.toString=function(){return s},t}function i(t,e,n,r){for(var i,a,o,s=0,u=e.length,c=n.length;s<u;){if(c<=r)return-1;if(37===(i=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=C[o in cs?e.charAt(s++):o])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function e(t,e,n){w.lastIndex=0;var r=w.exec(e.slice(n));return r?(t.w=T.get(r[0].toLowerCase()),n+r[0].length):-1}function n(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.w=b.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){S.lastIndex=0;var r=S.exec(e.slice(n));return r?(t.m=L.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){A.lastIndex=0;var r=A.exec(e.slice(n));return r?(t.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,n){return i(t,k.c.toString(),e,n)}function u(t,e,n){return i(t,k.x.toString(),e,n)}function c(t,e,n){return i(t,k.X.toString(),e,n)}function l(t,e,n){var r=m.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,d=t.date,h=t.time,g=t.periods,p=t.days,x=t.shortDays,v=t.months,y=t.shortMonths;r.utc=function(t){function e(t){try{var e=new(ss=Yt);return e._=t,n(e)}finally{ss=Date}}var n=r(t);return e.parse=function(t){try{ss=Yt;var e=n.parse(t);return e&&e._}finally{ss=Date}},e.toString=n.toString,e},r.multi=r.utc.multi=se;var m=eo.map(),_=Vt(p),b=qt(p),w=Vt(x),T=qt(x),A=Vt(v),M=qt(v),S=Vt(y),L=qt(y);g.forEach(function(t,e){m.set(t.toLowerCase(),e)});var k={a:function(t){return x[t.getDay()]},A:function(t){return p[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:r(f),d:function(t,e){return Ht(t.getDate(),e,2)},e:function(t,e){return Ht(t.getDate(),e,2)},H:function(t,e){return Ht(t.getHours(),e,2)},I:function(t,e){return Ht(t.getHours()%12||12,e,2)},j:function(t,e){return Ht(1+os.dayOfYear(t),e,3)},L:function(t,e){return Ht(t.getMilliseconds(),e,3)},m:function(t,e){return Ht(t.getMonth()+1,e,2)},M:function(t,e){return Ht(t.getMinutes(),e,2)},p:function(t){return g[+(12<=t.getHours())]},S:function(t,e){return Ht(t.getSeconds(),e,2)},U:function(t,e){return Ht(os.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ht(os.mondayOfYear(t),e,2)},x:r(d),X:r(h),y:function(t,e){return Ht(t.getFullYear()%100,e,2)},Y:function(t,e){return Ht(t.getFullYear()%1e4,e,4)},Z:ae,"%":function(){return"%"}},C={a:e,A:n,b:a,B:o,c:s,d:Qt,e:Qt,H:ee,I:ee,j:te,L:ie,m:Jt,M:ne,p:l,S:re,U:Ut,w:jt,W:Wt,x:u,X:c,y:Zt,Y:Gt,Z:$t,"%":oe};return r}function Ht(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Vt(t){return new RegExp("^(?:"+t.map(eo.requote).join("|")+")","i")}function qt(t){for(var e=new y,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function jt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ut(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Wt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Gt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Zt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+2));return r?(t.y=Kt(+r[0]),n+r[0].length):-1}function $t(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Kt(t){return t+(68<t?1900:2e3)}function Jt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qt(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function te(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ee(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ne(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function re(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ie(t,e,n){ls.lastIndex=0;var r=ls.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ae(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",r=fo(e)/60|0,i=fo(e)%60;return n+Ht(r,"0",2)+Ht(i,"0",2)}function oe(t,e,n){fs.lastIndex=0;var r=fs.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function se(r){for(var t=r.length,e=-1;++e<t;)r[e][0]=this(r[e][0]);return function(t){for(var e=0,n=r[e];!n[1](t);)n=r[++e];return n[0](t)}}function ue(){}function ce(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}function le(t,e){t&&ps.hasOwnProperty(t.type)&&ps[t.type](t,e)}function fe(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function de(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)fe(t[n],e,1);e.polygonEnd()}function he(){function n(t,e){e=e*Fo/2+Eo/4;var n=(t*=Fo)-l,r=0<=n?1:-1,i=r*n,a=Math.cos(e),o=Math.sin(e),s=d*o,u=f*a+s*Math.cos(i),c=s*r*Math.sin(i);ks.add(Math.atan2(c,u)),l=t,f=a,d=o}var r,i,l,f,d;Cs.point=function(t,e){Cs.point=n,l=(r=t)*Fo,f=Math.cos(e=(i=e)*Fo/2+Eo/4),d=Math.sin(e)},Cs.lineEnd=function(){n(r,i)}}function ge(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function pe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ve(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ye(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function me(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _e(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function be(t,e){return fo(t[0]-e[0])<ko&&fo(t[1]-e[1])<ko}function we(t,e){t*=Fo;var n=Math.cos(e*=Fo);Te(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Te(t,e,n){ms+=(t-ms)/++vs,_s+=(e-_s)/vs,bs+=(n-bs)/vs}function Ae(){function r(t,e){t*=Fo;var n=Math.cos(e*=Fo),r=n*Math.cos(t),i=n*Math.sin(t),a=Math.sin(e),o=Math.atan2(Math.sqrt((o=u*a-c*i)*o+(o=c*r-s*a)*o+(o=s*i-u*r)*o),s*r+u*i+c*a);ys+=o,ws+=o*(s+(s=r)),Ts+=o*(u+(u=i)),As+=o*(c+(c=a)),Te(s,u,c)}var s,u,c;Es.point=function(t,e){t*=Fo;var n=Math.cos(e*=Fo);s=n*Math.cos(t),u=n*Math.sin(t),c=Math.sin(e),Es.point=r,Te(s,u,c)}}function Me(){Es.point=we}function Se(){function r(t,e){t*=Fo;var n=Math.cos(e*=Fo),r=n*Math.cos(t),i=n*Math.sin(t),a=Math.sin(e),o=g*a-p*i,s=p*r-h*a,u=h*i-g*r,c=Math.sqrt(o*o+s*s+u*u),l=h*r+g*i+p*a,f=c&&-tt(l)/c,d=Math.atan2(c,l);Ms+=f*o,Ss+=f*s,Ls+=f*u,ys+=d,ws+=d*(h+(h=r)),Ts+=d*(g+(g=i)),As+=d*(p+(p=a)),Te(h,g,p)}var i,a,h,g,p;Es.point=function(t,e){i=t,a=e,Es.point=r,t*=Fo;var n=Math.cos(e*=Fo);h=n*Math.cos(t),g=n*Math.sin(t),p=Math.sin(e),Te(h,g,p)},Es.lineEnd=function(){r(i,a),Es.lineEnd=Me,Es.point=we}}function Le(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t}function ke(){return!0}function Ce(t,e,n,r,s){var u=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(be(n,r)){s.lineStart();for(var i=0;i<e;++i)s.point((n=t[i])[0],n[1]);s.lineEnd()}else{var a=new De(n,t,null,!0),o=new De(n,null,a,!1);a.o=o,u.push(a),c.push(o),o=new De(r,null,a=new De(r,t,null,!1),!0),a.o=o,u.push(a),c.push(o)}}}),c.sort(e),Ee(u),Ee(c),u.length){for(var i=0,a=n,o=c.length;i<o;++i)c[i].e=a=!a;for(var l,f,d=u[0];;){for(var h=d,g=!0;h.v;)if((h=h.n)===d)return;l=h.z,s.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(i=0,o=l.length;i<o;++i)s.point((f=l[i])[0],f[1]);else r(h.x,h.n.x,1,s);h=h.n}else{if(g)for(i=(l=h.p.z).length-1;0<=i;--i)s.point((f=l[i])[0],f[1]);else r(h.x,h.p.x,-1,s);h=h.p}l=(h=h.o).z,g=!g}while(!h.v);s.lineEnd()}}}function Ee(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function De(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ie(y,m,_,b){return function(r,o){function e(t,e){var n=r(t,e);y(t=n[0],e=n[1])&&o.point(t,e)}function t(t,e){var n=r(t,e);d.point(n[0],n[1])}function n(){g.point=t,d.lineStart()}function i(){g.point=e,d.lineEnd()}function s(t,e){f.push([t,e]);var n=r(t,e);x.point(n[0],n[1])}function a(){x.lineStart(),f=[]}function u(){s(f[0][0],f[0][1]),x.lineEnd();var t,e=x.clean(),n=p.buffer(),r=n.length;if(f.pop(),l.push(f),f=null,r)if(1&e){var i,a=-1;if(0<(r=(t=n[0]).length-1)){for(v||(o.polygonStart(),v=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else 1<r&&2&e&&n.push(n.pop().concat(n.shift())),c.push(n.filter(Xe))}var c,l,f,d=m(o),h=r.invert(b[0],b[1]),g={point:e,lineStart:n,lineEnd:i,polygonStart:function(){g.point=s,g.lineStart=a,g.lineEnd=u,c=[],l=[]},polygonEnd:function(){g.point=e,g.lineStart=n,g.lineEnd=i,c=eo.merge(c);var t=Oe(h,l);c.length?(v||(o.polygonStart(),v=!0),Ce(c,ze,t,_,o)):t&&(v||(o.polygonStart(),v=!0),o.lineStart(),_(null,null,1,o),o.lineEnd()),v&&(o.polygonEnd(),v=!1),c=l=null},sphere:function(){o.polygonStart(),o.lineStart(),_(null,null,1,o),o.lineEnd(),o.polygonEnd()}},p=Fe(),x=m(p),v=!1;return g}}function Xe(t){return 1<t.length}function Fe(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:_,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function ze(t,e){return((t=t.x)[0]<0?t[1]-Xo-ko:Xo-t[1])-((e=e.x)[0]<0?e[1]-Xo-ko:Xo-e[1])}function Re(i){var a,o=NaN,s=NaN,u=NaN;return{lineStart:function(){i.lineStart(),a=1},point:function(t,e){var n=0<t?Eo:-Eo,r=fo(t-o);fo(r-Eo)<ko?(i.point(o,s=0<(s+e)/2?Xo:-Xo),i.point(u,s),i.lineEnd(),i.lineStart(),i.point(n,s),i.point(t,s),a=0):u!==n&&Eo<=r&&(fo(o-u)<ko&&(o-=u*ko),fo(t-n)<ko&&(t-=n*ko),s=Ne(o,s,t,e),i.point(u,s),i.lineEnd(),i.lineStart(),i.point(n,s),a=0),i.point(o=t,s=e),u=n},lineEnd:function(){i.lineEnd(),o=s=NaN},clean:function(){return 2-a}}}function Ne(t,e,n,r){var i,a,o=Math.sin(t-n);return fo(o)>ko?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}function Ye(t,e,n,r){var i;if(null==t)i=n*Xo,r.point(-Eo,i),r.point(0,i),r.point(Eo,i),r.point(Eo,0),r.point(Eo,-i),r.point(0,-i),r.point(-Eo,-i),r.point(-Eo,0),r.point(-Eo,i);else if(fo(t[0]-e[0])>ko){var a=t[0]<e[0]?Eo:-Eo;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Oe(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;ks.reset();for(var s=0,u=e.length;s<u;++s){var c=e[s],l=c.length;if(l)for(var f=c[0],d=f[0],h=f[1]/2+Eo/4,g=Math.sin(h),p=Math.cos(h),x=1;;){x===l&&(x=0);var v=(t=c[x])[0],y=t[1]/2+Eo/4,m=Math.sin(y),_=Math.cos(y),b=v-d,w=0<=b?1:-1,T=w*b,A=Eo<T,M=g*m;if(ks.add(Math.atan2(M*w*Math.sin(T),p*_+M*Math.cos(T))),a+=A?b+w*Do:b,A^n<=d^n<=v){var S=xe(ge(f),ge(t));me(S);var L=xe(i,S);me(L);var k=(A^0<=b?-1:1)*et(L[2]);(k<r||r===k&&(S[0]||S[1]))&&(o+=A^0<=b?1:-1)}if(!x++)break;d=v,g=m,p=_,f=t}}return(a<-ko||a<ko&&ks<0)^1&o}function Pe(i){function h(t,e){return Math.cos(t)*Math.cos(e)>S}function t(s){var u,c,l,f,d;return{lineStart:function(){f=l=!1,d=1},point:function(t,e){var n,r=[t,e],i=h(t,e),a=x?i?0:p(t,e):i?p(t+(t<0?Eo:-Eo),e):0;if(!u&&(f=l=i)&&s.lineStart(),i!==l&&(n=g(u,r),(be(u,n)||be(r,n))&&(r[0]+=ko,r[1]+=ko,i=h(r[0],r[1]))),i!==l)d=0,i?(s.lineStart(),n=g(r,u),s.point(n[0],n[1])):(n=g(u,r),s.point(n[0],n[1]),s.lineEnd()),u=n;else if(v&&u&&x^i){var o;a&c||!(o=g(r,u,!0))||(d=0,x?(s.lineStart(),s.point(o[0][0],o[0][1]),s.point(o[1][0],o[1][1]),s.lineEnd()):(s.point(o[1][0],o[1][1]),s.lineEnd(),s.lineStart(),s.point(o[0][0],o[0][1])))}!i||u&&be(u,r)||s.point(r[0],r[1]),u=r,l=i,c=a},lineEnd:function(){l&&s.lineEnd(),u=null},clean:function(){return d|(f&&l)<<1}}}function g(t,e,n){var r=[1,0,0],i=xe(ge(t),ge(e)),a=pe(i,i),o=i[0],s=a-o*o;if(!s)return!n&&t;var u=S*a/s,c=-S*o/s,l=xe(r,i),f=ye(r,u);ve(f,ye(i,c));var d=l,h=pe(f,d),g=pe(d,d),p=h*h-g*(pe(f,f)-1);if(!(p<0)){var x=Math.sqrt(p),v=ye(d,(-h-x)/g);if(ve(v,f),v=_e(v),!n)return v;var y,m=t[0],_=e[0],b=t[1],w=e[1];_<m&&(y=m,m=_,_=y);var T=_-m,A=fo(T-Eo)<ko;if(!A&&w<b&&(y=b,b=w,w=y),A||T<ko?A?0<b+w^v[1]<(fo(v[0]-m)<ko?b:w):b<=v[1]&&v[1]<=w:Eo<T^(m<=v[0]&&v[0]<=_)){var M=ye(d,(-h+x)/g);return ve(M,f),[v,_e(M)]}}}function p(t,e){var n=x?i:Eo-i,r=0;return t<-n?r|=1:n<t&&(r|=2),e<-n?r|=4:n<e&&(r|=8),r}var S=Math.cos(i),x=0<S,v=fo(S)>ko;return Ie(h,t,gn(i,6*Fo),x?[0,-i]:[-Eo,i-Eo])}function Be(l,f,d,h){return function(t){var e,n=t.a,r=t.b,i=n.x,a=n.y,o=0,s=1,u=r.x-i,c=r.y-a;if(e=l-i,u||!(0<e)){if(e/=u,u<0){if(e<o)return;e<s&&(s=e)}else if(0<u){if(s<e)return;o<e&&(o=e)}if(e=d-i,u||!(e<0)){if(e/=u,u<0){if(s<e)return;o<e&&(o=e)}else if(0<u){if(e<o)return;e<s&&(s=e)}if(e=f-a,c||!(0<e)){if(e/=c,c<0){if(e<o)return;e<s&&(s=e)}else if(0<c){if(s<e)return;o<e&&(o=e)}if(e=h-a,c||!(e<0)){if(e/=c,c<0){if(s<e)return;o<e&&(o=e)}else if(0<c){if(e<o)return;e<s&&(s=e)}return 0<o&&(t.a={x:i+o*u,y:a+o*c}),s<1&&(t.b={x:i+s*u,y:a+s*c}),t}}}}}}function He(T,A,M,S){function L(t,e){return fo(t[0]-T)<ko?0<e?0:3:fo(t[0]-M)<ko?0<e?2:1:fo(t[1]-A)<ko?0<e?1:0:0<e?3:2}function k(t,e){return C(t.x,e.x)}function C(t,e){var n=L(t,1),r=L(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){function r(t){for(var e=0,n=l.length,r=t[1],i=0;i<n;++i)for(var a,o=1,s=l[i],u=s.length,c=s[0];o<u;++o)a=s[o],c[1]<=r?a[1]>r&&0<Q(c,a,t)&&++e:a[1]<=r&&Q(c,a,t)<0&&--e,c=a;return 0!==e}function a(t,e,n,r){var i=0,a=0;if(null==t||(i=L(t,n))!==(a=L(e,n))||C(t,e)<0^0<n)for(;r.point(0===i||3===i?T:M,1<i?S:A),(i=(i+n+4)%4)!==a;);else r.point(e[0],e[1])}function o(t,e){return T<=t&&t<=M&&A<=e&&e<=S}function t(t,e){o(t,e)&&i.point(t,e)}function e(){w.point=s,l&&l.push(c=[]),x=!(v=!0),g=p=NaN}function n(){u&&(s(f,d),h&&x&&_.rejoin(),u.push(_.buffer())),w.point=t,x&&i.lineEnd()}function s(t,e){var n=o(t=Math.max(-Is,Math.min(Is,t)),e=Math.max(-Is,Math.min(Is,e)));if(l&&c.push([t,e]),v)f=t,d=e,v=!1,(h=n)&&(i.lineStart(),i.point(t,e));else if(n&&x)i.point(t,e);else{var r={a:{x:g,y:p},b:{x:t,y:e}};b(r)?(x||(i.lineStart(),i.point(r.a.x,r.a.y)),i.point(r.b.x,r.b.y),n||i.lineEnd(),y=!1):n&&(i.lineStart(),i.point(t,e),y=!1)}g=t,p=e,x=n}var u,l,c,f,d,h,g,p,x,v,y,m=i,_=Fe(),b=Be(T,A,M,S),w={point:t,lineStart:e,lineEnd:n,polygonStart:function(){i=_,u=[],l=[],y=!0},polygonEnd:function(){i=m,u=eo.merge(u);var t=r([T,S]),e=y&&t,n=u.length;(e||n)&&(i.polygonStart(),e&&(i.lineStart(),a(null,null,1,i),i.lineEnd()),n&&Ce(u,k,t,a,i),i.polygonEnd()),u=l=c=null}};return w}}function Ve(t){var e=0,n=Eo/3,r=on(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Eo/180,n=t[1]*Eo/180):[e/Eo*180,n/Eo*180]},i}function qe(t,e){function n(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,et((a-(t*t+n*n)*i*i)/(2*i))]},n}function je(){function n(t,e){Fs+=o*t-a*e,a=t,o=e}var r,i,a,o;Ps.point=function(t,e){Ps.point=n,r=a=t,i=o=e},Ps.lineEnd=function(){n(r,i)}}function Ue(t,e){t<zs&&(zs=t),Ns<t&&(Ns=t),e<Rs&&(Rs=e),Ys<e&&(Ys=e)}function We(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function r(){s.point=t}function i(){o.push("Z")}var a=Ge(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return a=Ge(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function Ge(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ze(t,e){ms+=t,_s+=e,++bs}function $e(){function n(t,e){var n=t-a,r=e-o,i=Math.sqrt(n*n+r*r);ws+=i*(a+t)/2,Ts+=i*(o+e)/2,As+=i,Ze(a=t,o=e)}var a,o;Hs.point=function(t,e){Hs.point=n,Ze(a=t,o=e)}}function Ke(){Hs.point=Ze}function Je(){function n(t,e){var n=t-a,r=e-o,i=Math.sqrt(n*n+r*r);ws+=i*(a+t)/2,Ts+=i*(o+e)/2,As+=i,Ms+=(i=o*t-a*e)*(a+t),Ss+=i*(o+e),Ls+=3*i,Ze(a=t,o=e)}var r,i,a,o;Hs.point=function(t,e){Hs.point=n,Ze(r=a=t,i=o=e)},Hs.lineEnd=function(){n(r,i)}}function Qe(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,Do)}function e(t,e){n.moveTo(t,e),s.point=r}function r(t,e){n.lineTo(t,e)}function i(){s.point=t}function a(){n.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return o=t,s},result:_};return s}function tn(C){function e(t){return(b?r:n)(t)}function n(n){return rn(n,function(t,e){t=C(t,e),n.point(t[0],t[1])})}function r(i){function t(t,e){t=C(t,e),i.point(t[0],t[1])}function e(){p=NaN,_.point=n,i.lineStart()}function n(t,e){var n=ge([t,e]),r=C(t,e);E(p,x,g,v,y,m,p=r[0],x=r[1],g=t,v=n[0],y=n[1],m=n[2],b,i),i.point(p,x)}function r(){_.point=t,i.lineEnd()}function a(){e(),_.point=o,_.lineEnd=s}function o(t,e){n(u=t,e),c=p,l=x,f=v,d=y,h=m,_.point=n}function s(){E(p,x,g,v,y,m,c,l,u,f,d,h,b,i),(_.lineEnd=r)()}var u,c,l,f,d,h,g,p,x,v,y,m,_={point:t,lineStart:e,lineEnd:r,polygonStart:function(){i.polygonStart(),_.lineStart=a},polygonEnd:function(){i.polygonEnd(),_.lineStart=e}};return _}function E(t,e,n,r,i,a,o,s,u,c,l,f,d,h){var g=o-t,p=s-e,x=g*g+p*p;if(4*D<x&&d--){var v=r+c,y=i+l,m=a+f,_=Math.sqrt(v*v+y*y+m*m),b=Math.asin(m/=_),w=fo(fo(m)-1)<ko||fo(n-u)<ko?(n+u)/2:Math.atan2(y,v),T=C(w,b),A=T[0],M=T[1],S=A-t,L=M-e,k=p*S-g*L;(D<k*k/x||.3<fo((g*S+p*L)/x-.5)||r*c+i*l+a*f<I)&&(E(t,e,n,r,i,a,A,M,w,v/=_,y/=_,m,d,h),h.point(A,M),E(A,M,w,v,y,m,o,s,u,c,l,f,d,h))}}var D=.5,I=Math.cos(30*Fo),b=16;return e.precision=function(t){return arguments.length?(b=0<(D=t*t)&&16,e):Math.sqrt(D)},e}function en(n){var e=tn(function(t,e){return n([t*zo,e*zo])});return function(t){return sn(e(t))}}function nn(t){this.stream=t}function rn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd(
)},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function an(t){return on(function(){return t})()}function on(t){function e(t){return[(t=s(t[0]*Fo,t[1]*Fo))[0]*d+u,c-t[1]*d]}function n(t){return(t=s.invert((t[0]-u)/d,(c-t[1])/d))&&[t[0]*zo,t[1]*zo]}function r(){s=Le(o=ln(v,y,m),a);var t=a(p,x);return u=h-t[0]*d,c=g+t[1]*d,i()}function i(){return l&&(l.valid=!1,l=null),e}var a,o,s,u,c,l,f=tn(function(t,e){return[(t=a(t,e))[0]*d+u,c-t[1]*d]}),d=150,h=480,g=250,p=0,x=0,v=0,y=0,m=0,_=Ds,b=z,w=null,T=null;return e.stream=function(t){return l&&(l.valid=!1),(l=sn(_(o,f(b(t))))).valid=!0,l},e.clipAngle=function(t){return arguments.length?(_=null==t?(w=t,Ds):Pe((w=+t)*Fo),i()):w},e.clipExtent=function(t){return arguments.length?(b=(T=t)?He(t[0][0],t[0][1],t[1][0],t[1][1]):z,i()):T},e.scale=function(t){return arguments.length?(d=+t,r()):d},e.translate=function(t){return arguments.length?(h=+t[0],g=+t[1],r()):[h,g]},e.center=function(t){return arguments.length?(p=t[0]%360*Fo,x=t[1]%360*Fo,r()):[p*zo,x*zo]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Fo,y=t[1]%360*Fo,m=2<t.length?t[2]%360*Fo:0,r()):[v*zo,y*zo,m*zo]},eo.rebind(e,f,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,r()}}function sn(n){return rn(n,function(t,e){n.point(t*Fo,e*Fo)})}function un(t,e){return[t,e]}function cn(t,e){return[Eo<t?t-Do:t<-Eo?t+Do:t,e]}function ln(t,e,n){return t?e||n?Le(dn(t),hn(e,n)):dn(t):e||n?hn(e,n):cn}function fn(n){return function(t,e){return[Eo<(t+=n)?t-Do:t<-Eo?t+Do:t,e]}}function dn(t){var e=fn(t);return e.invert=fn(-t),e}function hn(t,e){function n(t,e){var n=Math.cos(e),r=Math.cos(t)*n,i=Math.sin(t)*n,a=Math.sin(e),o=a*s+r*u;return[Math.atan2(i*c-o*l,r*s-a*u),et(o*c+i*l)]}var s=Math.cos(t),u=Math.sin(t),c=Math.cos(e),l=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),r=Math.cos(t)*n,i=Math.sin(t)*n,a=Math.sin(e),o=a*c-i*l;return[Math.atan2(i*c+a*l,r*s+o*u),et(o*s-r*u)]},n}function gn(s,u){var c=Math.cos(s),l=Math.sin(s);return function(t,e,n,r){var i=n*u;null!=t?(t=pn(c,t),e=pn(c,e),(0<n?t<e:e<t)&&(t+=n*Do)):(t=s+n*Do,e=s-.5*i);for(var a,o=t;0<n?e<o:o<e;o-=i)r.point((a=_e([c,-l*Math.cos(o),-l*Math.sin(o)]))[0],a[1])}}function pn(t,e){var n=ge(e);n[0]-=t,me(n);var r=tt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-ko)%(2*Math.PI)}function xn(t,e,n){var r=eo.range(t,e-ko,n).concat(e);return function(e){return r.map(function(t){return[e,t]})}}function vn(t,e,n){var r=eo.range(t,e-ko,n).concat(e);return function(e){return r.map(function(t){return[t,e]})}}function yn(t){return t.source}function mn(t){return t.target}function _n(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),c=i*Math.sin(t),l=a*Math.cos(n),f=a*Math.sin(n),d=2*Math.asin(Math.sqrt(at(r-e)+i*a*at(n-t))),h=1/Math.sin(d),g=d?function(t){var e=Math.sin(t*=d)*h,n=Math.sin(d-t)*h,r=n*u+e*l,i=n*c+e*f,a=n*o+e*s;return[Math.atan2(i,r)*zo,Math.atan2(a,Math.sqrt(r*r+i*i))*zo]}:function(){return[t*zo,e*zo]};return g.distance=d,g}function bn(){function n(t,e){var n=Math.sin(e*=Fo),r=Math.cos(e),i=fo((t*=Fo)-o),a=Math.cos(i);Os+=Math.atan2(Math.sqrt((i=r*Math.sin(i))*i+(i=u*n-s*r*a)*i),s*n+u*r*a),o=t,s=n,u=r}var o,s,u;Vs.point=function(t,e){o=t*Fo,s=Math.sin(e*=Fo),u=Math.cos(e),Vs.point=n},Vs.lineEnd=function(){Vs.point=Vs.lineEnd=_}}function wn(a,o){function t(t,e){var n=Math.cos(t),r=Math.cos(e),i=a(n*r);return[i*r*Math.sin(t),i*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),r=o(n),i=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*i,n*a),Math.asin(n&&e*i/n)]},t}function Tn(t,e){function n(t,e){0<o?e<-Xo+ko&&(e=-Xo+ko):Xo-ko<e&&(e=Xo-ko);var n=o/Math.pow(i(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Eo/4+t/2)},a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),o=r*Math.pow(i(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,r=J(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Xo]},n):Mn}function An(t,e){function n(t,e){var n=a-e;return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),a=r/i+t;return fo(i)<ko?un:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,a-J(i)*Math.sqrt(t*t+n*n)]},n)}function Mn(t,e){return[t,Math.log(Math.tan(Eo/4+e/2))]}function Sn(t){var i,a=an(t),o=a.scale,s=a.translate,u=a.clipExtent;return a.scale=function(){var t=o.apply(a,arguments);return t===a?i?a.clipExtent(null):a:t},a.translate=function(){var t=s.apply(a,arguments);return t===a?i?a.clipExtent(null):a:t},a.clipExtent=function(t){var e=u.apply(a,arguments);if(e===a){if(i=null==t){var n=Eo*o(),r=s();u([[r[0]-n,r[1]-n],[r[0]+n,r[1]+n]])}}else i&&(e=null);return e},a.clipExtent(null)}function Ln(t,e){return[Math.log(Math.tan(Eo/4+e/2)),-t]}function kn(t){return t[0]}function Cn(t){return t[1]}function En(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;1<r&&Q(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Dn(t,e){return t[0]-e[0]||t[1]-e[1]}function In(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Xn(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,u=t[1],c=n[1],l=e[1]-u,f=r[1]-c,d=(s*(u-c)-f*(i-a))/(f*o-s*l);return[i+d*o,u+d*l]}function Fn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function zn(){nr(this),this.edge=this.site=this.circle=null}function Rn(t){var e=eu.pop()||new zn;return e.site=t,e}function Nn(t){Wn(t),Js.remove(t),eu.push(t),nr(t)}function Yn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];Nn(t);for(var u=a;u.circle&&fo(n-u.circle.x)<ko&&fo(r-u.circle.cy)<ko;)a=u.P,s.unshift(u),Nn(u),u=a;s.unshift(u),Wn(u);for(var c=o;c.circle&&fo(n-c.circle.x)<ko&&fo(r-c.circle.cy)<ko;)o=c.N,s.push(c),Nn(c),c=o;s.push(c),Wn(c);var l,f=s.length;for(l=1;l<f;++l)c=s[l],u=s[l-1],Qn(c.edge,u.site,c.site,i);u=s[0],(c=s[f-1]).edge=Kn(u.site,c.site,null,i),Un(u),Un(c)}function On(t){for(var e,n,r,i,a=t.x,o=t.y,s=Js._;s;)if(r=Pn(s,o)-a,ko<r)s=s.L;else{if(i=a-Bn(s,o),!(ko<i)){-ko<r?(e=s.P,n=s):-ko<i?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=Rn(t);if(Js.insert(e,u),e||n){if(e===n)return Wn(e),n=Rn(e.site),Js.insert(u,n),u.edge=n.edge=Kn(e.site,u.site),Un(e),void Un(n);if(n){Wn(e),Wn(n);var c=e.site,l=c.x,f=c.y,d=t.x-l,h=t.y-f,g=n.site,p=g.x-l,x=g.y-f,v=2*(d*x-h*p),y=d*d+h*h,m=p*p+x*x,_={x:(x*y-h*m)/v+l,y:(d*m-p*y)/v+f};Qn(n.edge,c,g,_),u.edge=Kn(c,t,null,_),n.edge=Kn(t,g,null,_),Un(e),Un(n)}else u.edge=Kn(e.site,u.site)}}function Pn(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-Infinity;var s=(n=o.site).x,u=n.y,c=u-e;if(!c)return s;var l=s-r,f=1/a-1/c,d=l/c;return f?(-d+Math.sqrt(d*d-2*f*(l*l/(-2*c)-u+c/2+i-a/2)))/f+r:(r+s)/2}function Bn(t,e){var n=t.N;if(n)return Pn(n,e);var r=t.site;return r.y===e?r.x:Infinity}function Hn(t){this.site=t,this.edges=[]}function Vn(t){for(var e,n,r,i,a,o,s,u,c,l,f=t[0][0],d=t[1][0],h=t[0][1],g=t[1][1],p=Ks,x=p.length;x--;)if((a=p[x])&&a.prepare())for(u=(s=a.edges).length,o=0;o<u;)r=(l=s[o].end()).x,i=l.y,e=(c=s[++o%u].start()).x,n=c.y,(fo(r-e)>ko||fo(i-n)>ko)&&(s.splice(o,0,new tr(Jn(a.site,l,fo(r-f)<ko&&ko<g-i?{x:f,y:fo(e-f)<ko?n:g}:fo(i-g)<ko&&ko<d-r?{x:fo(n-g)<ko?e:d,y:g}:fo(r-d)<ko&&ko<i-h?{x:d,y:fo(e-d)<ko?n:h}:fo(i-h)<ko&&ko<r-f?{x:fo(n-h)<ko?e:f,y:h}:null),a.site,null)),++u)}function qn(t,e){return e.angle-t.angle}function jn(){nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Un(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,c=r.y-s,l=a.x-o,f=2*(u*(x=a.y-s)-c*l);if(!(-Co<=f)){var d=u*u+c*c,h=l*l+x*x,g=(x*d-c*h)/f,p=(u*h-l*d)/f,x=p+s,v=nu.pop()||new jn;v.arc=t,v.site=i,v.x=g+o,v.y=x+Math.sqrt(g*g+p*p),v.cy=x,t.circle=v;for(var y=null,m=tu._;m;)if(v.y<m.y||v.y===m.y&&v.x<=m.x){if(!m.L){y=m.P;break}m=m.L}else{if(!m.R){y=m;break}m=m.R}tu.insert(y,v),y||(Qs=v)}}}}function Wn(t){var e=t.circle;e&&(e.P||(Qs=e.N),tu.remove(e),nu.push(e),nr(e),t.circle=null)}function Gn(t){for(var e,n=$s,r=Be(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Zn(e=n[i],t)||!r(e)||fo(e.a.x-e.b.x)<ko&&fo(e.a.y-e.b.y)<ko)&&(e.a=e.b=null,n.splice(i,1))}function Zn(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],s=e[1][0],u=e[0][1],c=e[1][1],l=t.l,f=t.r,d=l.x,h=l.y,g=f.x,p=f.y,x=(d+g)/2,v=(h+p)/2;if(p===h){if(x<o||s<=x)return;if(g<d){if(a){if(a.y>=c)return}else a={x:x,y:u};n={x:x,y:c}}else{if(a){if(a.y<u)return}else a={x:x,y:c};n={x:x,y:u}}}else if(i=v-(r=(d-g)/(p-h))*x,r<-1||1<r)if(g<d){if(a){if(a.y>=c)return}else a={x:(u-i)/r,y:u};n={x:(c-i)/r,y:c}}else{if(a){if(a.y<u)return}else a={x:(c-i)/r,y:c};n={x:(u-i)/r,y:u}}else if(h<p){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}function $n(t,e){this.l=t,this.r=e,this.a=this.b=null}function Kn(t,e,n,r){var i=new $n(t,e);return $s.push(i),n&&Qn(i,t,e,n),r&&Qn(i,e,t,r),Ks[t.i].edges.push(new tr(i,t,e)),Ks[e.i].edges.push(new tr(i,e,t)),i}function Jn(t,e,n){var r=new $n(t,null);return r.a=e,r.b=n,$s.push(r),r}function Qn(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function tr(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function er(){this._=null}function nr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function rr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ir(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ar(t){for(;t.L;)t=t.L;return t}function or(t,e){var n,r,i,a=t.sort(sr).pop();for($s=[],Ks=new Array(t.length),Js=new er,tu=new er;;)if(i=Qs,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(Ks[a.i]=new Hn(a),On(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;Yn(i.arc)}e&&(Gn(e),Vn(e));var o={cells:Ks,edges:$s};return Js=tu=$s=Ks=null,o}function sr(t,e){return e.y-t.y||e.x-t.x}function ur(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function cr(t){return t.x}function lr(t){return t.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dr(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),u=e.nodes;u[0]&&dr(t,u[0],n,r,o,s),u[1]&&dr(t,u[1],o,r,i,s),u[2]&&dr(t,u[2],n,s,o,a),u[3]&&dr(t,u[3],o,s,i,a)}}function hr(t,p,x,v,y,m,_){var b,w=Infinity;return function T(t,e,n,r,i){if(!(m<e||_<n||r<v||i<y)){if(a=t.point){var a,o=p-t.x,s=x-t.y,u=o*o+s*s;if(u<w){var c=Math.sqrt(w=u);v=p-c,y=x-c,m=p+c,_=x+c,b=a}}for(var l=t.nodes,f=.5*(e+r),d=.5*(n+i),h=(d<=x)<<1|f<=p,g=h+4;h<g;++h)if(t=l[3&h])switch(3&h){case 0:T(t,e,n,f,d);break;case 1:T(t,f,n,r,d);break;case 2:T(t,e,d,f,i);break;case 3:T(t,f,d,r,i)}}}(t,v,y,m,_),b}function gr(t,e){t=eo.rgb(t),e=eo.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,s=e.b-i;return function(t){return"#"+_t(Math.round(n+a*t))+_t(Math.round(r+o*t))+_t(Math.round(i+s*t))}}function pr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=yr(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function xr(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function vr(t,r){var e,n,i,a=iu.lastIndex=au.lastIndex=0,o=-1,s=[],u=[];for(t+="",r+="";(e=iu.exec(t))&&(n=au.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(e=e[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:xr(e,n)})),a=au.lastIndex;return a<r.length&&(i=r.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(r=u[0].x,function(t){return r(t)+""}):function(){return r}:(r=u.length,function(t){for(var e,n=0;n<r;++n)s[(e=u[n]).i]=e.x(t);return s.join("")})}function yr(t,e){for(var n,r=eo.interpolators.length;0<=--r&&!(n=eo.interpolators[r](t,e)););return n}function mr(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(yr(t[n],e[n]));for(;n<a;++n)i[n]=t[n];for(;n<o;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}function _r(e){return function(t){return t<=0?0:1<=t?1:e(t)}}function br(e){return function(t){return 1-e(1-t)}}function wr(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Tr(t){return t*t}function Ar(t){return t*t*t}function Mr(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Sr(e){return function(t){return Math.pow(t,e)}}function Lr(t){return 1-Math.cos(t*Xo)}function kr(t){return Math.pow(2,10*(t-1))}function Cr(t){return 1-Math.sqrt(1-t*t)}function Er(e,n){var r;return arguments.length<2&&(n=.45),r=arguments.length?n/Do*Math.asin(1/e):(e=1,n/4),function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-r)*Do/n)}}function Dr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Ir(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Xr(t,e){t=eo.hcl(t),e=eo.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,s=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.c:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360),function(t){return lt(n+a*t,r+o*t,i+s*t)+""}}function Fr(t,e){t=eo.hsl(t),e=eo.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,s=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.s:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360),function(t){return ut(n+a*t,r+o*t,i+s*t)+""}}function zr(t,e){t=eo.lab(t),e=eo.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,s=e.b-i;return function(t){return dt(n+a*t,r+o*t,i+s*t)+""}}function Rr(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function Nr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Or(e),i=Yr(e,n),a=Or(Pr(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*zo,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*zo:0}function Yr(t,e){return t[0]*e[0]+t[1]*e[1]}function Or(t){var e=Math.sqrt(Yr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Pr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Br(t,e){var r,i=[],a=[],n=eo.transform(t),o=eo.transform(e),s=n.translate,u=o.translate,c=n.rotate,l=o.rotate,f=n.skew,d=o.skew,h=n.scale,g=o.scale;return s[0]!=u[0]||s[1]!=u[1]?(i.push("translate(",null,",",null,")"),a.push({i:1,x:xr(s[0],u[0])},{i:3,x:xr(s[1],u[1])})):u[0]||u[1]?i.push("translate("+u+")"):i.push(""),c!=l?(180<c-l?l+=360:180<l-c&&(c+=360),a.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:xr(c,l)})):l&&i.push(i.pop()+"rotate("+l+")"),f!=d?a.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:xr(f,d)}):d&&i.push(i.pop()+"skewX("+d+")"),h[0]!=g[0]||h[1]!=g[1]?(r=i.push(i.pop()+"scale(",null,",",null,")"),a.push({i:r-4,x:xr(h[0],g[0])},{i:r-2,x:xr(h[1],g[1])})):1==g[0]&&1==g[1]||i.push(i.pop()+"scale("+g+")"),r=a.length,function(t){for(var e,n=-1;++n<r;)i[(e=a[n]).i]=e.x(t);return i.join("")}}function Hr(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function Vr(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function qr(t){for(var e=t.source,n=t.target,r=Ur(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function jr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function Ur(t,e){if(t===e)return t;for(var n=jr(t),r=jr(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function Wr(t){t.fixed|=2}function Gr(t){t.fixed&=-7}function Zr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function $r(t){t.fixed&=-5}function Kr(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,u=-1;++u<s;)null!=(a=o[u])&&(Kr(a,e,n),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*n[t.point.index];t.charge+=t.pointCharge=c,r+=c*t.point.x,i+=c*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function Jr(t,e){return eo.rebind(t,e,"sort","children","value"),(t.nodes=t).links=ii,t}function Qr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;0<=--r;)n.push(i[r])}function ti(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function ei(t){return t.children}function ni(t){return t.value}function ri(t,e){return e.value-t.value}function ii(t){return eo.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ai(t){return t.x}function oi(t){return t.y}function si(t,e,n){t.y0=e,t.y=n}function ui(t){return eo.range(t.length)}function ci(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function li(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function fi(t){return t.reduce(di,0)}function di(t,e){return t+e[1]}function hi(t,e){return gi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function gi(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function pi(t){return[eo.min(t),eo.max(t)]}function xi(t,e){return t.value-e.value}function vi(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function yi(t,e){(t._pack_next=e)._pack_prev=t}function mi(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return n*n+r*r<.999*i*i}function _i(t){function e(t){l=Math.min(t.x-t.r,l),f=Math.max(t.x+t.r,f),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}if((n=t.children)&&(c=n.length)){var n,r,i,a,o,s,u,c,l=Infinity,f=-Infinity,d=Infinity,h=-Infinity;if(n.forEach(bi),(r=n[0]).x=-r.r,r.y=0,e(r),1<c&&((i=n[1]).x=i.r,i.y=0,e(i),2<c))for(Ai(r,i,a=n[2]),e(a),vi(r,a),vi(r._pack_prev=a,i),i=r._pack_next,o=3;o<c;o++){Ai(r,i,a=n[o]);var g=0,p=1,x=1;for(s=i._pack_next;s!==i;s=s._pack_next,p++)if(mi(s,a)){g=1;break}if(1==g)for(u=r._pack_prev;u!==s._pack_prev&&!mi(u,a);u=u._pack_prev,x++);g?(p<x||p==x&&i.r<r.r?yi(r,i=s):yi(r=u,i),o--):(vi(r,a),e(i=a))}var v=(l+f)/2,y=(d+h)/2,m=0;for(o=0;o<c;o++)(a=n[o]).x-=v,a.y-=y,m=Math.max(m,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=m,n.forEach(wi)}}function bi(t){t._pack_next=t._pack_prev=t}function wi(t){delete t._pack_next,delete t._pack_prev}function Ti(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)Ti(i[a],e,n,r)}function Ai(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a,u=.5+((r*=r)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+u*i+c*a,n.y=t.y+u*a-c*i}else n.x=t.x+r,n.y=t.y}function Mi(t,e){return t.parent==e.parent?1:2}function Si(t){var e=t.children;return e.length?e[0]:t.t}function Li(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function ki(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Ci(t){for(var e,n=0,r=0,i=t.children,a=i.length;0<=--a;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Ei(t,e,n){return t.a.parent===e.parent?t.a:n}function Di(t){return 1+eo.max(t,function(t){return t.y})}function Ii(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Xi(t){var e=t.children;return e&&e.length?Xi(e[0]):t}function Fi(t){var e,n=t.children;return n&&(e=n.length)?Fi(n[e-1]):t}function zi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ri(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Ni(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Yi(t){return t.rangeExtent?t.rangeExtent():Ni(t.range())}function Oi(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function Pi(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Bi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:xu}function Hi(n,t,e,r){var i=[],a=[],o=0,s=Math.min(n.length,t.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=s;)i.push(e(n[o-1],n[o])),a.push(r(t[o-1],t[o]));return function(t){var e=eo.bisect(n,t,1,s)-1;return a[e](i[e](t))}}function Vi(n,r,i,a){function e(){var t=2<Math.min(n.length,r.length)?Hi:Oi,e=a?Vr:Hr;return s=t(n,r,e,i),u=t(r,n,e,yr),o}function o(t){return s(t)}var s,u;return o.invert=function(t){return u(t)},o.domain=function(t){return arguments.length?(n=t.map(Number),e()):n},o.range=function(t){return arguments.length?(r=t,e()):r},o.rangeRound=function(t){return o.range(t).interpolate(Rr)},o.clamp=function(t){return arguments.length?(a=t,e()):a},o.interpolate=function(t){return arguments.length?(i=t,e()):i},o.ticks=function(t){return Wi(n,t)},o.tickFormat=function(t,e){return Gi(n,t,e)},o.nice=function(t){return ji(n,t),e()},o.copy=function(){return Vi(n,r,i,a)},e()}function qi(t,e){return eo.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ji(t,e){return Pi(t,Bi(Ui(t,e)[2]))}function Ui(t,e){null==e&&(e=10);var n=Ni(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Wi(t,e){return eo.range.apply(eo,Ui(t,e))}function Gi(t,e,n){var r=Ui(t,e);if(n){var i=is.exec(n);if(i.shift(),"s"===i[8]){var a=eo.formatPrefix(Math.max(fo(r[0]),fo(r[1])));return i[7]||(i[7]="."+Zi(a.scale(r[2]))),i[8]="f",n=eo.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+$i(i[8],r)),n=i.join("")}else n=",."+Zi(r[2])+"f";return eo.format(n)}function Zi(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function $i(t,e){var n=Zi(e[2]);return t in vu?Math.abs(n-Zi(Math.max(fo(e[0]),fo(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Ki(e,u,c,l){function f(t){return(c?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(u)}function d(t){return c?Math.pow(u,t):-Math.pow(u,-t)}function a(t){return e(f(t))}return a.invert=function(t){return d(e.invert(t))},a.domain=function(t){return arguments.length?(c=0<=t[0],e.domain((l=t.map(Number)).map(f)),a):l},a.base=function(t){return arguments.length?(u=+t,e.domain(l.map(f)),a):u},a.nice=function(){var t=Pi(l.map(f),c?Math:mu);return e.domain(t),l=t.map(d),a},a.ticks=function(){var t=Ni(l),e=[],n=t[0],r=t[1],i=Math.floor(f(n)),a=Math.ceil(f(r)),o=u%1?2:u;if(isFinite(a-i)){if(c){for(;i<a;i++)for(var s=1;s<o;s++)e.push(d(i)*s);e.push(d(i))}else for(e.push(d(i));i++<a;)for(s=o-1;0<s;s--)e.push(d(i)*s);for(i=0;e[i]<n;i++);for(a=e.length;e[a-1]>r;a--);e=e.slice(i,a)}return e},a.tickFormat=function(t,e){if(!arguments.length)return yu;arguments.length<2?e=yu:"function"!=typeof e&&(e=eo.format(e));var n,r=Math.max(.1,t/a.ticks().length),i=c?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/d(i(f(t)+n))<=r?e(t):""}},a.copy=function(){return Ki(e.copy(),u,c,l)},qi(a,e)}function Ji(e,n,r){function i(t){return e(a(t))}var a=Qi(n),o=Qi(1/n);return i.invert=function(t){return o(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(a)),i):r},i.ticks=function(t){return Wi(r,t)},i.tickFormat=function(t,e){return Gi(r,t,e)},i.nice=function(t){return i.domain(ji(r,t))},i.exponent=function(t){return arguments.length?(a=Qi(n=t),o=Qi(1/n),e.domain(r.map(a)),i):n},i.copy=function(){return Ji(e.copy(),n,r)},qi(i,e)}function Qi(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ta(s,u){function c(t){return f[((i.get(t)||("range"===u.t?i.set(t,s.push(t)):NaN))-1)%f.length]}function l(e,n){return eo.range(s.length).map(function(t){return e+n*t})}var i,f,d;return c.domain=function(t){if(!arguments.length)return s;s=[],i=new y;for(var e,n=-1,r=t.length;++n<r;)i.has(e=t[n])||i.set(e,s.push(e));return c[u.t].apply(c,u.a)},c.range=function(t){return arguments.length?(f=t,d=0,u={t:"range",a:arguments},c):f},c.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],r=t[1],i=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+e);return f=l(n+i*e/2,i),d=0,u={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],r=t[1],i=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+e)|0;return f=l(n+Math.round(i*e/2+(r-n-(s.length-1+e)*i)/2),i),d=0,u={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var r=t[1]<t[0],i=t[r-0],a=(t[1-r]-i)/(s.length-e+2*n);return f=l(i+a*n,a),r&&f.reverse(),d=a*(1-e),u={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var r=t[1]<t[0],i=t[r-0],a=t[1-r],o=Math.floor((a-i)/(s.length-e+2*n));return f=l(i+Math.round((a-i-(s.length-e)*o)/2),o),r&&f.reverse(),d=Math.round(o*(1-e)),u={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return d},c.rangeExtent=function(){return Ni(u.a[0])},c.copy=function(){return ta(s,u)},c.domain(s)}function ea(n,r){function e(){var t=0,e=r.length;for(a=[];++t<e;)a[t-1]=eo.quantile(n,t/e);return i}function i(t){if(!isNaN(t=+t))return r[eo.bisect(a,t)]}var a;return i.domain=function(t){return arguments.length?(n=t.map(c).filter(l).sort(o),e()):n},i.range=function(t){return arguments.length?(r=t,e()):r},i.quantiles=function(){return a},i.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[0<t?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},i.copy=function(){return ea(n,r)},e()}function na(e,n,r){function t(t){return r[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function i(){return a=r.length/(n-e),o=r.length-1,t}var a,o;return t.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],i()):[e,n]},t.range=function(t){return arguments.length?(r=t,i()):r},t.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/a+e,t+1/a]},t.copy=function(){return na(e,n,r)},i()}function ra(e,n){function r(t){if(t<=t)return n[eo.bisect(e,t)]}return r.domain=function(t){return arguments.length?(e=t,r):e},r.range=function(t){return arguments.length?(n=t,r):n},r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},r.copy=function(){return ra(e,n)},r}function ia(n){function e(t){return+t}return(e.invert=e).domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n},e.ticks=function(t){return Wi(n,t)},e.tickFormat=function(t,e){return Gi(n,t,e)},e.copy=function(){return ia(n)},e}function aa(){return 0}function oa(t){return t.innerRadius}function sa(t){return t.outerRadius}function ua(t){return t.startAngle}function ca(t){return t.endAngle}function la(t){return t&&t.padAngle}function fa(t,e,n,r){return 0<(t-n)*e-(e-r)*t?0:1}function da(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,c=-s*a,l=t[0]+u,f=t[1]+c,d=e[0]+u,h=e[1]+c,g=(l+d)/2,p=(f+h)/2,x=d-l,v=h-f,y=x*x+v*v,m=n-r,_=l*h-d*f,b=(v<0?-1:1)*Math.sqrt(m*m*y-_*_),w=(_*v-x*b)/y,T=(-_*x-v*b)/y,A=(_*v+x*b)/y,M=(-_*x+v*b)/y,S=w-g,L=T-p,k=A-g,C=M-p;return k*k+C*C<S*S+L*L&&(w=A,T=M),[[w-u,T-c],[w*n/m,T*n/m]]}function ha(c){function e(t){function e(){r.push("M",h(c(i),g))}for(var n,r=[],i=[],a=-1,o=t.length,s=St(l),u=St(f);++a<o;)d.call(this,n=t[a],a)?i.push([+s.call(this,n,a),+u.call(this,n,a)]):i.length&&(e(),i=[]);return i.length&&e(),r.length?r.join(""):null}var l=kn,f=Cn,d=ke,h=ga,n=h.key,g=.7;return e.x=function(t){return arguments.length?(l=t,e):l},e.y=function(t){return arguments.length?(f=t,e):f},e.defined=function(t){return arguments.length?(d=t,e):d},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?h=t:(h=Mu.get(t)||ga).key,e):n},e.tension=function(t){return arguments.length?(g=t,e):g},e}function ga(t){return t.join("L")}function pa(t){return ga(t)+"Z"}function xa(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return 1<n&&i.push("H",r[0]),i.join("")}function va(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function ya(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function ma(t,e){return t.length<4?ga(t):t[1]+wa(t.slice(1,-1),Ta(t,e))}function _a(t,e){return t.length<3?ga(t):t[0]+wa((t.push(t[0]),t),Ta([t[t.length-2]].concat(t,[t[1]]),e))}function ba(t,e){return t.length<3?ga(t):t[0]+wa(t,Ta(t,e))}function wa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return ga(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],u=2),1<e.length){s=e[1],a=t[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,u++)a=t[u],s=e[c],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var l=t[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+l[0]+","+l[1]}return r}function Ta(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Aa(t){if(t.length<3)return ga(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",ka(ku,o),",",ka(ku,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ca(u,o,s);return t.pop(),u.push("L",r),u.join("")}function Ma(t){if(t.length<4)return ga(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);for(n.push(ka(ku,a)+","+ka(ku,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Ca(n,a,o);return n.join("")}function Sa(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);for(e=[ka(ku,o),",",ka(ku,s)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ca(e,o,s);return e.join("")}function La(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,u=t[n][1]-o,c=-1;++c<=n;)i=c/n,(r=t[c])[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*u);return Aa(t)}function ka(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ca(t,e,n){t.push("C",ka(Su,e),",",ka(Su,n),",",ka(Lu,e),",",ka(Lu,n),",",ka(ku,e),",",ka(ku,n))}function Ea(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Da(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=Ea(i,a);++e<n;)r[e]=(o+(o=Ea(i=a,a=t[e+1])))/2;return r[e]=o,r}function Ia(t){for(var e,n,r,i,a=[],o=Da(t),s=-1,u=t.length-1;++s<u;)e=Ea(t[s],t[s+1]),fo(e)<ko?o[s]=o[s+1]=0:9<(i=(n=o[s]/e)*n+(r=o[s+1]/e)*r)&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r);for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function Xa(t){return t.length<3?ga(t):t[0]+wa(t,Ia(t))}function Fa(t){for(var e,n,r,i=-1,a=t.length;++i<a;)n=(e=t[i])[0],r=e[1]-Xo,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function za(g){function e(t){function e(){a.push("M",_(g(s),T),w,b(g(o.reverse()),T),"Z")}for(var n,r,i,a=[],o=[],s=[],u=-1,c=t.length,l=St(p),f=St(v),d=p===x?function(){return r}:St(x),h=v===y?function(){return i}:St(y);++u<c;)m.call(this,n=t[u],u)?(o.push([r=+l.call(this,n,u),i=+f.call(this,n,u)]),s.push([+d.call(this,n,u),+h.call(this,n,u)])):o.length&&(e(),o=[],s=[]);return o.length&&e(),a.length?a.join(""):null}var p=kn,x=kn,v=0,y=Cn,m=ke,_=ga,n=_.key,b=_,w="L",T=.7;return e.x=function(t){return arguments.length?(p=x=t,e):x},e.x0=function(t){return arguments.length?(p=t,e):p},e.x1=function(t){return arguments.length?(x=t,e):x},e.y=function(t){return arguments.length?(v=y=t,e):y},e.y0=function(t){return arguments.length?(v=t,e):v},e.y1=function(t){return arguments.length?(y=t,e):y},e.defined=function(t){return arguments.length?(m=t,e):m},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?_=t:(_=Mu.get(t)||ga).key,b=_.reverse||_,w=_.closed?"M":"L",e):n},e.tension=function(t){return arguments.length?(T=t,e):T},e}function Ra(t){return t.radius}function Na(t){return[t.x,t.y]}function Ya(r){return function(){var t=r.apply(this,arguments),e=t[0],n=t[1]-Xo;return[e*Math.cos(n),e*Math.sin(n)]}}function Oa(){return 64}function Pa(){return"circle"}function Ba(t){var e=Math.sqrt(t/Eo);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Ha(n){return function(){var t,e;(t=this[n])&&(e=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Va(t,e,n){return vo(t,zu),t.namespace=e,t.id=n,t}function qa(t,r,i,a){var o=t.id,s=t.namespace;return V(t,"function"==typeof i?function(t,e,n){t[s][o].tween.set(r,a(i.call(t,t.__data__,e,n)))}:(i=a(i),function(t){t[s][o].tween.set(r,i)}))}function ja(t){return null==t&&(t=""),function(){this.textContent=t}}function Ua(t){return null==t?"__transition__":"__transition_"+t+"__"}function Wa(c,l,f,d,t){var h=c[f]||(c[f]={active:0,count:0}),g=h[d];if(!g){var p=t.time;g=h[d]={tween:new y,time:p,delay:t.delay,duration:t.duration,ease:t.ease,index:l},t=null,++h.count,eo.timer(function(t){function e(t){if(
h.active>d)return i();var e=h[h.active];e&&(--h.count,delete h[h.active],e.event&&e.event.interrupt.call(c,c.__data__,e.index)),h.active=d,g.event&&g.event.start.call(c,c.__data__,l),g.tween.forEach(function(t,e){(e=e.call(c,c.__data__,l))&&u.push(e)}),o=g.ease,a=g.duration,eo.timer(function(){return s.c=n(t||1)?ke:n,1},0,p)}function n(t){if(h.active!==d)return 1;for(var e=t/a,n=o(e),r=u.length;0<r;)u[--r].call(c,n);return 1<=e?(g.event&&g.event.end.call(c,c.__data__,l),i()):void 0}function i(){return--h.count?delete h[d]:delete c[f],1}var a,o,r=g.delay,s=es,u=[];if(s.t=r+p,r<=t)return e(t-r);s.c=e},0,p)}}function Ga(t,n,r){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:r(t))+",0)"})}function Za(t,n,r){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:r(t))+")"})}function $a(t){return t.toISOString()}function Ka(e,i,t){function o(t){return e(t)}function s(t,e){var n=(t[1]-t[0])/e,r=eo.bisect(qu,n);return r==qu.length?[i.year,Ui(t.map(function(t){return t/31536e6}),e)[2]]:r?i[n/qu[r-1]<qu[r]/n?r-1:r]:[Wu,Ui(t,e)[2]]}return o.invert=function(t){return Ja(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain().map(Ja)},o.nice=function(e,n){function r(t){return!isNaN(t)&&!e.range(t,Ja(+t+1),n).length}var t=o.domain(),i=Ni(t),a=null==e?s(i,10):"number"==typeof e&&s(i,e);return a&&(e=a[0],n=a[1]),o.domain(Pi(t,1<n?{floor:function(t){for(;r(t=e.floor(t));)t=Ja(t-1);return t},ceil:function(t){for(;r(t=e.ceil(t));)t=Ja(+t+1);return t}}:e))},o.ticks=function(t,e){var n=Ni(o.domain()),r=null==t?s(n,10):"number"==typeof t?s(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],Ja(+n[1]+1),e<1?1:e)},o.tickFormat=function(){return t},o.copy=function(){return Ka(e.copy(),i,t)},qi(o,e)}function Ja(t){return new Date(t)}function Qa(t){return JSON.parse(t.responseText)}function to(t){var e=io.createRange();return e.selectNode(io.body),e.createContextualFragment(t.responseText)}var eo={version:"3.5.6"},no=[].slice,ro=function(t){return no.call(t)},io=this.document;if(io)try{ro(io.documentElement.childNodes)[0].nodeType}catch($u){ro=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),io)try{io.createElement("DIV").style.setProperty("opacity",0,"")}catch(Ku){var ao=this.Element.prototype,oo=ao.setAttribute,so=ao.setAttributeNS,uo=this.CSSStyleDeclaration.prototype,co=uo.setProperty;ao.setAttribute=function(t,e){oo.call(this,t,e+"")},ao.setAttributeNS=function(t,e,n){so.call(this,t,e,n+"")},uo.setProperty=function(t,e,n){co.call(this,t,e+"",n)}}eo.ascending=o,eo.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},eo.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r<=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r<n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r<=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r<n&&(n=r)}return n},eo.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r<=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n<r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r<=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n<r&&(n=r)}return n},eo.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r<=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(r<n&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r<=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(r<n&&(n=r),i<r&&(i=r))}return[n,i]},eo.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)l(n=+t[a])&&(r+=n);else for(;++a<i;)l(n=+e.call(t,t[a],a))&&(r+=n);return r},eo.mean=function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)l(n=c(t[a]))?r+=n:--o;else for(;++a<i;)l(n=c(e.call(t,t[a],a)))?r+=n:--o;if(o)return r/o},eo.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},eo.median=function(t,e){var n,r=[],i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)l(n=c(t[a]))&&r.push(n);else for(;++a<i;)l(n=c(e.call(t,t[a],a)))&&r.push(n);if(r.length)return eo.quantile(r.sort(o),.5)},eo.variance=function(t,e){var n,r,i=t.length,a=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)l(n=c(t[s]))&&(o+=(r=n-a)*(n-(a+=r/++u)));else for(;++s<i;)l(n=c(e.call(t,t[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++u)));if(1<u)return o/(u-1)},eo.deviation=function(){var t=eo.variance.apply(this,arguments);return t?Math.sqrt(t):t};var lo=t(o);eo.bisectLeft=lo.left,eo.bisect=eo.bisectRight=lo.right,eo.bisector=function(n){return t(1===n.length?function(t,e){return o(n(t),e)}:n)},eo.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},eo.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},eo.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},eo.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=eo.min(arguments,u),n=new Array(e);++t<e;)for(var r,i=-1,a=n[t]=new Array(r);++i<r;)a[i]=arguments[i][t];return n},eo.transpose=function(t){return eo.zip.apply(eo,t)},eo.keys=function(t){var e=[];for(var n in t)e.push(n);return e},eo.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},eo.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},eo.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--o]=r[e];return n};var fo=Math.abs;eo.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===Infinity)throw new Error("infinite range");var r,i=[],a=f(fo(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},eo.map=function(t,e){var n=new y;if(t instanceof y)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var ho="__proto__",go="\0";e(y,{has:i,get:function(t){return this._[n(t)]},set:function(t,e){return this._[n(t)]=e},remove:a,keys:d,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:r(e),value:this._[e]});return t},size:h,empty:g,forEach:function(t){for(var e in this._)t.call(this,r(e),this._[e])}}),eo.nest=function(){function f(n,t,r){if(r>=p.length)return h?h.call(g,t):d?t.sort(d):t;for(var e,i,a,o,s=-1,u=t.length,c=p[r++],l=new y;++s<u;)(o=l.get(e=c(i=t[s])))?o.push(i):l.set(e,[i]);return a=n?(i=n(),function(t,e){i.set(t,f(n,e,r))}):(i={},function(t,e){i[t]=f(n,e,r)}),l.forEach(a),i}function a(t,n){if(n>=p.length)return t;var r=[],i=e[n++];return t.forEach(function(t,e){r.push({key:t,values:a(e,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var d,h,g={},p=[],e=[];return g.map=function(t,e){return f(e,t,0)},g.entries=function(t){return a(f(eo.map,t,0),0)},g.key=function(t){return p.push(t),g},g.sortKeys=function(t){return e[p.length-1]=t,g},g.sortValues=function(t){return d=t,g},g.rollup=function(t){return h=t,g},g},eo.set=function(t){var e=new p;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},e(p,{has:i,add:function(t){return this._[n(t+="")]=!0,t},remove:a,values:d,size:h,empty:g,forEach:function(t){for(var e in this._)t.call(this,r(e))}}),eo.behavior={},eo.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=x(t,e,e[n]);return t};var po=["webkit","ms","moz","Moz","o","O"];eo.dispatch=function(){for(var t=new m,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=b(t);return t},m.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(0<=n&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},eo.event=null,eo.requote=function(t){return t.replace(xo,"\\$&")};var xo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,vo={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},yo=function(t,e){return e.querySelector(t)},mo=function(t,e){return e.querySelectorAll(t)},_o=function(t,e){var n=t.matches||t[v(t,"matchesSelector")];return(_o=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(yo=function(t,e){return Sizzle(t,e)[0]||null},mo=Sizzle,_o=Sizzle.matchesSelector),eo.selection=function(){return eo.select(io.documentElement)};var bo=eo.selection.prototype=[];bo.select=function(t){var e,n,r,i,a=[];t=A(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var u=-1,c=r.length;++u<c;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return T(a)},bo.selectAll=function(t){var e,n,r=[];t=M(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,u=o.length;++s<u;)(n=o[s])&&(r.push(e=ro(t.call(n,n.__data__,s,i))),e.parentNode=n);return T(r)};var wo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};eo.ns={prefix:wo,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&(n=t.slice(0,e),t=t.slice(e+1)),wo.hasOwnProperty(n)?{space:wo[n],local:t}:t}},bo.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=eo.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(S(e,t[e]));return this}return this.each(S(t,e))},bo.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=C(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!k(t[i]).test(e))return!1;return!0}for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},bo.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(I(n,t[n],e));return this}if(r<2){var i=this.node();return F(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(I(t,e,n))},bo.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(X(e,t[e]));return this}return this.each(X(t,e))},bo.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},bo.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},bo.append=function(t){return t=Y(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},bo.insert=function(t,e){return t=Y(t),e=A(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},bo.remove=function(){return this.each(O)},bo.data=function(t,g){function e(t,e){var n,r,i,a=t.length,o=e.length,s=Math.min(a,o),u=new Array(o),c=new Array(o),l=new Array(a);if(g){var f,d=new y,h=new Array(a);for(n=-1;++n<a;)d.has(f=g.call(r=t[n],r.__data__,n))?l[n]=r:d.set(f,r),h[n]=f;for(n=-1;++n<o;)(r=d.get(f=g.call(e,i=e[n],n)))?!0!==r&&((u[n]=r).__data__=i):c[n]=P(i),d.set(f,!0);for(n=-1;++n<a;)!0!==d.get(h[n])&&(l[n]=t[n])}else{for(n=-1;++n<s;)r=t[n],i=e[n],r?(r.__data__=i,u[n]=r):c[n]=P(i);for(;n<o;++n)c[n]=P(e[n]);for(;n<a;++n)l[n]=t[n]}c.update=u,c.parentNode=u.parentNode=l.parentNode=t.parentNode,p.push(c),x.push(u),v.push(l)}var n,r,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(t[i]=r.__data__);return t}var p=q([]),x=T([]),v=T([]);if("function"==typeof t)for(;++i<a;)e(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<a;)e(n=this[i],t);return x.enter=function(){return p},x.exit=function(){return v},x},bo.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},bo.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=B(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return T(i)},bo.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];0<=--i;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},bo.sort=function(t){t=H.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},bo.each=function(r){return V(this,function(t,e,n){r.call(t,t.__data__,e,n)})},bo.call=function(t){var e=ro(arguments);return t.apply(e[0]=this,e),this},bo.empty=function(){return!this.node()},bo.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},bo.size=function(){var t=0;return V(this,function(){++t}),t};var To=[];eo.selection.enter=q,(eo.selection.enter.prototype=To).append=bo.append,To.empty=bo.empty,To.node=bo.node,To.call=bo.call,To.size=bo.size,To.select=function(t){for(var e,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(a=i[c])?(e.push(r[c]=n=t.call(i.parentNode,a.__data__,c,s)),n.__data__=a.__data__):e.push(null)}return T(o)},To.insert=function(t,e){return arguments.length<2&&(e=j(this)),bo.insert.call(this,t,e)},eo.select=function(t){var e;return"string"==typeof t?(e=[yo(t,io)]).parentNode=io.documentElement:(e=[t]).parentNode=s(t),T([e])},eo.selectAll=function(t){var e;return"string"==typeof t?(e=ro(mo(t,io))).parentNode=io.documentElement:(e=t).parentNode=null,T([e])},bo.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(U(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(U(t,e,n))};var Ao=eo.map({mouseenter:"mouseover",mouseleave:"mouseout"});io&&Ao.forEach(function(t){"on"+t in io&&Ao.remove(t)});var Mo,So=0;eo.mouse=function(t){return $(t,w())};var Lo=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;eo.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=w().changedTouches),e)for(var r,i=0,a=e.length;i<a;++i)if((r=e[i]).identifier===n)return $(t,r)},eo.behavior.drag=function(){function e(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function t(h,g,p,x,v){return function(){function t(){var t,e,n=g(a,u);n&&(t=n[0]-d[0],e=n[1]-d[1],s|=t|e,o({type:"drag",x:(d=n)[0]+r[0],y:n[1]+r[1],dx:t,dy:e}))}function e(){g(a,u)&&(l.on(x+c,null).on(v+c,null),f(s&&eo.event.target===i),o({type:"dragend"}))}var r,n=this,i=eo.event.target,a=n.parentNode,o=y.of(n,arguments),s=0,u=h(),c=".drag"+(null==u?"":"-"+u),l=eo.select(p(i)).on(x+c,t).on(v+c,e),f=Z(i),d=g(a,u);r=m?[(r=m.apply(n,arguments)).x-d[0],r.y-d[1]]:[0,0],o({type:"dragstart"})}}var y=N(e,"drag","dragstart","dragend"),m=null,n=t(_,eo.mouse,F,"mousemove","mouseup"),r=t(K,eo.touch,z,"touchmove","touchend");return e.origin=function(t){return arguments.length?(m=t,e):m},eo.rebind(e,y,"on")},eo.touches=function(n,t){return arguments.length<2&&(t=w().touches),t?ro(t).map(function(t){var e=$(n,t);return e.identifier=t.identifier,e}):[]};var ko=1e-6,Co=ko*ko,Eo=Math.PI,Do=2*Eo,Io=Do-ko,Xo=Eo/2,Fo=Eo/180,zo=180/Eo,Ro=Math.SQRT2,No=2,Yo=4;eo.interpolateZoom=function(t,e){function n(t){var e=t*v;if(x){var n=rt(p),r=o/(No*d)*(n*it(Ro*e+p)-nt(p));return[i+r*c,a+r*l,o*n/rt(Ro*e+p)]}return[i+t*c,a+t*l,o*Math.exp(Ro*e)]}var i=t[0],a=t[1],o=t[2],r=e[0],s=e[1],u=e[2],c=r-i,l=s-a,f=c*c+l*l,d=Math.sqrt(f),h=(u*u-o*o+Yo*f)/(2*o*No*d),g=(u*u-o*o-Yo*f)/(2*u*No*d),p=Math.log(Math.sqrt(h*h+1)-h),x=Math.log(Math.sqrt(g*g+1)-g)-p,v=(x||Math.log(u/o))/Ro;return n.duration=1e3*v,n},eo.behavior.zoom=function(){function i(t){t.on(C,s).on(Po+".zoom",r).on("dblclick.zoom",a).on(I,u)}function _(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function n(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function b(t){k.k=Math.max(v[0],Math.min(v[1],t))}function w(t,e){e=n(e),k.x+=t[0]-e[0],k.y+=t[1]-e[1]}function T(t,e,n,r){t.__chart__={x:k.x,y:k.y,k:k.k},b(Math.pow(2,r)),w(c=e,n),t=eo.select(t),0<y&&(t=t.transition().duration(y)),t.call(i.event)}function e(){h&&h.domain(d.range().map(function(t){return(t-k.x)/k.k}).map(d.invert)),p&&p.domain(g.range().map(function(t){return(t-k.y)/k.k}).map(g.invert))}function A(t){m++||t({type:"zoomstart"})}function M(t){e(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function S(t){--m||(t({type:"zoomend"}),c=null)}function s(){function t(){a=1,w(eo.mouse(n),s),M(i)}function e(){o.on(E,null).on(D,null),u(a&&eo.event.target===r),S(i)}var n=this,r=eo.event.target,i=X.of(n,arguments),a=0,o=eo.select(F(n)).on(E,t).on(D,e),s=_(eo.mouse(n)),u=Z(n);Fu.call(n),A(i)}function u(){function l(){var t=eo.touches(h);return c=k.k,t.forEach(function(t){t.identifier in p&&(p[t.identifier]=_(t))}),t}function t(){var t=eo.event.target;eo.select(t).on(v,f).on(y,d),m.push(t);for(var e=eo.event.changedTouches,n=0,r=e.length;n<r;++n)p[e[n].identifier]=null;var i=l(),a=Date.now();if(1===i.length){if(a-L<500){var o=i[0];T(h,o,p[o.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),R()}L=a}else if(1<i.length){o=i[0];var s=i[1],u=o[0]-s[0],c=o[1]-s[1];x=u*u+c*c}}function f(){var t,e,n,r,i=eo.touches(h);Fu.call(h);for(var a=0,o=i.length;a<o;++a,r=null)if(n=i[a],r=p[n.identifier]){if(e)break;t=n,e=r}if(r){var s=(s=n[0]-t[0])*s+(s=n[1]-t[1])*s,u=x&&Math.sqrt(s/x);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],b(u*c)}L=null,w(t,e),M(g)}function d(){if(eo.event.touches.length){for(var t=eo.event.changedTouches,e=0,n=t.length;e<n;++e)delete p[t[e].identifier];for(var r in p)return void l()}eo.selectAll(m).on(i,null),a.on(C,s).on(I,u),o(),S(g)}var c,h=this,g=X.of(h,arguments),p={},x=0,i=".zoom-"+eo.event.changedTouches[0].identifier,v="touchmove"+i,y="touchend"+i,m=[],a=eo.select(h),o=Z(h);t(),A(g),a.on(C,null).on(I,t)}function r(){var t=X.of(this,arguments);f?clearTimeout(f):(Fu.call(this),o=_(c=l||eo.mouse(this)),A(t)),f=setTimeout(function(){f=null,S(t)},50),R(),b(Math.pow(2,.002*Oo())*k.k),w(c,o),M(t)}function a(){var t=eo.mouse(this),e=Math.log(k.k)/Math.LN2;T(this,t,_(t),eo.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var o,c,l,f,L,d,h,g,p,k={x:0,y:0,k:1},x=[960,500],v=Bo,y=250,m=0,C="mousedown.zoom",E="mousemove.zoom",D="mouseup.zoom",I="touchstart.zoom",X=N(i,"zoomstart","zoom","zoomend");return Po||(Po="onwheel"in io?(Oo=function(){return-eo.event.deltaY*(eo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in io?(Oo=function(){return eo.event.wheelDelta},"mousewheel"):(Oo=function(){return-eo.event.detail},"MozMousePixelScroll")),i.event=function(t){t.each(function(){var s=X.of(this,arguments),e=k;Iu?eo.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},A(s)}).tween("zoom:zoom",function(){var r=x[0],t=x[1],i=c?c[0]:r/2,a=c?c[1]:t/2,o=eo.interpolateZoom([(i-k.x)/k.k,(a-k.y)/k.k,r/k.k],[(i-e.x)/e.k,(a-e.y)/e.k,r/e.k]);return function(t){var e=o(t),n=r/e[2];this.__chart__=k={x:i-e[0]*n,y:a-e[1]*n,k:n},M(s)}}).each("interrupt.zoom",function(){S(s)}).each("end.zoom",function(){S(s)}):(this.__chart__=k,A(s),M(s),S(s))})},i.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},e(),i):[k.x,k.y]},i.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:+t},e(),i):k.k},i.scaleExtent=function(t){return arguments.length?(v=null==t?Bo:[+t[0],+t[1]],i):v},i.center=function(t){return arguments.length?(l=t&&[+t[0],+t[1]],i):l},i.size=function(t){return arguments.length?(x=t&&[+t[0],+t[1]],i):x},i.duration=function(t){return arguments.length?(y=+t,i):y},i.x=function(t){return arguments.length?(d=(h=t).copy(),k={x:0,y:0,k:1},i):h},i.y=function(t){return arguments.length?(g=(p=t).copy(),k={x:0,y:0,k:1},i):p},eo.rebind(i,X,"on")};var Oo,Po,Bo=[0,Infinity];(eo.color=ot).prototype.toString=function(){return this.rgb()+""};var Ho=(eo.hsl=st).prototype=new ot;Ho.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},Ho.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},Ho.rgb=function(){return ut(this.h,this.s,this.l)};var Vo=(eo.hcl=ct).prototype=new ot;Vo.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+qo*(arguments.length?t:1)))},Vo.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-qo*(arguments.length?t:1)))},Vo.rgb=function(){return lt(this.h,this.c,this.l).rgb()},eo.lab=ft;var qo=18,jo=.95047,Uo=1,Wo=1.08883,Go=ft.prototype=new ot;Go.brighter=function(t){return new ft(Math.min(100,this.l+qo*(arguments.length?t:1)),this.a,this.b)},Go.darker=function(t){return new ft(Math.max(0,this.l-qo*(arguments.length?t:1)),this.a,this.b)},Go.rgb=function(){return dt(this.l,this.a,this.b)};var Zo=(eo.rgb=vt).prototype=new ot;Zo.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new vt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new vt(i,i,i)},Zo.darker=function(t){return new vt((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},Zo.hsl=function(){return wt(this.r,this.g,this.b)},Zo.toString=function(){return"#"+_t(this.r)+_t(this.g)+_t(this.b)};var $o=eo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$o.forEach(function(t,e){$o.set(t,yt(e))}),eo.functor=St,eo.xhr=Lt(z),eo.dsv=function(i,a){function o(t,e,n){arguments.length<3&&(n=e,e=null);var r=kt(t,a,null==e?s:u(e),n);return r.row=function(t){return arguments.length?r.response(null==(e=t)?s:u(t)):e},r}function s(t){return o.parse(t.responseText)}function u(e){return function(t){return o.parse(t.responseText,e)}}function e(t){return t.map(c).join(i)}function c(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var n=new RegExp('["'+i+"\n]"),d=i.charCodeAt(0);return o.parse=function(t,r){var i;return o.parseRows(t,function(t,e){if(i)return i(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=r?function(t,e){return r(n(t),e)}:n})},o.parseRows=function(i,t){function e(){if(u<=c)return s;if(a)return a=!1,o;var t=c;if(34===i.charCodeAt(t)){for(var e=t;e++<u;)if(34===i.charCodeAt(e)){if(34!==i.charCodeAt(e+1))break;++e}return c=e+2,13===(n=i.charCodeAt(e+1))?(a=!0,10===i.charCodeAt(e+2)&&++c):10===n&&(a=!0),i.slice(t+1,e).replace(/""/g,'"')}for(;c<u;){var n,r=1;if(10===(n=i.charCodeAt(c++)))a=!0;else if(13===n)a=!0,10===i.charCodeAt(c)&&(++c,++r);else if(n!==d)continue;return i.slice(t,c-r)}return i.slice(t)}for(var n,a,o={},s={},r=[],u=i.length,c=0,l=0;(n=e())!==s;){for(var f=[];n!==o&&n!==s;)f.push(n),n=e();t&&null==(f=t(f,l++))||r.push(f)}return r},o.format=function(t){if(Array.isArray(t[0]))return o.formatRows(t);var n=new p,r=[];return t.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(c).join(i)].concat(t.map(function(e){return r.map(function(t){return c(e[t])}).join(i)})).join("\n")},o.formatRows=function(t){return t.map(e).join("\n")},o},eo.csv=eo.dsv(",","text/csv"),eo.tsv=eo.dsv("\t","text/tab-separated-values");var Ko,Jo,Qo,ts,es,ns=this[v(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};eo.timer=function(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,f:!1,n:null};Jo?Jo.n=i:Ko=i,Jo=i,Qo||(ts=clearTimeout(ts),Qo=1,ns(Dt))},eo.timer.flush=function(){It(),Xt()},eo.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var rs=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(zt);eo.formatPrefix=function(t,e){var n=0;return t&&(t<0&&(t*=-1),e&&(t=eo.round(t,Ft(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),rs[8+n/3]};var is=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,as=eo.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=eo.round(t,Ft(t,e))).toFixed(Math.max(0,Math.min(20,Ft(t*(1+1e-15),e))))}}),os=eo.time={},ss=Date;Yt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){us.setUTCDate.apply(this._,arguments)},setDay:function(){us.setUTCDay.apply(this._,arguments)},setFullYear:function(){us.setUTCFullYear.apply(this._,arguments)},setHours:function(){us.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){us.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){us.setUTCMinutes.apply(this._,arguments)},setMonth:function(){us.setUTCMonth.apply(this._,arguments)},setSeconds:function(){us.setUTCSeconds.apply(this._,arguments)},setTime:function(){us.setTime.apply(this._,arguments)}};var us=Date.prototype;os.year=Ot(function(t){return(t=os.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),os.years=os.year.range,os.years.utc=os.year.utc.range,os.day=Ot(function(t){var e=new ss(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),os.days=os.day.range,os.days.utc=os.day.utc.range,os.dayOfYear=function(t){var e=os.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=os[t]=Ot(function(t){return(t=os.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=os.year(t).getDay();return Math.floor((os.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});os[t+"s"]=e.range,os[t+"s"].utc=e.utc.range,os[t+"OfYear"]=function(t){var e=os.year(t).getDay();return Math.floor((os.dayOfYear(t)+(e+n)%7)/7)}}),os.week=os.sunday,os.weeks=os.sunday.range,os.weeks.utc=os.sunday.utc.range,os.weekOfYear=os.sundayOfYear;var cs={"-":"",_:" ",0:"0"},ls=/^\s*\d+/,fs=/^%/;eo.locale=function(t){return{numberFormat:Rt(t),timeFormat:Bt(t)}};var ds=eo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});eo.format=ds.numberFormat,eo.geo={},ue.prototype={s:0,t:0,add:function(t){ce(t,this.t,hs),ce(hs.s,this.s,this),this.s?this.t+=hs.t:this.s=hs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var hs=new ue;eo.geo.stream=function(t,e){t&&gs.hasOwnProperty(t.type)?gs[t.type](t,e):le(t,e)};var gs={Feature:function(t,e){le(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)le(n[r].geometry,e)}},ps={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)fe(n[r],e,0)},Polygon:function(t,e){de(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)de(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)le(n[r],e)}};eo.geo.area=function(t){return xs=0,eo.geo.stream(t,Cs),xs};var xs,vs,ys,ms,_s,bs,ws,Ts,As,Ms,Ss,Ls,ks=new ue,Cs={sphere:function(){xs+=4*Eo},point:_,lineStart:_,lineEnd:_,polygonStart:function(){ks.reset(),Cs.lineStart=he},polygonEnd:function(){var t=2*ks;xs+=t<0?4*Eo+t:t,Cs.lineStart=Cs.lineEnd=Cs.point=_}};eo.geo.bounds=function(){function l(t,e){m.push(_=[d=t,g=t]),e<h&&(h=e),p<e&&(p=e)}function r(t,e){var n=ge([t*Fo,e*Fo]);if(v){var r=xe(v,n),i=xe([r[1],-r[0],0],r);me(i),i=_e(i);var a=t-x,o=0<a?1:-1,s=i[0]*zo*o,u=180<fo(a);if(u^(o*x<s&&s<o*t)){var c=i[1]*zo;p<c&&(p=c)}else if(u^(o*x<(s=(s+360)%360-180)&&s<o*t)){(c=-i[1]*zo)<h&&(h=c)}else e<h&&(h=e),p<e&&(p=e);u?t<x?f(d,t)>f(d,g)&&(g=t):f(t,g)>f(d,g)&&(d=t):d<=g?(t<d&&(d=t),g<t&&(g=t)):x<t?f(d,t)>f(d,g)&&(g=t):f(t,g)>f(d,g)&&(d=t)}else l(t,e);v=n,x=t}function t(){b.point=r}function e(){_[0]=d,_[1]=g,b.point=l,v=null}function n(t,e){if(v){var n=t-x;y+=180<fo(n)?n+(0<n?360:-360):n}else o=t,s=e;Cs.point(t,e),r(t,e)}function i(){Cs.lineStart()}function a(){n(o,s),Cs.lineEnd(),fo(y)>ko&&(d=-(g=180)),_[0]=d,_[1]=g,v=null}function f(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function c(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var d,h,g,p,x,o,s,v,y,m,_,b={point:l,lineStart:t,lineEnd:e,polygonStart:function(){b.point=n,b.lineStart=i,b.lineEnd=a,y=0,Cs.polygonStart()},polygonEnd:function(){Cs.polygonEnd(),b.point=l,b.lineStart=t,b.lineEnd=e,ks<0?(d=-(g=180),h=-(p=90)
):ko<y?p=90:y<-ko&&(h=-90),_[0]=d,_[1]=g}};return function(t){if(p=g=-(d=h=Infinity),m=[],eo.geo.stream(t,b),i=m.length){m.sort(u);for(var e=1,n=[s=m[0]];e<i;++e)c((a=m[e])[0],s)||c(a[1],s)?(f(s[0],a[1])>f(s[0],s[1])&&(s[1]=a[1]),f(a[0],s[1])>f(s[0],s[1])&&(s[0]=a[0])):n.push(s=a);for(var r,i,a,o=-Infinity,s=(e=0,n[i=n.length-1]);e<=i;s=a,++e)a=n[e],(r=f(s[1],a[0]))>o&&(o=r,d=a[0],g=s[1])}return m=_=null,d===Infinity||h===Infinity?[[NaN,NaN],[NaN,NaN]]:[[d,h],[g,p]]}}(),eo.geo.centroid=function(t){vs=ys=ms=_s=bs=ws=Ts=As=Ms=Ss=Ls=0,eo.geo.stream(t,Es);var e=Ms,n=Ss,r=Ls,i=e*e+n*n+r*r;return i<Co&&(e=ws,n=Ts,r=As,ys<ko&&(e=ms,n=_s,r=bs),(i=e*e+n*n+r*r)<Co)?[NaN,NaN]:[Math.atan2(n,e)*zo,et(r/Math.sqrt(i))*zo]};var Es={sphere:_,point:we,lineStart:Ae,lineEnd:Me,polygonStart:function(){Es.lineStart=Se},polygonEnd:function(){Es.lineStart=Ae}},Ds=Ie(ke,Re,Ye,[-Eo,-Eo/2]),Is=1e9;eo.geo.clipExtent=function(){var e,n,r,i,a,o,s={stream:function(t){return a&&(a.valid=!1),(a=o(t)).valid=!0,a},extent:function(t){return arguments.length?(o=He(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),a&&(a.valid=!1,a=null),s):[[e,n],[r,i]]}};return s.extent([[0,0],[960,500]])},(eo.geo.conicEqualArea=function(){return Ve(qe)}).raw=qe,eo.geo.albers=function(){return eo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},eo.geo.albersUsa=function(){function i(t){var e=t[0],n=t[1];return r=null,a(e,n),r||(o(e,n),r)||s(e,n),r}var r,a,o,s,u=eo.geo.albers(),c=eo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=eo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,e){r=[t,e]}};return i.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(.12<=i&&i<.234&&-.425<=r&&r<-.214?c:.166<=i&&i<.234&&-.214<=r&&r<-.115?l:u).invert(t)},i.stream=function(t){var n=u.stream(t),r=c.stream(t),i=l.stream(t);return{point:function(t,e){n.point(t,e),r.point(t,e),i.point(t,e)},sphere:function(){n.sphere(),r.sphere(),i.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),i.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),i.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),i.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),i.polygonEnd()}}},i.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),l.precision(t),i):u.precision()},i.scale=function(t){return arguments.length?(u.scale(t),c.scale(.35*t),l.scale(t),i.translate(u.translate())):u.scale()},i.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),n=+t[0],r=+t[1];return a=u.translate(t).clipExtent([[n-.455*e,r-.238*e],[n+.455*e,r+.238*e]]).stream(f).point,o=c.translate([n-.307*e,r+.201*e]).clipExtent([[n-.425*e+ko,r+.12*e+ko],[n-.214*e-ko,r+.234*e-ko]]).stream(f).point,s=l.translate([n-.205*e,r+.212*e]).clipExtent([[n-.214*e+ko,r+.166*e+ko],[n-.115*e-ko,r+.234*e-ko]]).stream(f).point,i},i.scale(1070)};var Xs,Fs,zs,Rs,Ns,Ys,Os,Ps={point:_,lineStart:_,lineEnd:_,polygonStart:function(){Fs=0,Ps.lineStart=je},polygonEnd:function(){Ps.lineStart=Ps.lineEnd=Ps.point=_,Xs+=fo(Fs/2)}},Bs={point:Ue,lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},Hs={point:Ze,lineStart:$e,lineEnd:Ke,polygonStart:function(){Hs.lineStart=Je},polygonEnd:function(){Hs.point=Ze,Hs.lineStart=$e,Hs.lineEnd=Ke}};eo.geo.path=function(){function e(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),s&&s.valid||(s=a(o)),eo.geo.stream(t,s)),o.result()}function n(){return s=null,e}var r,i,a,o,s,u=4.5;return e.area=function(t){return Xs=0,eo.geo.stream(t,a(Ps)),Xs},e.centroid=function(t){return ms=_s=bs=ws=Ts=As=Ms=Ss=Ls=0,eo.geo.stream(t,a(Hs)),Ls?[Ms/Ls,Ss/Ls]:As?[ws/As,Ts/As]:bs?[ms/bs,_s/bs]:[NaN,NaN]},e.bounds=function(t){return Ns=Ys=-(zs=Rs=Infinity),eo.geo.stream(t,a(Bs)),[[zs,Rs],[Ns,Ys]]},e.projection=function(t){return arguments.length?(a=(r=t)?t.stream||en(t):z,n()):r},e.context=function(t){return arguments.length?(o=null==(i=t)?new We:new Qe(t),"function"!=typeof u&&o.pointRadius(u),n()):i},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(o.pointRadius(+t),+t),e):u},e.projection(eo.geo.albersUsa()).context(null)},eo.geo.transform=function(r){return{stream:function(t){var e=new nn(t);for(var n in r)e[n]=r[n];return e}}},nn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},eo.geo.projection=an,eo.geo.projectionMutator=on,(eo.geo.equirectangular=function(){return an(un)}).raw=un.invert=un,eo.geo.rotation=function(e){function t(t){return(t=e(t[0]*Fo,t[1]*Fo))[0]*=zo,t[1]*=zo,t}return e=ln(e[0]%360*Fo,e[1]*Fo,2<e.length?e[2]*Fo:0),t.invert=function(t){return(t=e.invert(t[0]*Fo,t[1]*Fo))[0]*=zo,t[1]*=zo,t},t},cn.invert=un,eo.geo.circle=function(){function e(){var t="function"==typeof a?a.apply(this,arguments):a,n=ln(-t[0]*Fo,-t[1]*Fo,0).invert,r=[];return i(null,null,1,{point:function(t,e){r.push(t=n(t,e)),t[0]*=zo,t[1]*=zo}}),{type:"Polygon",coordinates:[r]}}var n,i,a=[0,0],r=6;return e.origin=function(t){return arguments.length?(a=t,e):a},e.angle=function(t){return arguments.length?(i=gn((n=+t)*Fo,r*Fo),e):n},e.precision=function(t){return arguments.length?(i=gn(n*Fo,(r=+t)*Fo),e):r},e.angle(90)},eo.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Fo,i=t[1]*Fo,a=e[1]*Fo,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),c=Math.cos(i),l=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=c*l-u*f*s)*n),u*l+c*f*s)},eo.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return eo.range(Math.ceil(a/x)*x,i,x).map(d).concat(eo.range(Math.ceil(c/v)*v,u,v).map(h)).concat(eo.range(Math.ceil(r/g)*g,n,g).filter(function(t){return fo(t%x)>ko}).map(l)).concat(eo.range(Math.ceil(s/p)*p,o,p).filter(function(t){return fo(t%v)>ko}).map(f))}var n,r,i,a,o,s,u,c,l,f,d,h,g=10,p=g,x=90,v=360,y=2.5;return e.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(u).slice(1),d(i).reverse().slice(1),h(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],c=+t[0][1],u=+t[1][1],i<a&&(t=a,a=i,i=t),u<c&&(t=c,c=u,u=t),e.precision(y)):[[a,c],[i,u]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],n<r&&(t=r,r=n,n=t),o<s&&(t=s,s=o,o=t),e.precision(y)):[[r,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(x=+t[0],v=+t[1],e):[x,v]},e.minorStep=function(t){return arguments.length?(g=+t[0],p=+t[1],e):[g,p]},e.precision=function(t){return arguments.length?(y=+t,l=xn(s,o,90),f=vn(r,n,y),d=xn(c,u,90),h=vn(a,i,y),e):y},e.majorExtent([[-180,-90+ko],[180,90-ko]]).minorExtent([[-180,-80-ko],[180,80+ko]])},eo.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[n||i.apply(this,arguments),r||a.apply(this,arguments)]}}var n,r,i=yn,a=mn;return e.distance=function(){return eo.geo.distance(n||i.apply(this,arguments),r||a.apply(this,arguments))},e.source=function(t){return arguments.length?(n="function"==typeof(i=t)?null:t,e):i},e.target=function(t){return arguments.length?(r="function"==typeof(a=t)?null:t,e):a},e.precision=function(){return arguments.length?e:0},e},eo.geo.interpolate=function(t,e){return _n(t[0]*Fo,t[1]*Fo,e[0]*Fo,e[1]*Fo)},eo.geo.length=function(t){return Os=0,eo.geo.stream(t,Vs),Os};var Vs={sphere:_,point:_,lineStart:bn,lineEnd:_,polygonStart:_,polygonEnd:_},qs=wn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(eo.geo.azimuthalEqualArea=function(){return an(qs)}).raw=qs;var js=wn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},z);(eo.geo.azimuthalEquidistant=function(){return an(js)}).raw=js,(eo.geo.conicConformal=function(){return Ve(Tn)}).raw=Tn,(eo.geo.conicEquidistant=function(){return Ve(An)}).raw=An;var Us=wn(function(t){return 1/t},Math.atan);(eo.geo.gnomonic=function(){return an(Us)}).raw=Us,Mn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Xo]},(eo.geo.mercator=function(){return Sn(Mn)}).raw=Mn;var Ws=wn(function(){return 1},Math.asin);(eo.geo.orthographic=function(){return an(Ws)}).raw=Ws;var Gs=wn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(eo.geo.stereographic=function(){return an(Gs)}).raw=Gs,Ln.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Xo]},(eo.geo.transverseMercator=function(){var t=Sn(Ln),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=Ln,eo.geom={},eo.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,n=St(d),r=St(h),i=t.length,a=[],o=[];for(e=0;e<i;e++)a.push([+n.call(this,t[e],e),+r.call(this,t[e],e),e]);for(a.sort(Dn),e=0;e<i;e++)o.push([a[e][0],-a[e][1]]);var s=En(a),u=En(o),c=u[0]===s[0],l=u[u.length-1]===s[s.length-1],f=[];for(e=s.length-1;0<=e;--e)f.push(t[a[s[e]][2]]);for(e=+c;e<u.length-l;++e)f.push(t[a[u[e]][2]]);return f}var d=kn,h=Cn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(d=t,e):d},e.y=function(t){return arguments.length?(h=t,e):h},e)},eo.geom.polygon=function(t){return vo(t,Zs),t};var Zs=eo.geom.polygon.prototype=[];Zs.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Zs.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},Zs.clip=function(t){for(var e,n,r,i,a,o,s=Fn(t),u=-1,c=this.length-Fn(this),l=this[c-1];++u<c;){for(e=t.slice(),t.length=0,i=this[u],a=e[(r=e.length-s)-1],n=-1;++n<r;)In(o=e[n],l,i)?(In(a,l,i)||t.push(Xn(a,o,l,i)),t.push(o)):In(a,l,i)&&t.push(Xn(a,o,l,i)),a=o;s&&t.push(t[0]),l=i}return t};var $s,Ks,Js,Qs,tu,eu=[],nu=[];Hn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(qn),e.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=ar(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(rr(this,n),n=(t=n).U),n.C=!1,r.C=!0,ir(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ir(this,n),n=(t=n).U),n.C=!1,r.C=!0,rr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?ar(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,((n.L=a).U=n)!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,(n.R=o).U=n):(n.U=i,t=(i=n).R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,rr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ir(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,rr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ir(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,rr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ir(this,i),t=this._;break}e.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}},eo.geom.voronoi=function(t){function e(i){var a=new Array(i.length),o=l[0][0],s=l[0][1],u=l[1][0],c=l[1][1];return or(n(i),l).cells.forEach(function(t,e){var n=t.edges,r=t.site;(a[e]=n.length?n.map(function(t){var e=t.start();return[e.x,e.y]}):r.x>=o&&r.x<=u&&r.y>=s&&r.y<=c?[[o,c],[u,c],[u,s],[o,s]]:[]).point=i[e]}),a}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/ko)*ko,y:Math.round(o(t,e)/ko)*ko,i:e}})}var r=kn,i=Cn,a=r,o=i,l=ru;return t?e(t):(e.links=function(e){return or(n(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},e.triangles=function(c){var l=[];return or(n(c)).cells.forEach(function(t,e){for(var n,r=t.site,i=t.edges.sort(qn),a=-1,o=i.length,s=i[o-1].edge,u=s.l===r?s.r:s.l;++a<o;)s,n=u,u=(s=i[a].edge).l===r?s.r:s.l,e<n.i&&e<u.i&&ur(r,n,u)<0&&l.push([c[e],c[n.i],c[u.i]])}),l},e.x=function(t){return arguments.length?(a=St(r=t),e):r},e.y=function(t){return arguments.length?(o=St(i=t),e):i},e.clipExtent=function(t){return arguments.length?(l=null==t?ru:t,e):l===ru?null:l},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):l===ru?null:l&&l[1]},e)};var ru=[[-1e6,-1e6],[1e6,1e6]];eo.geom.delaunay=function(t){return eo.geom.voronoi().triangles(t)},eo.geom.quadtree=function(t,m,_,b,w){function e(t){function h(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(fo(u-n)+fo(c-r)<.01)f(t,e,n,r,i,a,o,s);else{var l=t.point;t.x=t.y=t.point=null,f(t,l,u,c,i,a,o,s),f(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else f(t,e,n,r,i,a,o,s)}function f(t,e,n,r,i,a,o,s){var u=.5*(i+o),c=.5*(a+s),l=u<=n,f=c<=r,d=f<<1|l;t.leaf=!1,l?i=u:o=u,f?a=c:s=c,h(t=t.nodes[d]||(t.nodes[d]=fr()),e,n,r,i,a,o,s)}var e,n,r,i,a,o,s,u,c,l=St(A),d=St(M);if(null!=m)o=m,s=_,u=b,c=w;else if(u=c=-(o=s=Infinity),n=[],r=[],a=t.length,T)for(i=0;i<a;++i)(e=t[i]).x<o&&(o=e.x),e.y<s&&(s=e.y),e.x>u&&(u=e.x),e.y>c&&(c=e.y),n.push(e.x),r.push(e.y);else for(i=0;i<a;++i){var g=+l(e=t[i],i),p=+d(e,i);g<o&&(o=g),p<s&&(s=p),u<g&&(u=g),c<p&&(c=p),n.push(g),r.push(p)}var x=u-o,v=c-s;v<x?c=s+x:u=o+v;var y=fr();if(y.add=function(t){h(y,t,+l(t,++i),+d(t,i),o,s,u,c)},y.visit=function(t){dr(t,y,o,s,u,c)},y.find=function(t){return hr(y,t[0],t[1],o,s,u,c)},i=-1,null==m){for(;++i<a;)h(y,t[i],n[i],r[i],o,s,u,c);--i}else t.forEach(y.add);return n=r=t=e=null,y}var T,A=kn,M=Cn;return(T=arguments.length)?(A=cr,M=lr,3===T&&(w=_,b=m,_=m=0),e(t)):(e.x=function(t){return arguments.length?(A=t,e):A},e.y=function(t){return arguments.length?(M=t,e):M},e.extent=function(t){return arguments.length?(null==t?m=_=b=w=null:(m=+t[0][0],_=+t[0][1],b=+t[1][0],w=+t[1][1]),e):null==m?null:[[m,_],[b,w]]},e.size=function(t){return arguments.length?(null==t?m=_=b=w=null:(m=_=0,b=+t[0],w=+t[1]),e):null==m?null:[b-m,w-_]},e)},eo.interpolateRgb=gr,eo.interpolateObject=pr,eo.interpolateNumber=xr,eo.interpolateString=vr;var iu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,au=new RegExp(iu.source,"g");eo.interpolate=yr,eo.interpolators=[function(t,e){var n=typeof e;return("string"===n?$o.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?gr:vr:e instanceof ot?gr:Array.isArray(e)?mr:"object"===n&&isNaN(e)?pr:xr)(t,e)}],eo.interpolateArray=mr;var ou=function(){return z},su=eo.map({linear:ou,poly:Sr,quad:function(){return Tr},cubic:function(){return Ar},sin:function(){return Lr},exp:function(){return kr},circle:function(){return Cr},elastic:Er,back:Dr,bounce:function(){return Ir}}),uu=eo.map({"in":z,out:br,"in-out":wr,"out-in":function(t){return wr(br(t))}});eo.ease=function(t){var e=t.indexOf("-"),n=0<=e?t.slice(0,e):t,r=0<=e?t.slice(e+1):"in";return n=su.get(n)||ou,_r((r=uu.get(r)||z)(n.apply(null,no.call(arguments,1))))},eo.interpolateHcl=Xr,eo.interpolateHsl=Fr,eo.interpolateLab=zr,eo.interpolateRound=Rr,eo.transform=function(t){var n=io.createElementNS(eo.ns.prefix.svg,"g");return(eo.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Nr(e?e.matrix:cu)})(t)},Nr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var cu={a:1,b:0,c:0,d:1,e:0,f:0};eo.interpolateTransform=Br,eo.layout={},eo.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(qr(t[n]));return e}},eo.layout.chord=function(){function t(){var t,e,n,r,i,a={},o=[],s=eo.range(_),u=[];for(v=[],y=[],t=0,r=-1;++r<_;){for(e=0,i=-1;++i<_;)e+=m[r][i];o.push(e),u.push(eo.range(_)),t+=e}for(b&&s.sort(function(t,e){return b(o[t],o[e])}),w&&u.forEach(function(t,n){t.sort(function(t,e){return w(m[n][t],m[n][e])})}),t=(Do-A*_)/t,e=0,r=-1;++r<_;){for(n=e,i=-1;++i<_;){var c=s[r],l=u[c][i],f=m[c][l],d=e,h=e+=f*t;a[c+"-"+l]={index:c,subindex:l,startAngle:d,endAngle:h,value:f}}y[c]={index:c,startAngle:n,endAngle:e,value:(e-n)/t},e+=A}for(r=-1;++r<_;)for(i=r-1;++i<_;){var g=a[r+"-"+i],p=a[i+"-"+r];(g.value||p.value)&&v.push(g.value<p.value?{source:p,target:g}:{source:g,target:p})}T&&x()}function x(){v.sort(function(t,e){return T((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var v,y,m,_,b,w,T,e={},A=0;return e.matrix=function(t){return arguments.length?(_=(m=t)&&m.length,v=y=null,e):m},e.padding=function(t){return arguments.length?(A=t,v=y=null,e):A},e.sortGroups=function(t){return arguments.length?(b=t,v=y=null,e):b},e.sortSubgroups=function(t){return arguments.length?(w=t,v=null,e):w},e.sortChords=function(t){return arguments.length?(T=t,v&&x(),e):T},e.chords=function(){return v||t(),v},e.groups=function(){return y||t(),y},e},eo.layout.force=function(){function f(c){return function(t,e,n,r){if(t.point!==c){var i=t.cx-c.x,a=t.cy-c.y,o=r-e,s=i*i+a*a;if(o*o/b<s){if(s<l){var u=t.charge/s;c.px-=i*u,c.py-=a*u}return!0}if(t.point&&s&&s<l){u=t.pointCharge/s;c.px-=i*u,c.py-=a*u}}return!t.charge}}function t(t){t.px=eo.event.x,t.py=eo.event.y,i.resume()}var e,d,h,g,p,i={},x=eo.dispatch("start","tick","end"),v=[1,1],y=.9,a=lu,o=fu,m=-30,l=du,_=.1,b=.64,w=[],T=[];return i.tick=function(){if((d*=.99)<.005)return x.end({type:"end",alpha:d=0}),!0;var t,e,n,r,i,a,o,s,u,c=w.length,l=T.length;for(e=0;e<l;++e)r=(n=T[e]).source,(a=(s=(i=n.target).x-r.x)*s+(u=i.y-r.y)*u)&&(s*=a=d*g[e]*((a=Math.sqrt(a))-h[e])/a,u*=a,i.x-=s*(o=r.weight/(i.weight+r.weight)),i.y-=u*o,r.x+=s*(o=1-o),r.y+=u*o);if((o=d*_)&&(s=v[0]/2,u=v[1]/2,e=-1,o))for(;++e<c;)(n=w[e]).x+=(s-n.x)*o,n.y+=(u-n.y)*o;if(m)for(Kr(t=eo.geom.quadtree(w),d,p),e=-1;++e<c;)(n=w[e]).fixed||t.visit(f(n));for(e=-1;++e<c;)(n=w[e]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*y,n.y-=(n.py-(n.py=n.y))*y);x.tick({type:"tick",alpha:d})},i.nodes=function(t){return arguments.length?(w=t,i):w},i.links=function(t){return arguments.length?(T=t,i):T},i.size=function(t){return arguments.length?(v=t,i):v},i.linkDistance=function(t){return arguments.length?(a="function"==typeof t?t:+t,i):a},i.distance=i.linkDistance,i.linkStrength=function(t){return arguments.length?(o="function"==typeof t?t:+t,i):o},i.friction=function(t){return arguments.length?(y=+t,i):y},i.charge=function(t){return arguments.length?(m="function"==typeof t?t:+t,i):m},i.chargeDistance=function(t){return arguments.length?(l=t*t,i):Math.sqrt(l)},i.gravity=function(t){return arguments.length?(_=+t,i):_},i.theta=function(t){return arguments.length?(b=t*t,i):Math.sqrt(b)},i.alpha=function(t){return arguments.length?(t=+t,d?d=0<t?t:0:0<t&&(x.start({type:"start",alpha:d=t}),eo.timer(i.tick)),i):d},i.start=function(){function t(t,e){if(!u){for(u=new Array(c),a=0;a<c;++a)u[a]=[];for(a=0;a<l;++a){var n=T[a];u[n.source.index].push(n.target),u[n.target.index].push(n.source)}}for(var r,i=u[s],a=-1,o=i.length;++a<o;)if(!isNaN(r=i[a][t]))return r;return Math.random()*e}var s,u,e,c=w.length,l=T.length,n=v[0],r=v[1];for(s=0;s<c;++s)(e=w[s]).index=s,e.weight=0;for(s=0;s<l;++s)"number"==typeof(e=T[s]).source&&(e.source=w[e.source]),"number"==typeof e.target&&(e.target=w[e.target]),++e.source.weight,++e.target.weight;for(s=0;s<c;++s)e=w[s],isNaN(e.x)&&(e.x=t("x",n)),isNaN(e.y)&&(e.y=t("y",r)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(h=[],"function"==typeof a)for(s=0;s<l;++s)h[s]=+a.call(this,T[s],s);else for(s=0;s<l;++s)h[s]=a;if(g=[],"function"==typeof o)for(s=0;s<l;++s)g[s]=+o.call(this,T[s],s);else for(s=0;s<l;++s)g[s]=o;if(p=[],"function"==typeof m)for(s=0;s<c;++s)p[s]=+m.call(this,w[s],s);else for(s=0;s<c;++s)p[s]=m;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){if(e||(e=eo.behavior.drag().origin(z).on("dragstart.force",Wr).on("drag.force",t).on("dragend.force",Gr)),!arguments.length)return e;this.on("mouseover.force",Zr).on("mouseout.force",$r).call(e)},eo.rebind(i,x,"on")};var lu=20,fu=1,du=Infinity;eo.layout.hierarchy=function(){function s(t){var e,n=[t],r=[];for(t.depth=0;null!=(e=n.pop());)if(r.push(e),(a=c.call(s,e,e.depth))&&(i=a.length)){for(var i,a,o;0<=--i;)n.push(o=a[i]),o.parent=e,o.depth=e.depth+1;l&&(e.value=0),e.children=a}else l&&(e.value=+l.call(s,e,e.depth)||0),delete e.children;return ti(t,function(t){var e,n;u&&(e=t.children)&&e.sort(u),l&&(n=t.parent)&&(n.value+=t.value)}),r}var u=ri,c=ei,l=ni;return s.sort=function(t){return arguments.length?(u=t,s):u},s.children=function(t){return arguments.length?(c=t,s):c},s.value=function(t){return arguments.length?(l=t,s):l},s.revalue=function(t){return l&&(Qr(t,function(t){t.children&&(t.value=0)}),ti(t,function(t){var e;t.children||(t.value=+l.call(s,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},s},eo.layout.partition=function(){function c(t,e,n,r){var i=t.children;if(t.x=e,t.y=t.depth*r,t.dx=n,t.dy=r,i&&(a=i.length)){var a,o,s,u=-1;for(n=t.value?n/t.value:0;++u<a;)c(o=i[u],e,s=o.value*n,r),e+=s}}function a(t){var e=t.children,n=0;if(e&&(r=e.length))for(var r,i=-1;++i<r;)n=Math.max(n,a(e[i]));return 1+n}function e(t,e){var n=r.call(this,t,e);return c(n[0],0,i[0],i[1]/a(n[0])),n}var r=eo.layout.hierarchy(),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},Jr(e,r)},eo.layout.pie=function(){function f(n){var e,t=n.length,r=n.map(function(t,e){return+d.call(f,t,e)}),i=+("function"==typeof g?g.apply(this,arguments):g),a=("function"==typeof p?p.apply(this,arguments):p)-i,o=Math.min(Math.abs(a)/t,+("function"==typeof x?x.apply(this,arguments):x)),s=o*(a<0?-1:1),u=(a-t*s)/eo.sum(r),c=eo.range(t),l=[];return null!=h&&c.sort(h===hu?function(t,e){return r[e]-r[t]}:function(t,e){return h(n[t],n[e])}),c.forEach(function(t){l[t]={data:n[t],value:e=r[t],startAngle:i,endAngle:i+=e*u+s,padAngle:o}}),l}var d=Number,h=hu,g=0,p=Do,x=0;return f.value=function(t){return arguments.length?(d=t,f):d},f.sort=function(t){return arguments.length?(h=t,f):h},f.startAngle=function(t){return arguments.length?(g=t,f):g},f.endAngle=function(t){return arguments.length?(p=t,f):p},f.padAngle=function(t){return arguments.length?(x=t,f):x},f};var hu={};eo.layout.stack=function(){function f(t,e){if(!(a=t.length))return t;var n=t.map(function(t,e){return d.call(f,t,e)}),r=n.map(function(t){return t.map(function(t,e){return[x.call(f,t,e),v.call(f,t,e)]})}),i=h.call(f,r,e);n=eo.permute(n,i),r=eo.permute(r,i);var a,o,s,u,c=g.call(f,r,e),l=n[0].length;for(s=0;s<l;++s)for(p.call(f,n[0][s],u=c[s],r[0][s][1]),o=1;o<a;++o)p.call(f,n[o][s],u+=r[o-1][s][1],r[o][s][1]);return t}var d=z,h=ui,g=ci,p=si,x=ai,v=oi;return f.values=function(t){return arguments.length?(d=t,f):d},f.order=function(t){return arguments.length?(h="function"==typeof t?t:gu.get(t)||ui,f):h},f.offset=function(t){return arguments.length?(g="function"==typeof t?t:pu.get(t)||ci,f):g},f.x=function(t){return arguments.length?(x=t,f):x},f.y=function(t){return arguments.length?(v=t,f):v},f.out=function(t){return arguments.length?(p=t,f):p},f};var gu=eo.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(li),a=t.map(fi),o=eo.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,c=[],l=[];for(e=0;e<r;++e)n=o[e],s<u?(s+=a[n],c.push(n)):(u+=a[n],l.push(n));return l.reverse().concat(c)},reverse:function(t){return eo.range(t.length).reverse()},"default":ui}),pu=eo.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,u=[];for(n=0;n<a;++n){for(r=e=0;e<i;e++)r+=t[e][n][1];s<r&&(s=r),o.push(r)}for(n=0;n<a;++n)u[n]=(s-o[n])/2;return u},wiggle:function(t){var e,n,r,i,a,o,s,u,c,l=t.length,f=t[0],d=f.length,h=[];for(h[0]=u=c=0,n=1;n<d;++n){for(i=e=0;e<l;++e)i+=t[e][n][1];for(a=e=0,s=f[n][0]-f[n-1][0];e<l;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}h[n]=u-=i?a/i*s:0,u<c&&(c=u)}for(n=0;n<d;++n)h[n]-=c;return h},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(r=e=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:ci});eo.layout.histogram=function(){function n(t,e){for(var n,r,i=[],a=t.map(d,this),o=h.call(this,a,e),s=g.call(this,o,a,e),u=(e=-1,a.length),c=s.length-1,l=f?1:1/u;++e<c;)(n=i[e]=[]).dx=s[e+1]-(n.x=s[e]),n.y=0;if(0<c)for(e=-1;++e<u;)(r=a[e])>=o[0]&&r<=o[1]&&((n=i[eo.bisect(s,r,1,c)-1]).y+=l,n.push(t[e]));return i}var f=!0,d=Number,h=pi,g=hi;return n.value=function(t){return arguments.length?(d=t,n):d},n.range=function(t){return arguments.length?(h=St(t),n):h},n.bins=function(e){return arguments.length?(g="number"==typeof e?function(t){return gi(t,e)}:St(e),n):g},n.frequency=function(t){return arguments.length?(f=!!t,n):f},n},eo.layout.pack=function(){function e(t,e){var n=c.call(this,t,e),r=n[0],i=f[0],a=f[1],o=null==u?Math.sqrt:"function"==typeof u?u:function(){return u};if(r.x=r.y=0,ti(r,function(t){t.r=+o(t.value)}),ti(r,_i),l){var s=l*(u?1:Math.max(2*r.r/i,2*r.r/a))/2;ti(r,function(t){t.r+=s}),ti(r,_i),ti(r,function(t){t.r-=s})}return Ti(r,i/2,a/2,u?1:1/Math.max(2*r.r/i,2*r.r/a)),n}var u,c=eo.layout.hierarchy().sort(xi),l=0,f=[1,1];return e.size=function(t){return arguments.length?(f=t,e):f},e.radius=function(t){return arguments.length?(u=null==t||"function"==typeof t?t:+t,e):u},e.padding=function(t){return arguments.length?(l=+t,e):l},Jr(e,c)},eo.layout.tree=function(){function e(t,e){var n=p.call(this,t,e),r=n[0],i=f(r);if(ti(i,d),i.parent.m=-i.z,Qr(i,h),y)Qr(r,g);else{var a=r,o=r,s=r;Qr(r,function(t){t.x<a.x&&(a=t),t.x>o.x&&(o=t),t.depth>s.depth&&(s=t)});var u=x(a,o)/2-a.x,c=v[0]/(o.x+x(o,a)/2+u),l=v[1]/(s.depth||1);Qr(r,function(t){t.x=(t.x+u)*c,t.y=t.depth*l})}return n}function f(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function d(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Ci(t);var i=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+x(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+x(t._,r._));t.parent.A=a(t,r,t.parent.A||n[0])}function h(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t,e,n){if(e){for(var r,i=t,a=t,o=e,s=i.parent.children[0],u=i.m,c=a.m,l=o.m,f=s.m;o=Li(o),i=Si(i),o&&i;)s=Si(s),(a=Li(a)).a=t,0<(r=o.z+l-i.z-u+x(o._,i._))&&(ki(Ei(o,t,n),t,r),u+=r,c+=r),l+=o.m,u+=i.m,f+=s.m,c+=a.m;o&&!Li(a)&&(a.t=o,a.m+=l-c),i&&!Si(s)&&(s.t=i,s.m+=u-f,n=t)}return n}function g(t){t.x*=v[0],t.y=t.depth*v[1]}var p=eo.layout.hierarchy().sort(null).value(null),x=Mi,v=[1,1],y=null;return e.separation=function(t){return arguments.length?(x=t,e):x},e.size=function(t){return arguments.length?(y=null==(v=t)?g:null,e):y?null:v},e.nodeSize=function(t){return arguments.length?(y=null==(v=t)?null:g,e):y?v:null},Jr(e,p)},eo.layout.cluster=function(){function e(t,e){var n,r=l.call(this,t,e),i=r[0],a=0;ti(i,function(t){var e=t.children;e&&e.length?(t.x=Ii(e),t.y=Di(e)):(t.x=n?a+=f(t,n):0,t.y=0,n=t)});var o=Xi(i),s=Fi(i),u=o.x-f(o,s)/2,c=s.x+f(s,o)/2;return ti(i,h?function(t){t.x=(t.x-i.x)*d[0],t.y=(i.y-t.y)*d[1]}:function(t){t.x=(t.x-u)/(c-u)*d[0],t.y=(1-(i.y?t.y/i.y:1))*d[1]}),r}var l=eo.layout.hierarchy().sort(null).value(null),f=Mi,d=[1,1],h=!1;return e.separation=function(t){return arguments.length?(f=t,e):f},e.size=function(t){return arguments.length?(h=null==(d=t),e):h?null:d},e.nodeSize=function(t){return arguments.length?(h=null!=(d=t),e):h?d:null},Jr(e,l)},eo.layout.treemap=function(){function l(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function f(t){var e=t.children;if(e&&e.length){var n,r,i,a=p(t),o=[],s=e.slice(),u=Infinity,c="slice"===x?a.dx:"dice"===x?a.dy:"slice-dice"===x?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(l(s,a.dx*a.dy/t.value),o.area=0;0<(i=s.length);)o.push(n=s[i-1]),o.area+=n.area,u="squarify"!==x||(r=d(o,c))<=u?(s.pop(),r):(o.area-=o.pop().area,h(o,c,a,!1),c=Math.min(a.dx,a.dy),o.length=o.area=0,Infinity);o.length&&(h(o,c,a,!0),o.length=o.area=0),e.forEach(f)}}function o(t){var e=t.children;if(e&&e.length){var n,r=p(t),i=e.slice(),a=[];for(l(i,r.dx*r.dy/t.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(h(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);e.forEach(o)}}function d(t,e){for(var n,r=t.area,i=0,a=Infinity,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),i<n&&(i=n));return e*=e,(r*=r)?Math.max(e*i*v/r,r/(e*a*v)):Infinity}function h(t,e,n,r){var i,a=-1,o=t.length,s=n.x,u=n.y,c=e?g(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)(i=t[a]).x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?g(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)(i=t[a]).x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?g(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function i(t){var e=r||a(t),n=e[0];return n.x=0,n.y=0,n.dx=s[0],n.dy=s[1],r&&a.revalue(n),l([n],n.dx*n.dy/n.value),(r?o:f)(n),c&&(r=e),e}var r,a=eo.layout.hierarchy(),g=Math.round,s=[1,1],u=null,p=zi,c=!1,x="squarify",v=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(s=t,i):s},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?zi(t):Ri(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Ri(t,n)}return arguments.length?(p=null==(u=n)?zi:"function"==(r=typeof n)?t:("number"===r&&(n=[n,n,n,n]),e),i):u;var r},i.round=function(t){return arguments.length?(g=t?Math.round:Number,i):g!=Number},i.sticky=function(t){return arguments.length?(c=t,r=null,i):c},i.ratio=function(t){return arguments.length?(v=t,i):v},i.mode=function(t){return arguments.length?(x=t+"",i):x},Jr(i,a)},eo.random={normal:function(r,i){var t=arguments.length;return t<2&&(i=1),t<1&&(r=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return r+i*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=eo.random.normal.apply(eo,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=eo.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},eo.scale={};var xu={floor:z,ceil:z};eo.scale.linear=function(){return Vi([0,1],[0,1],yr,!1)};var vu={s:1,g:1,p:1,r:1,e:1};eo.scale.log=function(){return Ki(eo.scale.linear().domain([0,1]),10,!0,[1,10])};var yu=eo.format(".0e"),mu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};eo.scale.pow=function(){return Ji(eo.scale.linear(),1,[0,1])},eo.scale.sqrt=function(){return eo.scale.pow().exponent(.5)},eo.scale.ordinal=function(){return ta([],{t:"range",a:[[]]})},eo.scale.category10=function(){return eo.scale.ordinal().range(_u)},eo.scale.category20=function(){return eo.scale.ordinal().range(bu)},eo.scale.category20b=function(){return eo.scale.ordinal().range(wu)},eo.scale.category20c=function(){return eo.scale.ordinal().range(Tu)};var _u=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mt),bu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mt),wu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mt),Tu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mt);eo.scale.quantile=function(){return ea([],[])},eo.scale.quantize=function(){return na(0,1,[0,1])},eo.scale.threshold=function(){return ra([.5],[0,1])},eo.scale.identity=function(){return ia([0,1])},eo.svg={},eo.svg.arc=function(){function e(){var t=Math.max(0,+O.apply(this,arguments)),e=Math.max(0,+P.apply(this,arguments)),n=V.apply(this,arguments)-Xo,r=q.apply(this,arguments)-Xo,i=Math.abs(r-n),a=r<n?0:1;if(e<t&&(o=e,e=t,t=o),Io<=i)return Y(e,a)+(t?Y(t,1-a):"")+"Z";var o,s,u,c,l,f,d,h,g,p,x,v,y=0,m=0,_=[];if((
c=(+j.apply(this,arguments)||0)/2)&&(u=H===Au?Math.sqrt(t*t+e*e):+H.apply(this,arguments),a||(m*=-1),e&&(m=et(u/e*Math.sin(c))),t&&(y=et(u/t*Math.sin(c)))),e){l=e*Math.cos(n+m),f=e*Math.sin(n+m),d=e*Math.cos(r-m),h=e*Math.sin(r-m);var b=Math.abs(r-n-2*m)<=Eo?0:1;if(m&&fa(l,f,d,h)===a^b){var w=(n+r)/2;l=e*Math.cos(w),f=e*Math.sin(w),d=h=null}}else l=f=0;if(t){g=t*Math.cos(r-y),p=t*Math.sin(r-y),x=t*Math.cos(n+y),v=t*Math.sin(n+y);var T=Math.abs(n-r+2*y)<=Eo?0:1;if(y&&fa(g,p,x,v)===1-a^T){var A=(n+r)/2;g=t*Math.cos(A),p=t*Math.sin(A),x=v=null}}else g=p=0;if(.001<(o=Math.min(Math.abs(e-t)/2,+B.apply(this,arguments)))){s=t<e^a?0:1;var M=null==x?[g,p]:null==d?[l,f]:Xn([l,f],[x,v],[d,h],[g,p]),S=l-M[0],L=f-M[1],k=d-M[0],C=h-M[1],E=1/Math.sin(Math.acos((S*k+L*C)/(Math.sqrt(S*S+L*L)*Math.sqrt(k*k+C*C)))/2),D=Math.sqrt(M[0]*M[0]+M[1]*M[1]);if(null!=d){var I=Math.min(o,(e-D)/(E+1)),X=da(null==x?[g,p]:[x,v],[l,f],e,I,a),F=da([d,h],[g,p],e,I,a);o===I?_.push("M",X[0],"A",I,",",I," 0 0,",s," ",X[1],"A",e,",",e," 0 ",1-a^fa(X[1][0],X[1][1],F[1][0],F[1][1]),",",a," ",F[1],"A",I,",",I," 0 0,",s," ",F[0]):_.push("M",X[0],"A",I,",",I," 0 1,",s," ",F[0])}else _.push("M",l,",",f);if(null!=x){var z=Math.min(o,(t-D)/(E-1)),R=da([l,f],[x,v],t,-z,a),N=da([g,p],null==d?[l,f]:[d,h],t,-z,a);o===z?_.push("L",N[0],"A",z,",",z," 0 0,",s," ",N[1],"A",t,",",t," 0 ",a^fa(N[1][0],N[1][1],R[1][0],R[1][1]),",",1-a," ",R[1],"A",z,",",z," 0 0,",s," ",R[0]):_.push("L",N[0],"A",z,",",z," 0 0,",s," ",R[0])}else _.push("L",g,",",p)}else _.push("M",l,",",f),null!=d&&_.push("A",e,",",e," 0 ",b,",",a," ",d,",",h),_.push("L",g,",",p),null!=x&&_.push("A",t,",",t," 0 ",T,",",1-a," ",x,",",v);return _.push("Z"),_.join("")}function Y(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var O=oa,P=sa,B=aa,H=Au,V=ua,q=ca,j=la;return e.innerRadius=function(t){return arguments.length?(O=St(t),e):O},e.outerRadius=function(t){return arguments.length?(P=St(t),e):P},e.cornerRadius=function(t){return arguments.length?(B=St(t),e):B},e.padRadius=function(t){return arguments.length?(H=t==Au?Au:St(t),e):H},e.startAngle=function(t){return arguments.length?(V=St(t),e):V},e.endAngle=function(t){return arguments.length?(q=St(t),e):q},e.padAngle=function(t){return arguments.length?(j=St(t),e):j},e.centroid=function(){var t=(+O.apply(this,arguments)+ +P.apply(this,arguments))/2,e=(+V.apply(this,arguments)+ +q.apply(this,arguments))/2-Xo;return[Math.cos(e)*t,Math.sin(e)*t]},e};var Au="auto";eo.svg.line=function(){return ha(z)};var Mu=eo.map({linear:ga,"linear-closed":pa,step:xa,"step-before":va,"step-after":ya,basis:Aa,"basis-open":Ma,"basis-closed":Sa,bundle:La,cardinal:ba,"cardinal-open":ma,"cardinal-closed":_a,monotone:Xa});Mu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Su=[0,2/3,1/3,0],Lu=[0,1/3,2/3,0],ku=[0,1/6,2/3,1/6];eo.svg.line.radial=function(){var t=ha(Fa);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(va.reverse=ya).reverse=va,eo.svg.area=function(){return za(z)},eo.svg.area.radial=function(){var t=za(Fa);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},eo.svg.chord=function(){function e(t,e){var n=i(this,u,t,e),r=i(this,c,t,e);return"M"+n.p0+o(n.r,n.p1,n.a1-n.a0)+(a(n,r)?s(n.r,n.p1,n.r,n.p0):s(n.r,n.p1,r.r,r.p0)+o(r.r,r.p1,r.a1-r.a0)+s(r.r,r.p1,n.r,n.p0))+"Z"}function i(t,e,n,r){var i=e.call(t,n,r),a=l.call(t,i,r),o=f.call(t,i,r)-Xo,s=d.call(t,i,r)-Xo;return{r:a,a0:o,a1:s,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(s),a*Math.sin(s)]}}function a(t,e){return t.a0==e.a0&&t.a1==e.a1}function o(t,e,n){return"A"+t+","+t+" 0 "+ +(Eo<n)+",1 "+e}function s(t,e,n,r){return"Q 0,0 "+r}var u=yn,c=mn,l=Ra,f=ua,d=ca;return e.radius=function(t){return arguments.length?(l=St(t),e):l},e.source=function(t){return arguments.length?(u=St(t),e):u},e.target=function(t){return arguments.length?(c=St(t),e):c},e.startAngle=function(t){return arguments.length?(f=St(t),e):f},e.endAngle=function(t){return arguments.length?(d=St(t),e):d},e},eo.svg.diagonal=function(){function e(t,e){var n=o.call(this,t,e),r=s.call(this,t,e),i=(n.y+r.y)/2,a=[n,{x:n.x,y:i},{x:r.x,y:i},r];return"M"+(a=a.map(u))[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var o=yn,s=mn,u=Na;return e.source=function(t){return arguments.length?(o=St(t),e):o},e.target=function(t){return arguments.length?(s=St(t),e):s},e.projection=function(t){return arguments.length?(u=t,e):u},e},eo.svg.diagonal.radial=function(){var t=eo.svg.diagonal(),e=Na,n=t.projection;return t.projection=function(t){return arguments.length?n(Ya(e=t)):e},t},eo.svg.symbol=function(){function e(t,e){return(Cu.get(n.call(this,t,e))||Ba)(r.call(this,t,e))}var n=Pa,r=Oa;return e.type=function(t){return arguments.length?(n=St(t),e):n},e.size=function(t){return arguments.length?(r=St(t),e):r},e};var Cu=eo.map({circle:Ba,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Du)),n=e*Du;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Eu),n=e*Eu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Eu),n=e*Eu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});eo.svg.symbolTypes=Cu.keys();var Eu=Math.sqrt(3),Du=Math.tan(30*Fo);bo.transition=function(t){for(var e,n,r=Iu||++Ru,i=Ua(t),a=[],o=Xu||{time:Date.now(),ease:Mr,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(e=[]);for(var c=this[s],l=-1,f=c.length;++l<f;)(n=c[l])&&Wa(n,l,i,r,o),e.push(n)}return Va(a,i,r)},bo.interrupt=function(t){return this.each(null==t?Fu:Ha(Ua(t)))};var Iu,Xu,Fu=Ha(Ua()),zu=[],Ru=0;zu.call=bo.call,zu.empty=bo.empty,zu.node=bo.node,zu.size=bo.size,eo.transition=function(t,e){return t&&t.transition?Iu?t.transition(e):t:eo.selection().transition(t)},(eo.transition.prototype=zu).select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=A(t);for(var s=-1,u=this.length;++s<u;){o.push(e=[]);for(var c=this[s],l=-1,f=c.length;++l<f;)(r=c[l])&&(n=t.call(r,r.__data__,l,s))?("__data__"in r&&(n.__data__=r.__data__),Wa(n,l,a,i,r[a][i]),e.push(n)):e.push(null)}return Va(o,a,i)},zu.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,u=[];t=M(t);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],d=-1,h=f.length;++d<h;)if(r=f[d]){a=r[s][o],n=t.call(r,r.__data__,d,c),u.push(e=[]);for(var g=-1,p=n.length;++g<p;)(i=n[g])&&Wa(i,g,s,o,a),e.push(i)}return Va(u,s,o)},zu.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=B(t));for(var i=0,a=this.length;i<a;i++){r.push(e=[]);for(var o,s=0,u=(o=this[i]).length;s<u;s++)(n=o[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return Va(r,this.namespace,this.id)},zu.tween=function(e,n){var r=this.id,i=this.namespace;return arguments.length<2?this.node()[i][r].tween.get(e):V(this,null==n?function(t){t[i][r].tween.remove(e)}:function(t){t[i][r].tween.set(e,n)})},zu.attr=function(t,e){function r(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function n(n){return null==n?r:(n+="",function(){var e,t=this.getAttribute(s);return t!==n&&(e=o(t,n),function(t){this.setAttribute(s,e(t))})})}function a(n){return null==n?i:(n+="",function(){var e,t=this.getAttributeNS(s.space,s.local);return t!==n&&(e=o(t,n),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o="transform"==t?Br:yr,s=eo.ns.qualify(t);return qa(this,"attr."+t,e,s.local?a:n)},zu.attrTween=function(t,r){function e(t,e){var n=r.call(this,t,e,this.getAttribute(i));return n&&function(t){this.setAttribute(i,n(t))}}function n(t,e){var n=r.call(this,t,e,this.getAttributeNS(i.space,i.local));return n&&function(t){this.setAttributeNS(i.space,i.local,n(t))}}var i=eo.ns.qualify(t);return this.tween("attr."+t,i.local?n:e)},zu.style=function(r,t,i){function e(){this.style.removeProperty(r)}function n(n){return null==n?e:(n+="",function(){var e,t=F(this).getComputedStyle(this,null).getPropertyValue(r);return t!==n&&(e=yr(t,n),function(t){this.style.setProperty(r,e(t),i)})})}var a=arguments.length;if(a<3){if("string"!=typeof r){for(i in a<2&&(t=""),r)this.style(i,r[i],t);return this}i=""}return qa(this,"style."+r,t,n)},zu.styleTween=function(r,i,a){function t(t,e){var n=i.call(this,t,e,F(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(t){this.style.setProperty(r,n(t),a)}}return arguments.length<3&&(a=""),this.tween("style."+r,t)},zu.text=function(t){return qa(this,"text",t,ja)},zu.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},zu.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof e&&(e=eo.ease.apply(eo,arguments)),V(this,function(t){t[r][n].ease=e}))},zu.delay=function(r){var i=this.id,a=this.namespace;return arguments.length<1?this.node()[a][i].delay:V(this,"function"==typeof r?function(t,e,n){t[a][i].delay=+r.call(t,t.__data__,e,n)}:(r=+r,function(t){t[a][i].delay=r}))},zu.duration=function(r){var i=this.id,a=this.namespace;return arguments.length<1?this.node()[a][i].duration:V(this,"function"==typeof r?function(t,e,n){t[a][i].duration=Math.max(1,r.call(t,t.__data__,e,n))}:(r=Math.max(1,r),function(t){t[a][i].duration=r}))},zu.each=function(r,n){var i=this.id,a=this.namespace;if(arguments.length<2){var t=Xu,e=Iu;try{Iu=i,V(this,function(t,e,n){Xu=t[a][i],r.call(t,t.__data__,e,n)})}finally{Xu=t,Iu=e}}else V(this,function(t){var e=t[a][i];(e.event||(e.event=eo.dispatch("start","end","interrupt"))).on(r,n)});return this},zu.transition=function(){for(var t,e,n,r=this.id,i=++Ru,a=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(t=[]);for(var c,l=0,f=(c=this[s]).length;l<f;l++)(e=c[l])&&Wa(e,l,a,i,{time:(n=e[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Va(o,a,i)},eo.svg.axis=function(){function n(t){t.each(function(){var t,e=eo.select(this),n=this.__chart__||L,r=this.__chart__=L.copy(),i=null==X?r.ticks?r.ticks.apply(r,I):r.domain():X,a=null==S?r.tickFormat?r.tickFormat.apply(r,I):z:S,o=e.selectAll(".tick").data(i,r),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",ko),u=eo.transition(o.exit()).style("opacity",ko).remove(),c=eo.transition(o.order()).style("opacity",1),l=Math.max(C,0)+D,f=Yi(r),d=e.selectAll(".domain").data([0]),h=(d.enter().append("path").attr("class","domain"),eo.transition(d));s.append("line"),s.append("text");var g,p,x,v,y=s.select("line"),m=c.select("line"),_=o.select("text").text(a),b=s.select("text"),w=c.select("text"),T="top"===k||"left"===k?-1:1;if("bottom"===k||"top"===k?(t=Ga,g="x",x="y",p="x2",v="y2",_.attr("dy",T<0?"0em":".71em").style("text-anchor","middle"),h.attr("d","M"+f[0]+","+T*E+"V0H"+f[1]+"V"+T*E)):(t=Za,g="y",x="x",p="y2",v="x2",_.attr("dy",".32em").style("text-anchor",T<0?"end":"start"),h.attr("d","M"+T*E+","+f[0]+"H0V"+f[1]+"H"+T*E)),y.attr(v,T*C),b.attr(x,T*l),m.attr(p,0).attr(v,T*C),w.attr(g,0).attr(x,T*l),r.rangeBand){var A=r,M=A.rangeBand()/2;n=r=function(t){return A(t)+M}}else n.rangeBand?n=r:u.call(t,r,n);s.call(t,n,r),c.call(t,r,r)})}var S,L=eo.scale.linear(),k=Nu,C=6,E=6,D=3,I=[10],X=null;return n.scale=function(t){return arguments.length?(L=t,n):L},n.orient=function(t){return arguments.length?(k=t in Yu?t+"":Nu,n):k},n.ticks=function(){return arguments.length?(I=arguments,n):I},n.tickValues=function(t){return arguments.length?(X=t,n):X},n.tickFormat=function(t){return arguments.length?(S=t,n):S},n.tickSize=function(t){var e=arguments.length;return e?(C=+t,E=+arguments[e-1],n):C},n.innerTickSize=function(t){return arguments.length?(C=+t,n):C},n.outerTickSize=function(t){return arguments.length?(E=+t,n):E},n.tickPadding=function(t){return arguments.length?(D=+t,n):D},n.tickSubdivide=function(){return arguments.length&&n},n};var Nu="bottom",Yu={top:1,right:1,bottom:1,left:1};eo.svg.brush=function(){function _(t){t.each(function(){var t=eo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(s,z);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ou[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",_.empty()?"none":null);var r,i=eo.transition(t),a=eo.transition(e);L&&(r=Yi(L),a.attr("x",r[0]).attr("width",r[1]-r[0]),w(i)),k&&(r=Yi(k),a.attr("y",r[0]).attr("height",r[1]-r[0]),T(i)),b(i)})}function b(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+C[+/e$/.test(t)]+","+E[+/^s/.test(t)]+")"})}function w(t){t.select(".extent").attr("x",C[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",C[1]-C[0])}function T(t){t.select(".extent").attr("y",E[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",E[1]-E[0])}function o(){function t(){32==eo.event.keyCode&&(g||(f=null,x[0]-=C[1],x[1]-=E[1],g=2),R())}function e(){32==eo.event.keyCode&&2==g&&(x[0]+=C[1],x[1]+=E[1],g=0,R())}function n(){var t=eo.mouse(o),e=!1;a&&(t[0]+=a[0],t[1]+=a[1]),g||(eo.event.altKey?(f||(f=[(C[0]+C[1])/2,(E[0]+E[1])/2]),x[0]=C[+(t[0]<f[0])],x[1]=E[+(t[1]<f[1])]):f=null),d&&r(t,L,0)&&(w(c),e=!0),h&&r(t,k,1)&&(T(c),e=!0),e&&(b(c),u({type:"brush",mode:g?"move":"resize"}))}function r(t,e,n){var r,i,a=Yi(e),o=a[0],s=a[1],u=x[n],c=n?E:C,l=c[1]-c[0];if(g&&(o-=u,s-=l+u),r=(n?I:D)?Math.max(o,Math.min(s,t[n])):t[n],g?i=(r+=u)+l:(f&&(u=Math.max(o,Math.min(s,2*f[n]-r))),u<r?(i=r,r=u):i=u),c[0]!=r||c[1]!=i)return n?M=null:A=null,c[0]=r,c[1]=i,!0}function i(){n(),c.style("pointer-events","all").selectAll(".resize").style("display",_.empty()?"none":null),eo.select("body").style("cursor",null),v.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),p(),u({type:"brushend"})}var f,a,o=this,s=eo.select(eo.event.target),u=S.of(o,arguments),c=eo.select(o),l=s.datum(),d=!/^(n|s)$/.test(l)&&L,h=!/^(e|w)$/.test(l)&&k,g=s.classed("extent"),p=Z(o),x=eo.mouse(o),v=eo.select(F(o)).on("keydown.brush",t).on("keyup.brush",e);if(eo.event.changedTouches?v.on("touchmove.brush",n).on("touchend.brush",i):v.on("mousemove.brush",n).on("mouseup.brush",i),c.interrupt().selectAll("*").interrupt(),g)x[0]=C[0]-x[0],x[1]=E[0]-x[1];else if(l){var y=+/w$/.test(l),m=+/^n/.test(l);a=[C[1-y]-x[0],E[1-m]-x[1]],x[0]=C[y],x[1]=E[m]}else eo.event.altKey&&(f=x.slice());c.style("pointer-events","none").selectAll(".resize").style("display",null),eo.select("body").style("cursor",s.style("cursor")),u({type:"brushstart"}),n()}var A,M,S=N(_,"brushstart","brush","brushend"),L=null,k=null,C=[0,0],E=[0,0],D=!0,I=!0,s=Pu[0];return _.event=function(t){t.each(function(){var r=S.of(this,arguments),i={x:C,y:E,i:A,j:M},t=this.__chart__||i;this.__chart__=i,Iu?eo.select(this).transition().each("start.brush",function(){A=t.i,M=t.j,C=t.x,E=t.y,r({type:"brushstart"})}).tween("brush:brush",function(){var e=mr(C,i.x),n=mr(E,i.y);return A=M=null,function(t){C=i.x=e(t),E=i.y=n(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){A=i.i,M=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},_.x=function(t){return arguments.length?(s=Pu[!(L=t)<<1|!k],_):L},_.y=function(t){return arguments.length?(s=Pu[!L<<1|!(k=t)],_):k},_.clamp=function(t){return arguments.length?(L&&k?(D=!!t[0],I=!!t[1]):L?D=!!t:k&&(I=!!t),_):L&&k?[D,I]:L?D:k?I:null},_.extent=function(t){var e,n,r,i,a;return arguments.length?(L&&(e=t[0],n=t[1],k&&(e=e[0],n=n[0]),A=[e,n],L.invert&&(e=L(e),n=L(n)),n<e&&(a=e,e=n,n=a),e==C[0]&&n==C[1]||(C=[e,n])),k&&(r=t[0],i=t[1],L&&(r=r[1],i=i[1]),M=[r,i],k.invert&&(r=k(r),i=k(i)),i<r&&(a=r,r=i,i=a),r==E[0]&&i==E[1]||(E=[r,i])),_):(L&&(A?(e=A[0],n=A[1]):(e=C[0],n=C[1],L.invert&&(e=L.invert(e),n=L.invert(n)),n<e&&(a=e,e=n,n=a))),k&&(M?(r=M[0],i=M[1]):(r=E[0],i=E[1],k.invert&&(r=k.invert(r),i=k.invert(i)),i<r&&(a=r,r=i,i=a))),L&&k?[[e,r],[n,i]]:L?[e,n]:k&&[r,i])},_.clear=function(){return _.empty()||(C=[0,0],E=[0,0],A=M=null),_},_.empty=function(){return!!L&&C[0]==C[1]||!!k&&E[0]==E[1]},eo.rebind(_,S,"on")};var Ou={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bu=os.format=ds.timeFormat,Hu=Bu.utc,Vu=Hu("%Y-%m-%dT%H:%M:%S.%LZ");Bu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?$a:Vu,$a.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},$a.toString=Vu.toString,os.second=Ot(function(t){return new ss(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),os.seconds=os.second.range,os.seconds.utc=os.second.utc.range,os.minute=Ot(function(t){return new ss(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),os.minutes=os.minute.range,os.minutes.utc=os.minute.utc.range,os.hour=Ot(function(t){var e=t.getTimezoneOffset()/60;return new ss(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),os.hours=os.hour.range,os.hours.utc=os.hour.utc.range,os.month=Ot(function(t){return(t=os.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),os.months=os.month.range,os.months.utc=os.month.utc.range;var qu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ju=[[os.second,1],[os.second,5],[os.second,15],[os.second,30],[os.minute,1],[os.minute,5],[os.minute,15],[os.minute,30],[os.hour,1],[os.hour,3],[os.hour,6],[os.hour,12],[os.day,1],[os.day,2],[os.week,1],[os.month,1],[os.month,3],[os.year,1]],Uu=Bu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",ke]]),Wu={range:function(t,e,n){return eo.range(Math.ceil(t/n)*n,+e,n).map(Ja)},floor:z,ceil:z};ju.year=os.year,os.scale=function(){return Ka(eo.scale.linear(),ju,Uu)};var Gu=ju.map(function(t){return[t[0].utc,t[1]]}),Zu=Hu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",ke]]);Gu.year=os.year.utc,os.scale.utc=function(){return Ka(eo.scale.linear(),Gu,Zu)},eo.text=Lt(function(t){return t.responseText}),eo.json=function(t,e){return kt(t,"application/json",Qa,e)},eo.html=function(t,e){return kt(t,"text/html",to,e)},eo.xml=Lt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(eo):"object"==typeof module&&module.exports&&(module.exports=eo),this.d3=eo}(),function(l){"use strict";function e(t){this.owner=t}function t(t,e){if(Object.create)e.prototype=Object.create(t.prototype);else{var n=function n(){};n.prototype=t.prototype,e.prototype=new n}return e.prototype.constructor=e}function n(t){var e=this.internal=new r(this);e.loadConfig(t),e.init(),function i(e,n,r){Object.keys(e).forEach(function(t){n[t]=e[t].bind(r),0<Object.keys(e[t]).length&&i(e[t],n[t],r)})}(a,this,this)}function r(t){var e=this;e.d3=l.d3?l.d3:"undefined"!=typeof require?require("d3"):undefined,e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}function s(t){e.call(this,t)}function f(F,z){function R(t,e){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+J)+", 0)"})}function N(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})}function Y(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function O(t){var e,n,r=[];if(t.ticks)return t.ticks.apply(t,i);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)r.push(e);return 0<r.length&&0<r[0]&&r.unshift(r[0]-(r[1]-r[0])),r}function P(){var t,e=W.copy();return z.isCategory&&(t=W.domain(),e.domain([t[0],t[1]-1])),e}function B(t){var e=n?n(t):t;return void 0!==e?e:""}function H(t){if(o)return o;var a={h:11.5,w:5.5};return t.select("text").text(B).each(function(t){var e=this.getBoundingClientRect(),n=B(t),r=e.height,i=n?e.width/n.length:undefined;r&&i&&(a.h=r,a.w=i)}).text(""),o=a}function V(t){return z.withoutTransition?t:F.transition(t)}function q(t){t.each(function(){function r(t,r){function i(t,e){o=undefined;for(var n=1;n<e.length;n++)if(" "===e.charAt(n)&&(o=n),a=e.substr(0,n+1),s=L.w*a.length,r<s)return i(t.concat(e.substr(0,o||n)),e.slice(o?o+1:n));return t.concat(e)}var a,o,s,e=B(t),n=[];return"[object Array]"===Object.prototype.toString.call(e)?e:((!r||r<=0)&&(r=E?95:z.isCategory?Math.ceil(d(h[1])-d(h[0]))-12:110),i(n,e+""))}function t(t,e){var n=L.h;return 0===e&&(n="left"===G||"right"===G?-((k[t.index]-1)*(L.h/2)-3):".71em"),n}function e(t){var e=W(t)+(U?0:J);return y[0]<e&&e<y[1]?Z:0}function n(t){return t?0<t?"start":"end":"middle"}function i(t){return t?"rotate("+t+")":""}function a(t){return t?8*Math.sin(Math.PI*(t/180)):0}function o(t){return t?11.5-t/15*2.5*(0<t?1:-1):C}var s,u,c,l=q.g=F.select(this),f=this.__chart__||W,d=this.__chart__=P(),h=K||O(d),g=l.selectAll(".tick").data(h,d),p=g.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),x=g.exit().remove(),v=V(g).style("opacity",1),y=W.rangeExtent?W.rangeExtent():Y(W.range()),m=l.selectAll(".domain").data([0]),_=(m.enter().append("path").attr("class","domain"),V(m));p.append("line"),p.append("text");var b=p.select("line"),w=v.select("line"),T=p.select("text"),A=v.select("text");z.isCategory?(J=Math.ceil((d(1)-d(0))/2),u=U?0:J,c=U?J:0):J=u=0;var M,S,L=H(l.select(".tick")),k=[],C=Math.max(Z,0)+$,E="left"===G||"right"===G;(S=(M=g.select("text")).selectAll("tspan").data(function(t,e){var n=z.tickMultiline?r(t,z.tickWidth):[].concat(B(t));return k[e]=n.length,n.map(function(t){return{index:e,splitted:t}})})).enter().append("tspan"),S.exit().remove(),S.text(function(t){return t.splitted});var D=z.tickTextRotate;switch(G){case"bottom":s=R,b.attr("y2",Z),T.attr("y",C),w.attr("x1",u).attr("x2",u).attr("y2",e),A.attr("x",0).attr("y",o(D)).style("text-anchor",n(D)).attr("transform",i(D)),S.attr("x",0).attr("dy",t).attr("dx",a(D)),_.attr("d","M"+y[0]+","+j+"V0H"+y[1]+"V"+j);break;case"top":s=R,b.attr("y2",-Z),T.attr("y",-C),w.attr("x2",0).attr("y2",-Z),A.attr("x",0).attr("y",-C),M.style("text-anchor","middle"),S.attr("x",0).attr("dy","0em"),_.attr("d","M"+y[0]+","+-j+"V0H"+y[1]+"V"+-j);break;case"left":s=N,b.attr("x2",-Z),T.attr("x",-C),w.attr("x2",-Z).attr("y1",c).attr("y2",c),A.attr("x",-C).attr("y",J),M.style("text-anchor","end"),S.attr("x",-C).attr("dy",t),_.attr("d","M"+-j+","+y[0]+"H0V"+y[1]+"H"+-j);break;case"right":s=N,b.attr("x2",Z),T.attr("x",C),w.attr("x2",Z).attr("y2",0),A.attr("x",C).attr("y",0),M.style("text-anchor","start"),S.attr("x",C).attr("dy",t),_.attr("d","M"+j+","+y[0]+"H0V"+y[1]+"H"+j)}if(d.rangeBand){var I=d,X=I.rangeBand()/2;f=d=function(t){return I(t)+X}}else f.rangeBand?f=d:x.call(s,d);p.call(s,f),v.call(s,d)})}var j,n,i,U,W=F.scale.linear(),G="bottom",Z=6,$=3,K=null,J=0,e=!0;return j=(z=z||{}).withOuterTick?6:0,q.scale=function(t){return arguments.length?(W=t,q):W},q.orient=function(t){return arguments.length?(G=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",q):G},q.tickFormat=function(t){return arguments.length?(n=t,q):n},q.tickCentered=function(t){return arguments.length?(U=t,q):U},q.tickOffset=function(){return J},q.tickInterval=function(){var t;return(t=z.isCategory?2*J:(q.g.select("path.domain").node().getTotalLength()-2*j)/q.g.selectAll("line").size())===Infinity?0:t},q.ticks=function(){return arguments.length?(i=arguments,q):i},q.tickCulling=function(t){return arguments.length?(e=t,q):e},q.tickValues=function(t){if("function"==typeof t)K=function(){return t(W.domain())};else{if(!arguments.length)return K;K=t}return q},q}var a,d,i={version:"0.4.10"};i.generate=function(t){return new n(t)},i.chart={fn:n.prototype,internal:{fn:r.prototype,axis:{fn:s.prototype}}},a=i.chart.fn,d=i.chart.internal.fn,i.chart.internal.axis.fn,d.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},d.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=n.data_xLocaltime?e.time.format:e.time.format.utc,t.axisTimeFormat=n.axis_x_localtime?e.time.format:e.time.format.utc,t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?"left":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=undefined,t.axes.subx=e.selectAll([])},d.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},d.initWithData=function(t){var e,n,r=this,i=r.d3,a=r.config,o=!0;r.axis=new s(r),r.initPie&&r.initPie(),r.initBrush&&r.initBrush(),r.initZoom&&r.initZoom(),a.bindto?"function"==typeof a.bindto.node?r.selectChart=a.bindto:r.selectChart=i.select(a.bindto):r.selectChart=i.selectAll([]),r.selectChart.empty()&&(r.selectChart=i.select(document.createElement("div")).style("opacity",0),r.observeInserted(r.selectChart),o=!1),r.selectChart.html("").classed("c3",!0),r.data.xs={},r.data.targets=r.convertDataToTargets(t),a.data_filter&&(r.data.targets=r.data.targets.filter(a.data_filter)),a.data_hide&&r.addHiddenTargetIds(!0===a.data_hide?r.mapToIds(r.data.targets):a.data_hide),a.legend_hide&&r.addHiddenLegendIds(!0===a.legend_hide?r.mapToIds(r.data.targets):a.legend_hide),r.hasType("gauge")&&(a.legend_show=!1),r.updateSizes(),r.updateScales(),r.x.domain(i.extent(r.getXDomain(r.data.targets))),r.y.domain(r.getYDomain(r.data.targets,"y")),r.y2.domain(r.getYDomain(r.data.targets,"y2")),r.subX.domain(r.x.domain()),r.subY.domain(r.y.domain()),r.subY2.domain(r.y2.domain()),r.orgXDomain=r.x.domain(),r.brush&&r.brush.scale(r.subX),a.zoom_enabled&&r.zoom.scale(r.x),r.svg=r.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return a.onmouseover.call(r)}).on("mouseleave",function(){return a.onmouseout.call(r)}),e=r.svg.append("defs"),r.clipChart=r.appendClip(e,r.clipId),r.clipXAxis=r.appendClip(e,r.clipIdForXAxis),r.clipYAxis=r.appendClip(e,r.clipIdForYAxis),r.clipGrid=r.appendClip(e,r.clipIdForGrid),r.clipSubchart=r.appendClip(e,r.clipIdForSubchart),r.updateSvgSize(),n=r.main=r.svg.append("g").attr("transform",r.getTranslate("main")),r.initSubchart&&r.initSubchart(),r.initTooltip&&r.initTooltip(),r.initLegend&&r.initLegend(),n.append("text").attr("class",B.text+" "+B.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),r.initRegion(),r.initGrid(),n.append("g").attr("clip-path",r.clipPath).attr("class",B.chart),a.grid_lines_front&&r.initGridLines(),r.initEventRect(),r.initChartElements(),n.insert("rect",a.zoom_privileged?null:"g."+B.regions).attr("class",B.zoomRect).attr("width",r.width).attr("height",r.height).style("opacity",0).on("dblclick.zoom",null),a.axis_x_extent&&r.brush.extent(r.getDefaultExtent()),r.axis.init(),r.updateTargets(r.data.targets),o&&(r.updateDimension(),r.config.oninit.call(r),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),null==l.onresize&&(l.onresize=r.generateResize()),l.onresize.add&&(l.onresize.add(function(){a.onresize.call(r)}),l.onresize.add(function(){r.api.flush()}),l.onresize.add(function(){a.onresized.call(r)})),r.api.element=r.selectChart.node()},d.smoothLines=function(t,e){var a=this;"grid"===e&&t.each(function(){var t=a.d3.select(this),e=t.attr("x1"),n=t.attr("x2"),r=t.attr("y1"),i=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(n),y1:Math.ceil(r),y2:Math.ceil(i)})})},d.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,r=t.legend?t.getLegendWidth():0,i=t.isLegendRight||t.isLegendInset?0:n,a=t.hasArcType(),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+i+t.getCurrentPaddingBottom(),left:s+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:o+s+i+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+i,left:t.rotated_padding_left}:{top:t.currentHeight-s-i,right:NaN,bottom:o+i,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,r),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?r+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&a&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},d.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},d.showTargets=function(){var e=this;e.svg.selectAll("."+B.target).filter(function(t){
return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},d.redraw=function(t,e){var n,r,i,a,o,s,u,c,l,f,d,h,g,p,x,v,y,m,_,b,w,T,A,M,S,L,k,C,E,D=this,I=D.main,X=D.d3,F=D.config,z=D.getShapeIndices(D.isAreaType),R=D.getShapeIndices(D.isBarType),N=D.getShapeIndices(D.isLineType),Y=D.hasArcType(),O=D.filterTargetsToShow(D.data.targets),P=D.xv.bind(D);if(n=H(t=t||{},"withY",!0),r=H(t,"withSubchart",!0),i=H(t,"withTransition",!0),s=H(t,"withTransform",!1),u=H(t,"withUpdateXDomain",!1),c=H(t,"withUpdateOrgXDomain",!1),l=H(t,"withTrimXDomain",!0),g=H(t,"withUpdateXAxis",u),f=H(t,"withLegend",!1),d=H(t,"withEventRect",!0),h=H(t,"withDimension",!0),a=H(t,"withTransitionForExit",i),o=H(t,"withTransitionForAxis",i),_=i?F.transition_duration:0,b=a?_:0,w=o?_:0,e=e||D.axis.generateTransitions(w),f&&F.legend_show?D.updateLegend(D.mapToIds(D.data.targets),t,e):h&&D.updateDimension(!0),D.isCategorized()&&0===O.length&&D.x.domain([0,D.axes.x.selectAll(".tick").size()]),O.length?(D.updateXDomain(O,u,c,l),F.axis_x_tick_values||(M=D.axis.updateXAxisTickValues(O))):(D.xAxis.tickValues([]),D.subXAxis.tickValues([])),F.zoom_rescale&&!t.flow&&(k=D.x.orgDomain()),D.y.domain(D.getYDomain(O,"y",k)),D.y2.domain(D.getYDomain(O,"y2",k)),!F.axis_y_tick_values&&F.axis_y_tick_count&&D.yAxis.tickValues(D.axis.generateTickValues(D.y.domain(),F.axis_y_tick_count)),!F.axis_y2_tick_values&&F.axis_y2_tick_count&&D.y2Axis.tickValues(D.axis.generateTickValues(D.y2.domain(),F.axis_y2_tick_count)),D.axis.redraw(e,Y),D.axis.updateLabels(i),(u||g)&&O.length)if(F.axis_x_tick_culling&&M){for(S=1;S<M.length;S++)if(M.length/S<F.axis_x_tick_culling_max){L=S;break}D.svg.selectAll("."+B.axisX+" .tick text").each(function(t){var e=M.indexOf(t);0<=e&&X.select(this).style("display",e%L?"none":"block")})}else D.svg.selectAll("."+B.axisX+" .tick text").style("display","block");p=D.generateDrawArea?D.generateDrawArea(z,!1):undefined,x=D.generateDrawBar?D.generateDrawBar(R):undefined,v=D.generateDrawLine?D.generateDrawLine(N,!1):undefined,y=D.generateXYForText(z,R,N,!0),m=D.generateXYForText(z,R,N,!1),n&&(D.subY.domain(D.getYDomain(O,"y")),D.subY2.domain(D.getYDomain(O,"y2"))),D.tooltip.style("display","none"),D.updateXgridFocus(),I.select("text."+B.text+"."+B.empty).attr("x",D.width/2).attr("y",D.height/2).text(F.data_empty_label_text).transition().style("opacity",O.length?0:1),D.updateGrid(_),D.updateRegion(_),D.updateBar(b),D.updateLine(b),D.updateArea(b),D.updateCircle(),D.hasDataLabel()&&D.updateText(b),D.redrawArc&&D.redrawArc(_,b,s),D.redrawSubchart&&D.redrawSubchart(r,e,_,b,z,R,N),I.selectAll("."+B.selectedCircles).filter(D.isBarType.bind(D)).selectAll("circle").remove(),F.interaction_enabled&&!t.flow&&d&&(D.redrawEventRect(),D.updateZoom&&D.updateZoom()),D.updateCircleY(),C=(D.config.axis_rotated?D.circleY:D.circleX).bind(D),E=(D.config.axis_rotated?D.circleX:D.circleY).bind(D),t.flow&&(A=D.generateFlow({targets:O,flow:t.flow,duration:t.flow.duration,drawBar:x,drawLine:v,drawArea:p,cx:C,cy:E,xv:P,xForText:y,yForText:m})),(_||A)&&D.isTabVisible()?X.transition().duration(_).each(function(){var e=[];[D.redrawBar(x,!0),D.redrawLine(v,!0),D.redrawArea(p,!0),D.redrawCircle(C,E,!0),D.redrawText(y,m,t.flow,!0),D.redrawRegion(!0),D.redrawGrid(!0)].forEach(function(t){t.forEach(function(t){e.push(t)})}),T=D.generateWait(),e.forEach(function(t){T.add(t)})}).call(T,function(){A&&A(),F.onrendered&&F.onrendered.call(D)}):(D.redrawBar(x),D.redrawLine(v),D.redrawArea(p),D.redrawCircle(C,E),D.redrawText(y,m,t.flow),D.redrawRegion(),D.redrawGrid(),F.onrendered&&F.onrendered.call(D)),D.mapToIds(D.data.targets).forEach(function(t){D.withoutFadeIn[t]=!0})},d.updateAndRedraw=function(t){var e,n=this,r=n.config;(t=t||{}).withTransition=H(t,"withTransition",!0),t.withTransform=H(t,"withTransform",!1),t.withLegend=H(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=H(t,"withTransitionForTransform",t.withTransition),n.updateSizes(),t.withLegend&&r.legend_show||(e=n.axis.generateTransitions(t.withTransitionForAxis?r.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(t.withTransitionForTransform,e)),n.redraw(t,e)},d.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},d.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},d.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},d.isCustomX=function(){var t=this,e=t.config;return!t.isTimeSeries()&&(e.data_x||L(e.data_xs))},d.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},d.getTranslate=function(t){var e,n,r=this,i=r.config;return"main"===t?(e=g(r.margin.left),n=g(r.margin.top)):"context"===t?(e=g(r.margin2.left),n=g(r.margin2.top)):"legend"===t?(e=r.margin3.left,n=r.margin3.top):"x"===t?(e=0,n=i.axis_rotated?0:r.height):"y"===t?(e=0,n=i.axis_rotated?r.height:0):"y2"===t?(e=i.axis_rotated?0:r.width,n=i.axis_rotated?1:0):"subx"===t?(e=0,n=i.axis_rotated?0:r.height2):"arc"===t&&(e=r.arcWidth/2,n=r.arcHeight/2),"translate("+e+","+n+")"},d.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},d.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},d.opacityForCircle=function(t){var e=this.config.point_show?1:0;return S(t.value)?this.isScatterType(t)?.5:e:0},d.opacityForText=function(){return this.hasDataLabel()?1:0},d.xx=function(t){return t?this.x(t.x):null},d.xv=function(t){var e=this,n=t.value;return e.isTimeSeries()?n=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(n=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(n))},d.yv=function(t){var e=this,n=t.axis&&"y2"===t.axis?e.y2:e.y;return Math.ceil(n(t.value))},d.subxx=function(t){return t?this.subX(t.x):null},d.transformMain=function(t,e){var n,r,i,a=this;e&&e.axisX?n=e.axisX:(n=a.main.select("."+B.axisX),t&&(n=n.transition())),e&&e.axisY?r=e.axisY:(r=a.main.select("."+B.axisY),t&&(r=r.transition())),e&&e.axisY2?i=e.axisY2:(i=a.main.select("."+B.axisY2),t&&(i=i.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),n.attr("transform",a.getTranslate("x")),r.attr("transform",a.getTranslate("y")),i.attr("transform",a.getTranslate("y2")),a.main.select("."+B.chartArcs).attr("transform",a.getTranslate("arc"))},d.transformAll=function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)},d.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .background");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.svg.select("."+B.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px")},d.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},d.observeInserted=function(e){var n,r=this;"undefined"!=typeof MutationObserver?(n=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&&t.previousSibling&&(n.disconnect(),r.intervalForObserveInserted=l.setInterval(function(){e.node().parentNode&&(l.clearInterval(r.intervalForObserveInserted),r.updateDimension(),r.config.oninit.call(r),r.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0}):l.console.error("MutationObserver not defined.")},d.generateResize=function(){function t(){e.forEach(function(t){t()})}var e=[];return t.add=function(t){e.push(t)},t},d.endall=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){--n||e.apply(this,arguments)})},d.generateWait=function(){var i=[],t=function(t,e){var r=setInterval(function(){var n=0;i.forEach(function(t){if(t.empty())n+=1;else try{t.transition()}catch(e){n+=1}}),n===i.length&&(clearInterval(r),e&&e())},10)};return t.add=function(t){i.push(t)},t},d.parseDate=function(t){var e,n=this;return t instanceof Date?e=t:"string"==typeof t?e=n.dataTimeFormat(n.config.data_xFormat).parse(t):"number"!=typeof t&&isNaN(t)||(e=new Date(+t)),e&&!isNaN(+e)||l.console.error("Failed to parse x '"+t+"' to Date object"),e},d.isTabVisible=function(){var t;return"undefined"!=typeof document.hidden?t="hidden":"undefined"!=typeof document.mozHidden?t="mozHidden":"undefined"!=typeof document.msHidden?t="msHidden":"undefined"!=typeof document.webkitHidden&&(t="webkitHidden"),!document[t]},d.getDefaultConfig=function(){var e={bindto:"#chart",size_width:undefined,size_height:undefined,padding_left:undefined,padding_right:undefined,padding_top:undefined,padding_bottom:undefined,zoom_enabled:!1,zoom_extent:undefined,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:undefined,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:undefined,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:undefined,data_colors:{},data_hide:!1,data_filter:undefined,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:undefined,data_json:undefined,data_rows:undefined,data_columns:undefined,data_mimeType:undefined,data_keys:undefined,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:undefined,legend_item_onclick:undefined,legend_item_onmouseover:undefined,legend_item_onmouseout:undefined,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:undefined,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:undefined,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:undefined,axis_x_min:undefined,axis_x_padding:{},axis_x_height:undefined,axis_x_extent:undefined,axis_x_label:{},axis_y_show:!0,axis_y_type:undefined,axis_y_max:undefined,axis_y_min:undefined,axis_y_inverted:!1,axis_y_center:undefined,axis_y_inner:undefined,axis_y_label:{},axis_y_tick_format:undefined,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:undefined,axis_y_tick_time_value:undefined,axis_y_tick_time_interval:undefined,axis_y_padding:{},axis_y_default:undefined,axis_y2_show:!1,axis_y2_max:undefined,axis_y2_min:undefined,axis_y2_inverted:!1,axis_y2_center:undefined,axis_y2_inner:undefined,axis_y2_label:{},axis_y2_tick_format:undefined,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:undefined,axis_y2_padding:{},axis_y2_default:undefined,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:undefined,point_select_r:undefined,line_connectNull:!1,line_step_type:"step",bar_width:undefined,bar_width_ratio:.6,bar_width_max:undefined,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:undefined,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:undefined,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:undefined,gauge_width:undefined,donut_label_show:!0,donut_label_format:undefined,donut_label_threshold:.05,donut_width:undefined,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:undefined,tooltip_format_name:undefined,tooltip_format_value:undefined,tooltip_position:undefined,tooltip_contents:function(t,e,n,r){return this.getTooltipContent?this.getTooltipContent(t,e,n,r):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},d.additionalConfig={},d.loadConfig=function(e){function n(){var t=i.shift();return t&&r&&"object"==typeof r&&t in r?(r=r[t],n()):t?undefined:r}var r,i,a,o=this.config;Object.keys(o).forEach(function(t){r=e,i=t.split("_"),a=n(),X(a)&&(o[t]=a)})},d.getScale=function(t,e,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([t,e])},d.getX=function(t,e,n,r){var i,a=this,o=a.getScale(t,e,a.isTimeSeries()),s=n?o.domain(n):o;for(i in o=a.isCategorized()?(r=r||function(){return 0},function(t,e){var n=s(t)+r(t);return e?n:Math.ceil(n)}):function(t,e){var n=s(t);return e?n:Math.ceil(n)},s)o[i]=s[i];return o.orgDomain=function(){return s.domain()},a.isCategorized()&&(o.domain=function(t){return arguments.length?(s.domain(t),o):[(t=this.orgDomain())[0],t[1]+1]}),o},d.getY=function(t,e,n){var r=this.getScale(t,e,this.isTimeSeriesY());return n&&r.domain(n),r},d.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},d.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},d.updateScales=function(){var e=this,t=e.config,n=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?undefined:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,n?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,n?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,n?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,n?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),n||(e.brush&&e.brush.scale(e.subX),t.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},d.getYDomainMin=function(t){var e,n,r,i,a,o,s=this,u=s.config,c=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0<u.data_groups.length)for(o=s.hasNegativeValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(i=u.data_groups[e].filter(function(t){return 0<=c.indexOf(t)})).length)for(r=i[0],o&&l[r]&&l[r].forEach(function(t,e){l[r][e]=t<0?t:0}),n=1;n<i.length;n++)a=i[n],l[a]&&l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(r)||!l[r]||o&&0<+t||(l[r][e]+=+t)});return s.d3.min(Object.keys(l).map(function(t){return s.d3.min(l[t])}))},d.getYDomainMax=function(t){var e,n,r,i,a,o,s=this,u=s.config,c=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0<u.data_groups.length)for(o=s.hasPositiveValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(i=u.data_groups[e].filter(function(t){return 0<=c.indexOf(t)})).length)for(r=i[0],o&&l[r]&&l[r].forEach(function(t,e){l[r][e]=0<t?t:0}),n=1;n<i.length;n++)a=i[n],l[a]&&l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(r)||!l[r]||o&&+t<0||(l[r][e]+=+t)});return s.d3.max(Object.keys(l).map(function(t){return s.d3.max(l[t])}))},d.getYDomain=function(t,e,n){var r,i,a,o,s,u,c,l,f,d,h=this,g=h.config,p=t.filter(function(t){return h.axis.getId(t.id)===e}),x=n?h.filterByXDomain(p,n):p,v="y2"===e?g.axis_y2_min:g.axis_y_min,y="y2"===e?g.axis_y2_max:g.axis_y_max,m=h.getYDomainMin(x),_=h.getYDomainMax(x),b="y2"===e?g.axis_y2_center:g.axis_y_center,w=h.hasType("bar",x)&&g.bar_zerobased||h.hasType("area",x)&&g.area_zerobased,T="y2"===e?g.axis_y2_inverted:g.axis_y_inverted,A=h.hasDataLabel()&&g.axis_rotated,M=h.hasDataLabel()&&!g.axis_rotated;return m=S(v)?v:S(y)?m<y?m:y-10:m,_=S(y)?y:S(v)?v<_?_:v+10:_,0===x.length?"y2"===e?h.y2.domain():h.y.domain():(isNaN(m)&&(m=0),isNaN(_)&&(_=m),m===_&&(m<0?_=0:m=0),f=0<=m&&0<=_,d=m<=0&&_<=0,(S(v)&&f||S(y)&&d)&&(w=!1),w&&(f&&(m=0),d&&(_=0)),a=o=.1*(i=Math.abs(_-m)),void 0!==b&&(_=b+(s=Math.max(Math.abs(m),Math.abs(_))),m=b-s),A?(u=h.getDataLabelLength(m,_,"width"),c=z(h.y.range()),a+=i*((l=[u[0]/c,u[1]/c])[1]/(1-l[0]-l[1])),o+=i*(l[0]/(1-l[0]-l[1]))):M&&(u=h.getDataLabelLength(m,_,"height"),a+=h.axis.convertPixelsToAxisPadding(u[1],i),o+=h.axis.convertPixelsToAxisPadding(u[0],i)),"y"===e&&L(g.axis_y_padding)&&(a=h.axis.getPadding(g.axis_y_padding,"top",a,i),o=h.axis.getPadding(g.axis_y_padding,"bottom",o,i)),"y2"===e&&L(g.axis_y2_padding)&&(a=h.axis.getPadding(g.axis_y2_padding,"top",a,i),o=h.axis.getPadding(g.axis_y2_padding,"bottom",o,i)),w&&(f&&(o=m),d&&(a=-_)),r=[m-o,_+a],T?r.reverse():r)},d.getXDomainMin=function(t){var e=this,n=e.config;return X(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},d.getXDomainMax=function(t){var e=this,n=e.config;return X(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},d.getXDomainPadding=function(t){var e,n,r,i,a=this,o=a.config,s=t[1]-t[0];return n=a.isCategorized()?0:a.hasType("bar")?1<(e=a.getMaxDataCount())?s/(e-1)/2:.5:.01*s,"object"==typeof o.axis_x_padding&&L(o.axis_x_padding)?(r=S(o.axis_x_padding.left)?o.axis_x_padding.left:n,i=S(o.axis_x_padding.right)?o.axis_x_padding.right:n):r=i="number"==typeof o.axis_x_padding?o.axis_x_padding:n,{left:r,right:i}},d.getXDomain=function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],r=n[0],i=n[1],a=e.getXDomainPadding(n),o=0,s=0;return r-i!=0||e.isCategorized()||(i=e.isTimeSeries()?(r=new Date(.5*r.getTime()),new Date(1.5*i.getTime())):(r=0===r?1:.5*r,0===i?-1:1.5*i)),(r||0===r)&&(o=e.isTimeSeries()?new Date(r.getTime()-a.left):r-a.left),(i||0===i)&&(s=e.isTimeSeries()?new Date(i.getTime()+a.right):i+a.right),[o,s]},d.updateXDomain=function(t,e,n,r,i){var a=this,o=a.config;return n&&(a.x.domain(i||a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent(),a.subX.domain(a.x.domain()),a.brush&&a.brush.scale(a.subX)),e&&(a.x.domain(i||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.extent())),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent()),r&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},d.trimXDomain=function(t){var e=this;return t[0]<=e.orgXDomain[0]&&(t[1]=+t[1]+(e.orgXDomain[0]-t[0]),t[0]=e.orgXDomain[0]),e.orgXDomain[1]<=t[1]&&(t[0]=+t[0]-(t[1]-e.orgXDomain[1]),t[1]=e.orgXDomain[1]),t},d.isX=function(t){var e=this.config;return e.data_x&&t===e.data_x||L(e.data_xs)&&x(e.data_xs,t)},d.isNotX=function(t){return!this.isX(t)},d.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:L(e.data_xs)?e.data_xs[t]:null},d.getXValuesOfXKey=function(e,t){var n,r=this;return(t&&L(t)?r.mapToIds(t):[]).forEach(function(t){r.getXKey(t)===e&&(n=r.data.xs[t])}),n},d.getIndexByX=function(t){var e=this,n=e.filterByX(e.data.targets,t);return n.length?n[0].index:null},d.getXValue=function(t,e){var n=this;return t in n.data.xs&&n.data.xs[t]&&S(n.data.xs[t][e])?n.data.xs[t][e]:e},d.getOtherTargetXs=function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null},d.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},d.addXs=function(e){var n=this;Object.keys(e).forEach(function(t){n.config.data_xs[t]=e[t]})},d.hasMultipleX=function(e){return 1<this.d3.set(Object.keys(e).map(function(t){return e[t]})).size()},d.isMultipleX=function(){return L(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},d.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=e||t.id),t},d.getValueOnIndex=function(t,e){var n=t.filter(function(t){return t.index===e});return n.length?n[0]:null},d.updateTargetX=function(t,r){var i=this;t.forEach(function(n){n.values.forEach(function(t,e){t.x=i.generateTargetX(r[e],n.id,e)}),i.data.xs[n.id]=r})},d.updateTargetXs=function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},d.generateTargetX=function(t,e,n){var r=this;return r.isTimeSeries()?t?r.parseDate(t):r.parseDate(r.getXValue(e,n)):r.isCustomX()&&!r.isCategorized()?S(t)?+t:r.getXValue(e,n):n},d.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},d.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},d.getPrevX=function(t){var e=this.xs[t-1];return void 0!==e?e:null},d.getNextX=function(t){var e=this.xs[t+1];return void 0!==e?e:null},d.getMaxDataCount=function(){var t=this;return t.d3.max(t.data.targets,function(t){return t.values.length})},d.getMaxDataCountTarget=function(t){var e,n=t.length,r=0;return 1<n?t.forEach(function(t){t.values.length>r&&(r=(e=t).values.length)}):e=n?t[0]:null,e},d.getEdgeX=function(t){var e=this;return t.length?[e.d3.min(t,function(t){return t.values[0].x}),e.d3.max(t,function(t){return t.values[t.values.length-1].x})]:[0,0]},d.mapToIds=function(t){return t.map(function(t){return t.id})},d.mapToTargetIds=function(t){var e=this;return t?u(t)?[t]:t:e.mapToIds(e.data.targets)},d.hasTarget=function(t,e){var n,r=this.mapToIds(t);for(n=0;n<r.length;n++)if(r[n]===e)return!0;return!1},d.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},d.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},d.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},d.mapTargetsToUniqueXs=function(t){var e=this,n=e.d3.set(e.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return e.isTimeSeries()?n.map(function(t){return new Date(+t)}):n.map(function(t){return+t})},d.addHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},d.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},d.addHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},d.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},d.getValuesAsIdKeyed=function(t){var n={};return t.forEach(function(e){n[e.id]=[],e.values.forEach(function(t){n[e.id].push(t.value)})}),n},d.checkValueInTargets=function(t,e){var n,r,i,a=Object.keys(t);for(n=0;n<a.length;n++)for(i=t[a[n]].values,r=0;r<i.length;r++)if(e(i[r].value))return!0;return!1},d.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t<0})},d.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0<t})},d.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},d.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},d.orderTargets=function(t){var e=this,n=e.config,a=e.isOrderAsc(),r=e.isOrderDesc();return a||r?t.sort(function(t,e){var n=function(t,e){return t+Math.abs(e.value)},r=t.values.reduce(n,0),i=e.values.reduce(n,0);return a?i-r:r-i}):h(n.data_order)&&t.sort(n.data_order),t},d.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},d.filterRemoveNull=function(t){return t.filter(function(t){return S(t.value)})},d.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},d.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!=typeof t.data_labels||!L(t.data_labels))},d.getDataLabelLength=function(t,e,n){var r=this,i=[0,0],a=1.3;return r.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return r.dataLabelFormat(t.id)(t)}).each(function(t,e){i[e]=this.getBoundingClientRect()[n]*a}).remove(),i},d.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},d.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},d.findSameXOfValues=function(t,e){var n,r=t[e].x,i=[];for(n=e-1;0<=n&&r===t[n].x;n--)i.push(t[n]);for(n=e;n<t.length&&r===t[n].x;n++)i.push(t[n]);return i},d.findClosestFromTargets=function(t,e){var n,r=this;return n=t.map(function(t){return r.findClosest(t.values,e)}),r.findClosest(n,e)},d.findClosest=function(t,n){var r,i=this,a=100;return t.filter(function(t){return t&&i.isBarType(t.id)}).forEach(function(t){var e=i.main.select("."+B.bars+i.getTargetSelectorSuffix(t.id)+" ."+B.bar+"-"+t.index).node();!r&&i.isWithinBar(e)&&(r=t)}),t.filter(function(t){return t&&!i.isBarType(t.id)}).forEach(function(t){var e=i.dist(t,n);e<a&&(a=e,r=t)}),r},d.dist=function(t,e){var n=this,r=n.config,i=r.axis_rotated?1:0,a=r.axis_rotated?0:1,o=n.circleY(t,t.index),s=n.x(t.x);return Math.pow(s-e[i],2)+Math.pow(o-e[a],2)},d.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},d.updateDataAttributes=function(t,e){var n=this,r=n.config["data_"+t];return void 0===e||(Object.keys(e).forEach(function(t){r[t]=e[t]}),n.redraw({withLegend:!0})),r},d.convertUrlToData=function(t,e,r,i){var a=this,o=e||"csv";a.d3.xhr(t,function(t,e){var n;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");n="json"===o?a.convertJsonToData(JSON.parse(e.response),r):"tsv"===o?a.convertTsvToData(e.response):a.convertCsvToData(e.response),i.call(a,n)})},d.convertXsvToData=function(t,e){var n,r=e.parseRows(t);return 1===r.length?(n=[{}],r[0].forEach(function(t){n[0][t]=null})):n=e.parse(t),n},d.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)},d.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)},d.convertJsonToData=function(e,t){var i,n=this,a=[];return t?(t.x?(i=t.value.concat(t.x),n.config.data_x=t.x):i=t.value,a.push(i),e.forEach(function(n){var r=[];i.forEach(function(t){var e=w(n[t])?null:n[t];r.push(e)}),a.push(r)}),n.convertRowsToData(a)):(Object.keys(e).forEach(function(t){a.push([t].concat(e[t]))}),n.convertColumnsToData(a))},d.convertRowsToData=function(t){var e,n,r=t[0],i={},a=[];for(e=1;e<t.length;e++){for(i={},n=0;n<t[e].length;n++){if(w(t[e][n]))throw new Error("Source data is missing a component at ("+e+","+n+")!");i[r[n]]=t[e][n]}a.push(i)}return a},d.convertColumnsToData=function(t){var e,n,r,i=[];for(e=0;e<t.length;e++)for(r=t[e][0],n=1;n<t[e].length;n++){if(w(i[n-1])&&(i[n-1]={}),w(t[e][n]))throw new Error("Source data is missing a component at ("+e+","+n+")!");i[n-1][r]=t[e][n]}return i},d.convertDataToTargets=function(t,r){var e,s=this,u=s.config,n=s.d3.keys(t[0]).filter(s.isNotX,s),i=s.d3.keys(t[0]).filter(s.isX,s);return n.forEach(function(n){var e=s.getXKey(n);s.isCustomX()||s.isTimeSeries()?0<=i.indexOf(e)?s.data.xs[n]=(r&&s.data.xs[n]?s.data.xs[n]:[]).concat(t.map(function(t){return t[e]}).filter(S).map(function(t,e){return s.generateTargetX(t,n,e)})):u.data_x?s.data.xs[n]=s.getOtherTargetXs():L(u.data_xs)&&(s.data.xs[n]=s.getXValuesOfXKey(e,s.data.targets)):s.data.xs[n]=t.map(function(t,e){return e})}),n.forEach(function(t){if(!s.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),(e=n.map(function(i,a){var o=u.data_idConverter(i);return{id:o,id_org:i,values:t.map(function(t,e){var n=t[s.getXKey(i)],r=s.generateTargetX(n,i,e);return s.isCustomX()&&s.isCategorized()&&0===a&&n&&(0===e&&(u.axis_x_categories=[]),u.axis_x_categories.push(n)),(w(t[i])||s.data.xs[i].length<=e)&&(r=undefined),{x:r,value:null===t[i]||isNaN(t[i])?null:+t[i],id:o}}).filter(function(t){return X(t.x)})}})).forEach(function(t){var e;u.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:Infinity)-(e.x||0===e.x?e.x:Infinity)})),e=0,t.values.forEach(function(t){t.index=e++}),s.data.xs[t.id].sort(function(t,e){return t-e})}),u.data_type&&s.setTargetType(s.mapToIds(e).filter(function(t){return!(t in u.data_types)}),u.data_type),e.forEach(function(t){s.addCache(t.id_org,t)}),e},d.load=function(n,r){var i=this;n&&(r.filter&&(n=n.filter(r.filter)),(r.type||r.types)&&n.forEach(function(t){var e=r.types&&r.types[t.id]?r.types[t.id]:r.type;i.setTargetType(t.id,e)}),i.data.targets.forEach(function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}}),i.data.targets=i.data.targets.concat(n)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.done&&r.done()},d.loadFromArgs=function(e){var n=this;e.data?n.load(n.convertDataToTargets(e.data),e):e.url?n.convertUrlToData(e.url,e.mimeType,e.keys,function(t){n.load(n.convertDataToTargets(t),e)}):e.json?n.load(n.convertDataToTargets(n.convertJsonToData(e.json,e.keys)),e):e.rows?n.load(n.convertDataToTargets(n.convertRowsToData(e.rows)),e):e.columns?n.load(n.convertDataToTargets(n.convertColumnsToData(e.columns)),e):n.load(null,e)},d.unload=function(t,e){var n=this;e||(e=function(){}),(t=t.filter(function(t){return n.hasTarget(n.data.targets,t)}))&&0!==t.length?(n.svg.selectAll(t.map(function(t){return n.selectorTarget(t)})).transition().style("opacity",0).remove().call(n.endall,e),t.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll("."+B.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})):e()},d.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},d.initEventRect=function(){this.main.select("."+B.chart).append("g").attr("class",B.eventRects).style("fill-opacity",0)},d.redrawEventRect=function(){var t,e,n=this,r=n.config,i=n.isMultipleX(),a=n.main.select("."+B.eventRects).style("cursor",r.zoom_enabled?r.axis_rotated?"ns-resize":"ew-resize":null).classed(B.eventRectsMultiple,i).classed(B.eventRectsSingle,!i);a.selectAll("."+B.eventRect).remove(),n.eventRect=a.selectAll("."+B.eventRect),i?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(e=n.getMaxDataCountTarget(n.data.targets),a.datum(e?e.values:[]),n.eventRect=a.selectAll("."+B.eventRect),t=n.eventRect.data(function(t){return t}),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())},d.updateEventRect=function(t){var e,n,r,i,a,o,s=this,u=s.config;t=t||s.eventRect.data(function(t){return t}),i=s.isMultipleX()?(n=e=0,r=s.width,s.height):(o=!s.isCustomX()&&!s.isTimeSeries()||s.isCategorized()?(a=s.getEventRectWidth(),function(t){return s.x(t.x)-a/2}):(s.updateXs(),a=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index);return null===e&&null===n?u.axis_rotated?s.height:s.width:(null===e&&(e=s.x.domain()[0]),null===n&&(n=s.x.domain()[1]),Math.max(0,(s.x(n)-s.x(e))/2))},function(t){
var e=s.getPrevX(t.index),n=s.getNextX(t.index),r=s.data.xs[t.id][t.index];return null===e&&null===n?0:(null===e&&(e=s.x.domain()[0]),(s.x(r)+s.x(e))/2)}),e=u.axis_rotated?0:o,n=u.axis_rotated?o:0,r=u.axis_rotated?s.width:a,u.axis_rotated?a:s.height),t.attr("class",s.classEvent.bind(s)).attr("x",e).attr("y",n).attr("width",r).attr("height",i)},d.generateEventRectsForSingleX=function(t){var i=this,a=i.d3,o=i.config;t.append("rect").attr("class",i.classEvent.bind(i)).style("cursor",o.data_selection_enabled&&o.data_selection_grouped?"pointer":null).on("mouseover",function(t){var e=t.index;i.dragging||i.flowing||i.hasArcType()||(o.point_focus_expand_enabled&&i.expandCircles(e,null,!0),i.expandBars(e,null,!0),i.main.selectAll("."+B.shape+"-"+e).each(function(t){o.data_onmouseover.call(i.api,t)}))}).on("mouseout",function(t){var e=t.index;i.config&&(i.hasArcType()||(i.hideXGridFocus(),i.hideTooltip(),i.unexpandCircles(),i.unexpandBars(),i.main.selectAll("."+B.shape+"-"+e).each(function(t){o.data_onmouseout.call(i.api,t)})))}).on("mousemove",function(t){var e,n=t.index,r=i.svg.select("."+B.eventRect+"-"+n);i.dragging||i.flowing||i.hasArcType()||(i.isStepType(t)&&"step-after"===i.config.line_step_type&&a.mouse(this)[0]<i.x(i.getXValue(t.id,n))&&(n-=1),e=i.filterTargetsToShow(i.data.targets).map(function(t){return i.addName(i.getValueOnIndex(t.values,n))}),o.tooltip_grouped&&(i.showTooltip(e,this),i.showXGridFocus(e)),(!o.tooltip_grouped||o.data_selection_enabled&&!o.data_selection_grouped)&&i.main.selectAll("."+B.shape+"-"+n).each(function(){a.select(this).classed(B.EXPANDED,!0),o.data_selection_enabled&&r.style("cursor",o.data_selection_grouped?"pointer":null),o.tooltip_grouped||(i.hideXGridFocus(),i.hideTooltip(),o.data_selection_grouped||(i.unexpandCircles(n),i.unexpandBars(n)))}).filter(function(t){return i.isWithinShape(this,t)}).each(function(t){o.data_selection_enabled&&(o.data_selection_grouped||o.data_selection_isselectable(t))&&r.style("cursor","pointer"),o.tooltip_grouped||(i.showTooltip([t],this),i.showXGridFocus([t]),o.point_focus_expand_enabled&&i.expandCircles(n,t.id,!0),i.expandBars(n,t.id,!0))}))}).on("click",function(t){var e=t.index;!i.hasArcType()&&i.toggleShape&&(i.cancelClick?i.cancelClick=!1:(i.isStepType(t)&&"step-after"===o.line_step_type&&a.mouse(this)[0]<i.x(i.getXValue(t.id,e))&&(e-=1),i.main.selectAll("."+B.shape+"-"+e).each(function(t){(o.data_selection_grouped||i.isWithinShape(this,t))&&(i.toggleShape(this,t,e),i.config.data_onclick.call(i.api,t,this))})))}).call(o.data_selection_draggable&&i.drag?a.behavior.drag().origin(Object).on("drag",function(){i.drag(a.mouse(this))}).on("dragstart",function(){i.dragstart(a.mouse(this))}).on("dragend",function(){i.dragend()}):function(){})},d.generateEventRectsForMultipleXs=function(t){function i(){a.svg.select("."+B.eventRect).style("cursor",null),a.hideXGridFocus(),a.hideTooltip(),a.unexpandCircles(),a.unexpandBars()}var a=this,o=a.d3,s=a.config;t.append("rect").attr("x",0).attr("y",0).attr("width",a.width).attr("height",a.height).attr("class",B.eventRect).on("mouseout",function(){a.config&&(a.hasArcType()||i())}).on("mousemove",function(){var t,e,n,r=a.filterTargetsToShow(a.data.targets);a.dragging||a.hasArcType(r)||(t=o.mouse(this),e=a.findClosestFromTargets(r,t),!a.mouseover||e&&e.id===a.mouseover.id||(s.data_onmouseout.call(a.api,a.mouseover),a.mouseover=undefined),e?(n=(a.isScatterType(e)||!s.tooltip_grouped?[e]:a.filterByX(r,e.x)).map(function(t){return a.addName(t)}),a.showTooltip(n,this),s.point_focus_expand_enabled&&a.expandCircles(e.index,e.id,!0),a.expandBars(e.index,e.id,!0),a.showXGridFocus(n),(a.isBarType(e.id)||a.dist(e,t)<100)&&(a.svg.select("."+B.eventRect).style("cursor","pointer"),a.mouseover||(s.data_onmouseover.call(a.api,e),a.mouseover=e))):i())}).on("click",function(){var t,e,n=a.filterTargetsToShow(a.data.targets);a.hasArcType(n)||(t=o.mouse(this),(e=a.findClosestFromTargets(n,t))&&(a.isBarType(e.id)||a.dist(e,t)<100)&&a.main.selectAll("."+B.shapes+a.getTargetSelectorSuffix(e.id)).selectAll("."+B.shape+"-"+e.index).each(function(){(s.data_selection_grouped||a.isWithinShape(this,e))&&(a.toggleShape(this,e,e.index),a.config.data_onclick.call(a.api,e,this))}))}).call(s.data_selection_draggable&&a.drag?o.behavior.drag().origin(Object).on("drag",function(){a.drag(o.mouse(this))}).on("dragstart",function(){a.dragstart(o.mouse(this))}).on("dragend",function(){a.dragend()}):function(){})},d.dispatchEvent=function(t,e,n){var r=this,i="."+B.eventRect+(r.isMultipleX()?"":"-"+e),a=r.main.select(i).node(),o=a.getBoundingClientRect(),s=o.left+(n?n[0]:0),u=o.top+(n?n[1]:0),c=document.createEvent("MouseEvents");c.initMouseEvent(t,!0,!0,l,0,s,u,s,u,!1,!1,!1,!1,0,null),a.dispatchEvent(c)},d.getCurrentWidth=function(){var t=this,e=t.config;return e.size_width?e.size_width:t.getParentWidth()},d.getCurrentHeight=function(){var t=this,e=t.config,n=e.size_height?e.size_height:t.getParentHeight();return 0<n?n:320/(t.hasType("gauge")?2:1)},d.getCurrentPaddingTop=function(){var t=this.config;return S(t.padding_top)?t.padding_top:0},d.getCurrentPaddingBottom=function(){var t=this.config;return S(t.padding_bottom)?t.padding_bottom:0},d.getCurrentPaddingLeft=function(t){var e=this,n=e.config;return S(n.padding_left)?n.padding_left:n.axis_rotated?n.axis_x_show?Math.max(c(e.getAxisWidthByAxisId("x",t)),40):1:!n.axis_y_show||n.axis_y_inner?e.axis.getYAxisLabelPosition().isOuter?30:1:c(e.getAxisWidthByAxisId("y",t))},d.getCurrentPaddingRight=function(){var t=this,e=t.config,n=10,r=t.isLegendRight?t.getLegendWidth()+20:0;return S(e.padding_right)?e.padding_right+1:e.axis_rotated?n+r:!e.axis_y2_show||e.axis_y2_inner?2+r+(t.axis.getY2AxisLabelPosition().isOuter?20:0):c(t.getAxisWidthByAxisId("y2"))+r},d.getParentRectValue=function(t){for(var e,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(r){"width"===t&&(e=n.offsetWidth)}if(e)break;n=n.parentNode}return e},d.getParentWidth=function(){return this.getParentRectValue("width")},d.getParentHeight=function(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?+t.replace("px",""):0},d.getSvgLeft=function(t){var e=this,n=e.config,r=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,i=n.axis_rotated?B.axisX:B.axisY,a=e.main.select("."+i).node(),o=a&&r?a.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),u=e.hasArcType(),c=o.right-s.left-(u?0:e.getCurrentPaddingLeft(t));return 0<c?c:0},d.getAxisWidthByAxisId=function(t,e){var n=this,r=n.axis.getLabelPositionById(t);return n.axis.getMaxTickWidth(t,e)+(r.isInner?20:40)},d.getHorizontalAxisHeight=function(t){var e=this,n=e.config,r=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate&&(r=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),r+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},d.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},d.getShapeIndices=function(t){var e,n,r=this,i=r.config,a={},o=0;return r.filterTargetsToShow(r.data.targets.filter(t,r)).forEach(function(t){for(e=0;e<i.data_groups.length;e++)if(!(i.data_groups[e].indexOf(t.id)<0))for(n=0;n<i.data_groups[e].length;n++)if(i.data_groups[e][n]in a){a[t.id]=a[i.data_groups[e][n]];break}w(a[t.id])&&(a[t.id]=o++)}),a.__max__=o-1,a},d.getShapeX=function(n,r,i,t){var e=this,a=t?e.subX:e.x;return function(t){var e=t.id in i?i[t.id]:0;return t.x||0===t.x?a(t.x)-n*(r/2-e):0}},d.getShapeY=function(e){var n=this;return function(t){return(e?n.getSubYScale(t.id):n.getYScale(t.id))(t.value)}},d.getShapeOffset=function(t,s,e){var u=this,c=u.orderTargets(u.filterTargetsToShow(u.data.targets.filter(t,u))),l=c.map(function(t){return t.id});return function(n,r){var i=e?u.getSubYScale(n.id):u.getYScale(n.id),a=i(0),o=a;return c.forEach(function(t){var e=u.isStepType(n)?u.convertValuesToStep(t.values):t.values;t.id!==n.id&&s[t.id]===s[n.id]&&l.indexOf(t.id)<l.indexOf(n.id)&&0<=e[r].value*n.value&&(o+=i(e[r].value)-a)}),o}},d.isWithinShape=function(t,e){var n,r=this,i=r.d3.select(t);return r.isTargetToShow(e.id)?"circle"===t.nodeName?n=r.isStepType(e)?r.isWithinStep(t,r.getYScale(e.id)(e.value)):r.isWithinCircle(t,1.5*r.pointSelectR(e)):"path"===t.nodeName&&(n=!i.classed(B.bar)||r.isWithinBar(t)):n=!1,n},d.getInterpolate=function(t){var e=this;return e.isSplineType(t)?"cardinal":e.isStepType(t)?e.config.line_step_type:"linear"},d.initLine=function(){this.main.select("."+B.chart).append("g").attr("class",B.chartLines)},d.updateTargetsForLine=function(t){var e,n=this,r=n.config,i=n.classChartLine.bind(n),a=n.classLines.bind(n),o=n.classAreas.bind(n),s=n.classCircles.bind(n),u=n.classFocus.bind(n);(e=n.main.select("."+B.chartLines).selectAll("."+B.chartLine).data(t).attr("class",function(t){return i(t)+u(t)}).enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none")).append("g").attr("class",a),e.append("g").attr("class",o),e.append("g").attr("class",function(t){return n.generateClass(B.selectedCircles,t.id)}),e.append("g").attr("class",s).style("cursor",function(t){return r.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(e){n.main.selectAll("."+B.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+B.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},d.updateLine=function(t){var e=this;e.mainLine=e.main.selectAll("."+B.lines).selectAll("."+B.line).data(e.lineData.bind(e)),e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.mainLine.style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),e.mainLine.exit().transition().duration(t).style("opacity",0).remove()},d.redrawLine=function(t,e){return[(e?this.mainLine.transition():this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},d.generateDrawLine=function(t,o){var s=this,u=s.config,c=s.d3.svg.line(),n=s.generateGetLinePoints(t,o),l=o?s.getSubYScale:s.getYScale,e=function(t){return(o?s.subxx:s.xx).call(s,t)},r=function(t,e){return 0<u.data_groups.length?n(t,e)[0][1]:l.call(s,t.id)(t.value)};return c=u.axis_rotated?c.x(r).y(e):c.x(e).y(r),u.line_connectNull||(c=c.defined(function(t){return null!=t.value})),function(t){var e=u.line_connectNull?s.filterRemoveNull(t.values):t.values,n=o?s.x:s.subX,r=l.call(s,t.id),i=0,a=0;return(s.isLineType(t)?u.data_regions[t.id]?s.lineWithRegions(e,n,r,u.data_regions[t.id]):(s.isStepType(t)&&(e=s.convertValuesToStep(e)),c.interpolate(s.getInterpolate(t))(e)):(e[0]&&(i=n(e[0].x),a=r(e[0].value)),u.axis_rotated?"M "+a+" "+i:"M "+i+" "+a))||"M 0 0"}},d.generateGetLinePoints=function(t,e){var o=this,s=o.config,n=t.__max__+1,u=o.getShapeX(0,n,t,!!e),c=o.getShapeY(!!e),l=o.getShapeOffset(o.isLineType,t,!!e),f=e?o.getSubYScale:o.getYScale;return function(t,e){var n=f.call(o,t.id)(0),r=l(t,e)||n,i=u(t),a=c(t);return s.axis_rotated&&(0<t.value&&a<n||t.value<0&&n<a)&&(a=n),[[i,a-(n-r)],[i,a-(n-r)],[i,a-(n-r)],[i,a-(n-r)]]}},d.lineWithRegions=function(t,u,c,e){function n(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}function l(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}var r,i,a,o,f,s,d,h,g,p,x,v=this,y=v.config,m="M",_=v.isCategorized()?.5:0,b=[];if(X(e))for(r=0;r<e.length;r++)b[r]={},w(e[r].start)?b[r].start=t[0].x:b[r].start=v.isTimeSeries()?v.parseDate(e[r].start):e[r].start,w(e[r].end)?b[r].end=t[t.length-1].x:b[r].end=v.isTimeSeries()?v.parseDate(e[r].end):e[r].end;for(p=y.axis_rotated?function(t){return c(t.value)}:function(t){return u(t.x)},x=y.axis_rotated?function(t){return u(t.x)}:function(t){return c(t.value)},a=v.isTimeSeries()?function(t,e,n,r){var i=t.x.getTime(),a=e.x-t.x,o=new Date(i+a*n),s=new Date(i+a*(n+r));return l(y.axis_rotated?[[c(f(n)),u(o)],[c(f(n+r)),u(s)]]:[[u(o),c(f(n))],[u(s),c(f(n+r))]])}:function(t,e,n,r){return l(y.axis_rotated?[[c(f(n),!0),u(o(n))],[c(f(n+r),!0),u(o(n+r))]]:[[u(o(n),!0),c(f(n))],[u(o(n+r),!0),c(f(n+r))]])},r=0;r<t.length;r++){if(w(b)||!n(t[r].x,b))m+=" "+p(t[r])+" "+x(t[r]);else for(o=v.getScale(t[r-1].x+_,t[r].x+_,v.isTimeSeries()),f=v.getScale(t[r-1].value,t[r].value),s=u(t[r].x)-u(t[r-1].x),d=c(t[r].value)-c(t[r-1].value),g=2*(h=2/Math.sqrt(Math.pow(s,2)+Math.pow(d,2))),i=h;i<=1;i+=g)m+=a(t[r-1],t[r],i,h);t[r].x}return m},d.updateArea=function(t){var e=this,n=e.d3;e.mainArea=e.main.selectAll("."+B.areas).selectAll("."+B.area).data(e.lineData.bind(e)),e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.mainArea.style("opacity",e.orgAreaOpacity),e.mainArea.exit().transition().duration(t).style("opacity",0).remove()},d.redrawArea=function(t,e){return[(e?this.mainArea.transition():this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},d.generateDrawArea=function(t,e){var i=this,a=i.config,o=i.d3.svg.area(),n=i.generateGetAreaPoints(t,e),r=e?i.getSubYScale:i.getYScale,s=function(t){return(e?i.subxx:i.xx).call(i,t)},u=function(t,e){return 0<a.data_groups.length?n(t,e)[0][1]:r.call(i,t.id)(i.getAreaBaseValue(t.id))},c=function(t,e){return 0<a.data_groups.length?n(t,e)[1][1]:r.call(i,t.id)(t.value)};return o=a.axis_rotated?o.x0(u).x1(c).y(s):o.x(s).y0(u).y1(c),a.line_connectNull||(o=o.defined(function(t){return null!==t.value})),function(t){var e=a.line_connectNull?i.filterRemoveNull(t.values):t.values,n=0,r=0;return(i.isAreaType(t)?(i.isStepType(t)&&(e=i.convertValuesToStep(e)),o.interpolate(i.getInterpolate(t))(e)):(e[0]&&(n=i.x(e[0].x),r=i.getYScale(t.id)(e[0].value)),a.axis_rotated?"M "+r+" "+n:"M "+n+" "+r))||"M 0 0"}},d.getAreaBaseValue=function(){return 0},d.generateGetAreaPoints=function(t,e){var o=this,s=o.config,n=t.__max__+1,u=o.getShapeX(0,n,t,!!e),c=o.getShapeY(!!e),l=o.getShapeOffset(o.isAreaType,t,!!e),f=e?o.getSubYScale:o.getYScale;return function(t,e){var n=f.call(o,t.id)(0),r=l(t,e)||n,i=u(t),a=c(t);return s.axis_rotated&&(0<t.value&&a<n||t.value<0&&n<a)&&(a=n),[[i,r],[i,a-(n-r)],[i,a-(n-r)],[i,r]]}},d.updateCircle=function(){var t=this;t.mainCircle=t.main.selectAll("."+B.circles).selectAll("."+B.circle).data(t.lineOrScatterData.bind(t)),t.mainCircle.enter().append("circle").attr("class",t.classCircle.bind(t)).attr("r",t.pointR.bind(t)).style("fill",t.color),t.mainCircle.style("opacity",t.initialOpacityForCircle.bind(t)),t.mainCircle.exit().remove()},d.redrawCircle=function(t,e,n){var r=this.main.selectAll("."+B.selectedCircle);return[(n?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",t).attr("cy",e),(n?r.transition():r).attr("cx",t).attr("cy",e)]},d.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},d.updateCircleY=function(){var t,n,e=this;0<e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),n=e.generateGetLinePoints(t),e.circleY=function(t,e){return n(t,e)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},d.getCircles=function(t,e){var n=this;return(e?n.main.selectAll("."+B.circles+n.getTargetSelectorSuffix(e)):n.main).selectAll("."+B.circle+(S(t)?"-"+t:""))},d.expandCircles=function(t,e,n){var r=this,i=r.pointExpandedR.bind(r);n&&r.unexpandCircles(),r.getCircles(t,e).classed(B.EXPANDED,!0).attr("r",i)},d.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(B.EXPANDED)}).classed(B.EXPANDED,!1).attr("r",n)},d.pointR=function(t){var e=this,n=e.config;return e.isStepType(t)?0:h(n.point_r)?n.point_r(t):n.point_r},d.pointExpandedR=function(t){var e=this,n=e.config;return n.point_focus_expand_enabled?n.point_focus_expand_r?n.point_focus_expand_r:1.75*e.pointR(t):e.pointR(t)},d.pointSelectR=function(t){var e=this,n=e.config;return n.point_select_r?n.point_select_r:4*e.pointR(t)},d.isWithinCircle=function(t,e){var n=this.d3,r=n.mouse(t),i=n.select(t),a=+i.attr("cx"),o=+i.attr("cy");return Math.sqrt(Math.pow(a-r[0],2)+Math.pow(o-r[1],2))<e},d.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},d.initBar=function(){this.main.select("."+B.chart).append("g").attr("class",B.chartBars)},d.updateTargetsForBar=function(t){var e=this,n=e.config,r=e.classChartBar.bind(e),i=e.classBars.bind(e),a=e.classFocus.bind(e);e.main.select("."+B.chartBars).selectAll("."+B.chartBar).data(t).attr("class",function(t){return r(t)+a(t)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none").append("g").attr("class",i).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null})},d.updateBar=function(t){var e=this,n=e.barData.bind(e),r=e.classBar.bind(e),i=e.initialOpacity.bind(e),a=function(t){return e.color(t.id)};e.mainBar=e.main.selectAll("."+B.bars).selectAll("."+B.bar).data(n),e.mainBar.enter().append("path").attr("class",r).style("stroke",a).style("fill",a),e.mainBar.style("opacity",i),e.mainBar.exit().transition().duration(t).style("opacity",0).remove()},d.redrawBar=function(t,e){return[(e?this.mainBar.transition():this.mainBar).attr("d",t).style("fill",this.color).style("opacity",1)]},d.getBarW=function(t,e){var n=this.config,r="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&r>n.bar_width_max?n.bar_width_max:r},d.getBars=function(t,e){var n=this;return(e?n.main.selectAll("."+B.bars+n.getTargetSelectorSuffix(e)):n.main).selectAll("."+B.bar+(S(t)?"-"+t:""))},d.expandBars=function(t,e,n){var r=this;n&&r.unexpandBars(),r.getBars(t,e).classed(B.EXPANDED,!0)},d.unexpandBars=function(t){this.getBars(t).classed(B.EXPANDED,!1)},d.generateDrawBar=function(t,e){var n=this,a=n.config,o=n.generateGetBarPoints(t,e);return function(t,e){var n=o(t,e),r=a.axis_rotated?1:0,i=a.axis_rotated?0:1;return"M "+n[0][r]+","+n[0][i]+" L"+n[1][r]+","+n[1][i]+" L"+n[2][r]+","+n[2][i]+" L"+n[3][r]+","+n[3][i]+" z"}},d.generateGetBarPoints=function(t,e){var o=this,n=e?o.subXAxis:o.xAxis,r=t.__max__+1,s=o.getBarW(n,r),u=o.getShapeX(s,r,t,!!e),c=o.getShapeY(!!e),l=o.getShapeOffset(o.isBarType,t,!!e),f=e?o.getSubYScale:o.getYScale;return function(t,e){var n=f.call(o,t.id)(0),r=l(t,e)||n,i=u(t),a=c(t);return o.config.axis_rotated&&(0<t.value&&a<n||t.value<0&&n<a)&&(a=n),[[i,r],[i,a-(n-r)],[i+s,a-(n-r)],[i+s,r]]}},d.isWithinBar=function(t){var e=this.d3.mouse(t),n=t.getBoundingClientRect(),r=t.pathSegList.getItem(0),i=t.pathSegList.getItem(1),a=Math.min(r.x,i.x),o=Math.min(r.y,i.y),s=2,u=a+n.width+s,c=o+n.height+s,l=o-s;return a-s<e[0]&&e[0]<u&&l<e[1]&&e[1]<c},d.initText=function(){var t=this;t.main.select("."+B.chart).append("g").attr("class",B.chartTexts),t.mainText=t.d3.selectAll([])},d.updateTargetsForText=function(t){var e=this,n=e.classChartText.bind(e),r=e.classTexts.bind(e),i=e.classFocus.bind(e);e.main.select("."+B.chartTexts).selectAll("."+B.chartText).data(t).attr("class",function(t){return n(t)+i(t)}).enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none").append("g").attr("class",r)},d.updateText=function(t){var r=this,e=r.config,n=r.barOrLineData.bind(r),i=r.classText.bind(r);r.mainText=r.main.selectAll("."+B.texts).selectAll("."+B.text).data(n),r.mainText.enter().append("text").attr("class",i).attr("text-anchor",function(t){return e.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return r.color(t)}).style("fill-opacity",0),r.mainText.text(function(t,e,n){return r.dataLabelFormat(t.id)(t.value,t.id,e,n)}),r.mainText.exit().transition().duration(t).style("fill-opacity",0).remove()},d.redrawText=function(t,e,n,r){return[(r?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},d.getTextRect=function(t,e){var n,r=this.d3.select("body").append("div").classed("c3",!0);return r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).text(t).each(function(){n=this.getBoundingClientRect()}),r.remove(),n},d.generateXYForText=function(t,e,n,r){var i=this,a=i.generateGetAreaPoints(t,!1),o=i.generateGetBarPoints(e,!1),s=i.generateGetLinePoints(n,!1),u=r?i.getXForText:i.getYForText;return function(t,e){var n=i.isAreaType(t)?a:i.isBarType(t)?o:s;return u.call(i,n(t,e),t,this)}},d.getXForText=function(t,e,n){var r,i,a=this,o=n.getBoundingClientRect();return r=a.config.axis_rotated?(i=a.isBarType(e)?4:6,t[2][1]+i*(e.value<0?-1:1)):a.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(r>a.width?r=a.width-o.width:r<0&&(r=4)),r},d.getYForText=function(t,e,n){var r,i=this,a=n.getBoundingClientRect();return i.config.axis_rotated?r=(t[0][0]+t[2][0]+.6*a.height)/2:(r=t[2][1],e.value<0?(r+=a.height,i.isBarType(e)&&i.isSafari()?r-=3:!i.isBarType(e)&&i.isChrome()&&(r+=3)):r+=i.isBarType(e)?-3:-6),null!==e.value||i.config.axis_rotated||(r<a.height?r=a.height:r>this.height&&(r=this.height-4)),r},d.setTargetType=function(t,e){var n=this,r=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===r.data_types[t],r.data_types[t]=e}),t||(r.data_type=e)},d.hasType=function(n,t){var e=this,r=e.config.data_types,i=!1;return(t=t||e.data.targets)&&t.length?t.forEach(function(t){var e=r[t.id];(e&&0<=e.indexOf(n)||!e&&"line"===n)&&(i=!0)}):Object.keys(r).length?Object.keys(r).forEach(function(t){r[t]===n&&(i=!0)}):i=e.config.data_type===n,i},d.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},d.isLineType=function(t){var e=this.config,n=u(t)?t:t.id;return!e.data_types[n]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])},d.isStepType=function(t){var e=u(t)?t:t.id;return 0<=["step","area-step"].indexOf(this.config.data_types[e])},d.isSplineType=function(t){var e=u(t)?t:t.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[e])},d.isAreaType=function(t){var e=u(t)?t:t.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[e])},d.isBarType=function(t){var e=u(t)?t:t.id;return"bar"===this.config.data_types[e]},d.isScatterType=function(t){var e=u(t)?t:t.id;return"scatter"===this.config.data_types[e]},d.isPieType=function(t){var e=u(t)?t:t.id;return"pie"===this.config.data_types[e]},d.isGaugeType=function(t){var e=u(t)?t:t.id;return"gauge"===this.config.data_types[e]},d.isDonutType=function(t){var e=u(t)?t:t.id;return"donut"===this.config.data_types[e]},d.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},d.lineData=function(t){return this.isLineType(t)?[t]:[]},d.arcData=function(t){return this.isArcType(t.data)?[t]:[]},d.barData=function(t){return this.isBarType(t)?t.values:[]},d.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},d.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},d.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",B.grid),e.grid_x_show&&t.grid.append("g").attr("class",B.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",B.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",B.xgridFocus).append("line").attr("class",B.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},d.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",B.grid+" "+B.gridLines),t.gridLines.append("g").attr("class",B.xgridLines),t.gridLines.append("g").attr("class",B.ygridLines),t.xgridLines=e.selectAll([])},d.updateXGrid=function(t){var e=this,n=e.config,r=e.d3,i=e.generateGridData(n.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-a},y2:function(t){return e.x(t)-a}}:{x1:function(t){return e.x(t)+a},x2:function(t){return e.x(t)+a},y1:0,y2:e.height},e.xgrid=e.main.select("."+B.xgrids).selectAll("."+B.xgrid).data(i),e.xgrid.enter().append("line").attr("class",B.xgrid),t||e.xgrid.attr(e.xgridAttr).style("opacity",function(){return+r.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1}),e.xgrid.exit().remove()},d.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+B.ygrids).selectAll("."+B.ygrid).data(n),t.ygrid.enter().append("line").attr("class",B.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.ygrid.exit().remove(),t.smoothLines(t.ygrid,"grid")},d.gridTextAnchor=function(t){return t.position?t.position:"end"},d.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},d.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},d.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},d.updateGrid=function(t){var e,n,r,i=this,a=i.main,o=i.config;i.grid.style("visibility",i.hasArcType()?"hidden":"visible"),a.select("line."+B.xgridFocus).style("visibility","hidden"),o.grid_x_show&&i.updateXGrid(),i.xgridLines=a.select("."+B.xgridLines).selectAll("."+B.xgridLine).data(o.grid_x_lines),(e=i.xgridLines.enter().append("g").attr("class",function(t){return B.xgridLine+(t["class"]?" "+t["class"]:"")})).append("line").style("opacity",0),e.append("text").attr("text-anchor",i.gridTextAnchor).attr("transform",o.axis_rotated?"":"rotate(-90)").attr("dx",i.gridTextDx).attr("dy",-5).style("opacity",0),i.xgridLines.exit().transition().duration(t).style("opacity",0).remove(),o.grid_y_show&&i.updateYGrid(),i.ygridLines=a.select("."+B.ygridLines).selectAll("."+B.ygridLine).data(o.grid_y_lines),(n=i.ygridLines.enter().append("g").attr("class",function(t){return B.ygridLine+(t["class"]?" "+t["class"]:"")})).append("line").style("opacity",0),n.append("text").attr("text-anchor",i.gridTextAnchor).attr("transform",o.axis_rotated?"rotate(-90)":"").attr("dx",i.gridTextDx).attr("dy",-5).style("opacity",0),r=i.yv.bind(i),i.ygridLines.select("line").transition().duration(t).attr("x1",o.axis_rotated?r:0).attr("x2",o.axis_rotated?r:i.width).attr("y1",o.axis_rotated?0:r).attr("y2",o.axis_rotated?i.height:r).style("opacity",1),i.ygridLines.select("text").transition().duration(t).attr("x",o.axis_rotated?i.xGridTextX.bind(i):i.yGridTextX.bind(i)).attr("y",r).text(function(t){return t.text}).style("opacity",1),i.ygridLines.exit().transition().duration(t).style("opacity",0).remove()},d.redrawGrid=function(t){var e=this,n=e.config,r=e.xv.bind(e),i=e.xgridLines.select("line"),a=e.xgridLines.select("text");return[(t?i.transition():i).attr("x1",n.axis_rotated?0:r).attr("x2",n.axis_rotated?e.width:r).attr("y1",n.axis_rotated?r:0).attr("y2",n.axis_rotated?r:e.height).style("opacity",1),(t?a.transition():a).attr("x",n.axis_rotated?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",r).text(function(t){return t.text}).style("opacity",1)]},d.showXGridFocus=function(t){var e=this,n=e.config,r=t.filter(function(t){return t&&S(t.value)}),i=e.main.selectAll("line."+B.xgridFocus),a=e.xx.bind(e);n.tooltip_show&&(e.hasType("scatter")||e.hasArcType()||(i.style("visibility","visible").data([r[0]]).attr(n.axis_rotated?"y1":"x1",a).attr(n.axis_rotated?"y2":"x2",a),e.smoothLines(i,"grid")))},d.hideXGridFocus=function(){this.main.select("line."+B.xgridFocus).style("visibility","hidden")},d.updateXgridFocus=function(){var t=this,e=t.config;t.main.select("line."+B.xgridFocus).attr("x1",e.axis_rotated?0:-10).attr("x2",e.axis_rotated?t.width:-10).attr("y1",e.axis_rotated?-10:0).attr("y2",e.axis_rotated?-10:t.height)},d.generateGridData=function(t,e){var n,r,i,a,o=this,s=[],u=o.main.select("."+B.axisX).selectAll(".tick").size();if("year"===t)for(r=(n=o.getXDomain())[0].getFullYear(),i=n[1].getFullYear(),a=r;a<=i;a++)s.push(new Date(a+"-01-01 00:00:00"));else(s=e.ticks(10)).length>u&&(s=s.filter(function(t){return(""+t).indexOf(".")<0}));return s},d.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e["class"]===t["class"])&&(n=!0)}),n}:function(){return!0}},d.removeGridLines=function(t,e){var n=this,r=n.config,i=n.getGridFilterToRemove(t),a=function(t){return!i(t)},o=e?B.xgridLines:B.ygridLines,s=e?B.xgridLine:B.ygridLine;n.main.select("."+o).selectAll("."+s).filter(i).transition().duration(r.transition_duration).style("opacity",0).remove(),e?r.grid_x_lines=r.grid_x_lines.filter(a):r.grid_y_lines=r.grid_y_lines.filter(a)},d.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",B.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&u(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},d.getTooltipContent=function(t,e,n,r){var i,a,o,s,u,c,l=this,f=l.config,d=f.tooltip_format_title||e,h=f.tooltip_format_name||function(t){return t},g=f.tooltip_format_value||n;for(a=0;a<t.length;a++)t[a]&&(t[a].value||0===t[a].value)&&(i||(o=d?d(t[a].x):t[a].x,i="<table class='"+B.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":"")),(s=g(t[a].value,t[a].ratio,t[a].id,t[a].index))!==undefined&&(u=h(t[a].name,t[a].ratio,t[a].id,t[a].index),c=l.levelColor?l.levelColor(t[a].value):r(t[a].id),i+="<tr class='"+B.tooltipName+"-"+t[a].id+"'>",i+="<td class='name'><span style='background-color:"+c+"'></span>"+u+"</td>",i+="<td class='value'>"+s+"</td>",i+="</tr>"));return i+"</table>"},d.tooltipPosition=function(t,e,n,r){var i,a,o,s,u,c=this,l=c.config,f=c.d3,d=c.hasArcType(),h=f.mouse(r);return d?(a=(c.width-(c.isLegendRight?c.getLegendWidth():0))/2+h[0],s=c.height/2+h[1]+20):(i=c.getSvgLeft(!0),s=l.axis_rotated?(o=(a=i+h[0]+100)+e,u=c.currentWidth-c.getCurrentPaddingRight(),c.x(t[0].x)+20):(o=(a=i+c.getCurrentPaddingLeft(!0)+c.x(t[0].x)+20)+e,u=i+c.currentWidth-c.getCurrentPaddingRight(),h[1]+15),u<o&&(a-=o-u+20),s+n>c.currentHeight&&(s-=n+30)),s<0&&(s=0),{top:s,left:a}},d.showTooltip=function(t,e){var n,r,i,a=this,o=a.config,s=a.hasArcType(),u=t.filter(function(t){return t&&S(t.value)}),c=o.tooltip_position||d.tooltipPosition;0!==u.length&&o.tooltip_show&&(a.tooltip.html(o.tooltip_contents.call(a,t,a.axis.getXAxisTickFormat(),a.getYFormat(s),a.color)).style("display","block"),n=a.tooltip.property("offsetWidth"),r=a.tooltip.property("offsetHeight"),i=c.call(this,u,n,r,e),a.tooltip.style("top",i.top+"px").style("left",i.left+"px"))},d.hideTooltip=function(){this.tooltip.style("display","none")},d.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},d.updateLegendWithDefaults=function(){var t=this;t.updateLegend(t.mapToIds(t.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},d.updateSizeForLegend=function(t,e){var n=this,r=n.config,i={top:n.isLegendTop?n.getCurrentPaddingTop()+r.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-r.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+r.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-r.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?i.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?i.left:0}},d.transformLegend=function(t){var e=this;(t?e.legend.transition():e.legend).attr("transform",e.getTranslate("legend"))},d.updateLegendStep=function(t){this.legendStep=t},d.updateLegendItemWidth=function(t){this.legendItemWidth=t},d.updateLegendItemHeight=function(t){this.legendItemHeight=t},
d.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},d.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},d.opacityForLegend=function(t){return t.classed(B.legendItemHidden)?null:1},d.opacityForUnfocusedLegend=function(t){return t.classed(B.legendItemHidden)?null:.3},d.toggleFocusLegend=function(e,t){var n=this;e=n.mapToTargetIds(e),n.legend.selectAll("."+B.legendItem).filter(function(t){return 0<=e.indexOf(t)}).classed(B.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))})},d.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+B.legendItem).classed(B.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},d.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},d.hideLegend=function(t){var e=this,n=e.config;n.legend_show&&p(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},d.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},d.updateLegend=function(h,t,e){function g(t,e){return y.legendItemTextBox[e]||(y.legendItemTextBox[e]=y.getTextRect(t.textContent,B.legendItem)),y.legendItemTextBox[e]}function n(t,e,n){function r(t,e){e||(i=(d-S-f)/2)<A&&(i=(d-f)/2,S=0,I++),D[t]=I,E[I]=y.isLegendInset?10:i,L[t]=S,S+=f}var i,a,o=0===n,s=n===h.length-1,u=g(t,e),c=u.width+M+(!s||y.isLegendRight||y.isLegendInset?b:0),l=u.height+_,f=y.isLegendRight||y.isLegendInset?l:c,d=y.isLegendRight||y.isLegendInset?y.getLegendHeight():y.getLegendWidth();o&&(T=w=I=S=0),!m.legend_show||y.isLegendToShow(e)?(k[e]=c,C[e]=l,(!w||w<=c)&&(w=c),(!T||T<=l)&&(T=l),a=y.isLegendRight||y.isLegendInset?T:w,m.legend_equally?(Object.keys(k).forEach(function(t){k[t]=w}),Object.keys(C).forEach(function(t){C[t]=T}),(i=(d-a*h.length)/2)<A?(I=S=0,h.forEach(function(t){r(t)})):r(e,!0)):r(e)):k[e]=C[e]=D[e]=L[e]=0}var r,i,a,o,s,u,c,l,f,d,p,x,v,y=this,m=y.config,_=4,b=10,w=0,T=0,A=10,M=15,S=0,L={},k={},C={},E=[0],D={},I=0;l=H(t=t||{},"withTransition",!0),f=H(t,"withTransitionForTransform",!0),y.isLegendInset&&(I=m.legend_inset_step?m.legend_inset_step:h.length,y.updateLegendStep(I)),o=y.isLegendRight?(r=function(t){return w*D[t]},function(t){return E[D[t]]+L[t]}):y.isLegendInset?(r=function(t){return w*D[t]+10},function(t){return E[D[t]]+L[t]}):(r=function(t){return E[D[t]]+L[t]},function(t){return T*D[t]}),i=function(t,e){return r(t,e)+14},s=function(t,e){return o(t,e)+9},a=function(t,e){return r(t,e)},u=function(t,e){return o(t,e)-5},(c=y.legend.selectAll("."+B.legendItem).data(h).enter().append("g").attr("class",function(t){return y.generateClass(B.legendItem,t)}).style("visibility",function(t){return y.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){m.legend_item_onclick?m.legend_item_onclick.call(y,t):y.d3.event.altKey?(y.api.hide(),y.api.show(t)):(y.api.toggle(t),y.isTargetToShow(t)?y.api.focus(t):y.api.revert())}).on("mouseover",function(t){y.d3.select(this).classed(B.legendItemFocused,!0),!y.transiting&&y.isTargetToShow(t)&&y.api.focus(t),m.legend_item_onmouseover&&m.legend_item_onmouseover.call(y,t)}).on("mouseout",function(t){y.d3.select(this).classed(B.legendItemFocused,!1),y.api.revert(),m.legend_item_onmouseout&&m.legend_item_onmouseout.call(y,t)})).append("text").text(function(t){return X(m.data_names[t])?m.data_names[t]:t}).each(function(t,e){n(this,t,e)}).style("pointer-events","none").attr("x",y.isLegendRight||y.isLegendInset?i:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:s),c.append("rect").attr("class",B.legendItemEvent).style("fill-opacity",0).attr("x",y.isLegendRight||y.isLegendInset?a:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:u),c.append("rect").attr("class",B.legendItemTile).style("pointer-events","none").style("fill",y.color).attr("x",y.isLegendRight||y.isLegendInset?i:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:o).attr("width",10).attr("height",10),v=y.legend.select("."+B.legendBackground+" rect"),y.isLegendInset&&0<w&&0===v.size()&&(v=y.legend.insert("g","."+B.legendItem).attr("class",B.legendBackground).append("rect")),d=y.legend.selectAll("text").data(h).text(function(t){return X(m.data_names[t])?m.data_names[t]:t}).each(function(t,e){n(this,t,e)}),(l?d.transition():d).attr("x",i).attr("y",s),p=y.legend.selectAll("rect."+B.legendItemEvent).data(h),(l?p.transition():p).attr("width",function(t){return k[t]}).attr("height",function(t){return C[t]}).attr("x",a).attr("y",u),x=y.legend.selectAll("rect."+B.legendItemTile).data(h),(l?x.transition():x).style("fill",y.color).attr("x",r).attr("y",o),v&&(l?v.transition():v).attr("height",y.getLegendHeight()-12).attr("width",w*(I+1)+10),y.legend.selectAll("."+B.legendItem).classed(B.legendItemHidden,function(t){return!y.isTargetToShow(t)}),y.updateLegendItemWidth(w),y.updateLegendItemHeight(T),y.updateLegendStep(I),y.updateSizes(),y.updateScales(),y.updateSvgSize(),y.transformAll(f,e),y.legendHasRendered=!0},t(e,s),s.prototype.init=function v(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",B.axis+" "+B.axisX).attr("clip-path",t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",B.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",B.axis+" "+B.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",B.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",B.axis+" "+B.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",B.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},s.prototype.getXAxis=function m(t,e,n,r,i,a,o){var s=this.owner,u=s.config,c={isCategory:s.isCategorized(),withOuterTick:i,tickMultiline:u.axis_x_tick_multiline,tickWidth:u.axis_x_tick_width,tickTextRotate:o?0:u.axis_x_tick_rotate,withoutTransition:a},l=f(s.d3,c).scale(t).orient(e);return s.isTimeSeries()&&r&&(r=r.map(function(t){return s.parseDate(t)})),l.tickFormat(n).tickValues(r),s.isCategorized()&&(l.tickCentered(u.axis_x_tick_centered),p(u.axis_x_tick_culling)&&(u.axis_x_tick_culling=!1)),l},s.prototype.updateXAxisTickValues=function _(t,e){var n,r=this.owner,i=r.config;return(i.axis_x_tick_fit||i.axis_x_tick_count)&&(n=this.generateTickValues(r.mapTargetsToUniqueXs(t),i.axis_x_tick_count,r.isTimeSeries())),e?e.tickValues(n):(r.xAxis.tickValues(n),r.subXAxis.tickValues(n)),n},s.prototype.getYAxis=function b(t,e,n,r,i,a){var o={withOuterTick:i,withoutTransition:a},s=this.owner,u=s.d3,c=s.config,l=f(u,o).scale(t).orient(e).tickFormat(n);return s.isTimeSeriesY()?l.ticks(u.time[c.axis_y_tick_time_value],c.axis_y_tick_time_interval):l.tickValues(r),l},s.prototype.getId=function T(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},s.prototype.getXAxisTickFormat=function A(){var e=this.owner,n=e.config,r=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(t){return t<0?t.toFixed(0):t};return n.axis_x_tick_format&&(h(n.axis_x_tick_format)?r=n.axis_x_tick_format:e.isTimeSeries()&&(r=function(t){return t?e.axisTimeFormat(n.axis_x_tick_format)(t):""})),h(r)?function(t){return r.call(e,t)}:r},s.prototype.getTickValues=function M(t,e){return t||(e?e.tickValues():undefined)},s.prototype.getXAxisTickValues=function k(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},s.prototype.getYAxisTickValues=function C(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},s.prototype.getY2AxisTickValues=function E(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},s.prototype.getLabelOptionByAxisId=function D(t){var e,n=this.owner.config;return"y"===t?e=n.axis_y_label:"y2"===t?e=n.axis_y2_label:"x"===t&&(e=n.axis_x_label),e},s.prototype.getLabelText=function I(t){var e=this.getLabelOptionByAxisId(t);return u(e)?e:e?e.text:null},s.prototype.setLabelText=function F(t,e){var n=this.owner.config,r=this.getLabelOptionByAxisId(t);u(r)?"y"===t?n.axis_y_label=e:"y2"===t?n.axis_y2_label=e:"x"===t&&(n.axis_x_label=e):r&&(r.text=e)},s.prototype.getLabelPosition=function R(t,e){var n=this.getLabelOptionByAxisId(t),r=n&&"object"==typeof n&&n.position?n.position:e;return{isInner:0<=r.indexOf("inner"),isOuter:0<=r.indexOf("outer"),isLeft:0<=r.indexOf("left"),isCenter:0<=r.indexOf("center"),isRight:0<=r.indexOf("right"),isTop:0<=r.indexOf("top"),isMiddle:0<=r.indexOf("middle"),isBottom:0<=r.indexOf("bottom")}},s.prototype.getXAxisLabelPosition=function N(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},s.prototype.getYAxisLabelPosition=function Y(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},s.prototype.getY2AxisLabelPosition=function O(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},s.prototype.getLabelPositionById=function P(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},s.prototype.textForXAxisLabel=function V(){return this.getLabelText("x")},s.prototype.textForYAxisLabel=function q(){return this.getLabelText("y")},s.prototype.textForY2AxisLabel=function j(){return this.getLabelText("y2")},s.prototype.xForAxisLabel=function U(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},s.prototype.dxForAxisLabel=function W(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},s.prototype.textAnchorForAxisLabel=function G(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},s.prototype.xForXAxisLabel=function Z(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.xForYAxisLabel=function $(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.xForY2AxisLabel=function K(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.dxForXAxisLabel=function J(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.dxForYAxisLabel=function Q(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.dxForY2AxisLabel=function tt(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.dyForXAxisLabel=function et(){var t=this.owner.config,e=this.getXAxisLabelPosition();return t.axis_rotated?e.isInner?"1.2em":-25-this.getMaxTickWidth("x"):e.isInner?"-0.5em":t.axis_x_height?t.axis_x_height-10:"3em"},s.prototype.dyForYAxisLabel=function nt(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},s.prototype.dyForY2AxisLabel=function rt(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},s.prototype.textAnchorForXAxisLabel=function it(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},s.prototype.textAnchorForYAxisLabel=function at(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},s.prototype.textAnchorForY2AxisLabel=function ot(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},s.prototype.getMaxTickWidth=function st(t,e){var n,r,i,a,o=this.owner,s=o.config,u=0;return e&&o.currentMaxTickWidths[t]||(o.svg&&(n=o.filterTargetsToShow(o.data.targets),"y"===t?(r=o.y.copy().domain(o.getYDomain(n,"y")),i=this.getYAxis(r,o.yOrient,s.axis_y_tick_format,o.yAxisTickValues,!1,!0)):"y2"===t?(r=o.y2.copy().domain(o.getYDomain(n,"y2")),i=this.getYAxis(r,o.y2Orient,s.axis_y2_tick_format,o.y2AxisTickValues,!1,!0)):(r=o.x.copy().domain(o.getXDomain(n)),i=this.getXAxis(r,o.xOrient,o.xAxisTickFormat,o.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,i)),(a=o.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(i).each(function(){o.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();u<t.width&&(u=t.width)}),a.remove()})),o.currentMaxTickWidths[t]=u<=0?o.currentMaxTickWidths[t]:u),o.currentMaxTickWidths[t]},s.prototype.updateLabels=function ut(t){var e=this.owner,n=e.main.select("."+B.axisX+" ."+B.axisXLabel),r=e.main.select("."+B.axisY+" ."+B.axisYLabel),i=e.main.select("."+B.axisY2+" ."+B.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?i.transition():i).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},s.prototype.getPadding=function ct(t,e,n,r){return S(t[e])?"ratio"===t.unit?t[e]*r:this.convertPixelsToAxisPadding(t[e],r):n},s.prototype.convertPixelsToAxisPadding=function lt(t,e){var n=this.owner;return e*(t/(n.config.axis_rotated?n.width:n.height))},s.prototype.generateTickValues=function ft(t,e,n){var r,i,a,o,s,u,c,l=t;if(e)if(1===(r=h(e)?e():e))l=[t[0]];else if(2===r)l=[t[0],t[t.length-1]];else if(2<r){for(o=r-2,i=t[0],s=((a=t[t.length-1])-i)/(o+1),l=[i],u=0;u<o;u++)c=+i+s*(u+1),l.push(n?new Date(c):c);l.push(a)}return n||(l=l.sort(function(t,e){return t-e})),l},s.prototype.generateTransitions=function dt(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},s.prototype.redraw=function ht(t,e){var n=this.owner;n.axes.x.style("opacity",e?0:1),n.axes.y.style("opacity",e?0:1),n.axes.y2.style("opacity",e?0:1),n.axes.subx.style("opacity",e?0:1),t.axisX.call(n.xAxis),t.axisY.call(n.yAxis),t.axisY2.call(n.y2Axis),t.axisSubX.call(n.subXAxis)},d.getClipPath=function(t){return"url("+(0<=l.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+t+")"},d.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},d.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},d.getAxisClipY=function(t){return t?-20:-this.margin.top},d.getXAxisClipX=function(){var t=this;return t.getAxisClipX(!t.config.axis_rotated)},d.getXAxisClipY=function(){var t=this;return t.getAxisClipY(!t.config.axis_rotated)},d.getYAxisClipX=function(){var t=this;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)},d.getYAxisClipY=function(){var t=this;return t.getAxisClipY(t.config.axis_rotated)},d.getAxisClipWidth=function(t){var e=this,n=Math.max(30,e.margin.left),r=Math.max(30,e.margin.right);return t?e.width+2+n+r:e.margin.left+20},d.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},d.getXAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(!t.config.axis_rotated)},d.getXAxisClipHeight=function(){var t=this;return t.getAxisClipHeight(!t.config.axis_rotated)},d.getYAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)},d.getYAxisClipHeight=function(){var t=this;return t.getAxisClipHeight(t.config.axis_rotated)},d.initPie=function(){var t=this,e=t.d3,n=t.config;t.pie=e.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),n.data_order||t.pie.sort(null)},d.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0},d.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},d.updateAngle=function(e){var t,n,r=this,i=r.config,a=!1,o=0,s=i.gauge_min,u=i.gauge_max;return r.pie(r.filterTargetsToShow(r.data.targets)).forEach(function(t){a||t.data.id!==e.data.id||(a=!0,(e=t).index=o),o++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),r.isGaugeType(e.data)&&(t=Math.PI/(u-s),n=e.value<s?0:e.value<u?e.value-s:u-s,e.startAngle=Math.PI/2*-1,e.endAngle=e.startAngle+t*n),a?e:null},d.getSvgArc=function(){var r=this,i=r.d3.svg.arc().outerRadius(r.radius).innerRadius(r.innerRadius),t=function(t,e){var n;return e?i(t):(n=r.updateAngle(t))?i(n):"M 0 0"};return t.centroid=i.centroid,t},d.getSvgArcExpanded=function(t){var n=this,r=n.d3.svg.arc().outerRadius(n.radiusExpanded*(t||1)).innerRadius(n.innerRadius);return function(t){var e=n.updateAngle(t);return e?r(e):"M 0 0"}},d.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},d.transformForArcLabel=function(t){var e,n,r,i,a,o=this,s=o.updateAngle(t),u="";return s&&!o.hasType("gauge")&&(e=this.svgArc.centroid(s),n=isNaN(e[0])?0:e[0],r=isNaN(e[1])?0:e[1],i=Math.sqrt(n*n+r*r),u="translate("+n*(a=o.radius&&i?(.375<36/o.radius?1.175-36/o.radius:.8)*o.radius/i:0)+","+r*a+")"),u},d.getArcRatio=function(t){var e=this.hasType("gauge")?Math.PI:2*Math.PI;return t?(t.endAngle-t.startAngle)/e:null},d.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},d.textForArcLabel=function(t){var e,n,r,i,a,o=this;return o.shouldShowArcLabel()?(n=(e=o.updateAngle(t))?e.value:null,r=o.getArcRatio(e),i=t.data.id,o.hasType("gauge")||o.meetsArcLabelThreshold(r)?(a=o.getArcLabelFormat())?a(n,r,i):o.defaultArcValueFormat(n,r):""):""},d.expandArc=function(t){var e,n=this;n.transiting?e=l.setInterval(function(){n.transiting||(l.clearInterval(e),0<n.legend.selectAll(".c3-legend-item-focused").size()&&n.expandArc(t))},10):(t=n.mapToTargetIds(t),n.svg.selectAll(n.selectorTargets(t,"."+B.chartArc)).each(function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(50).attr("d",n.svgArcExpanded).transition().duration(100).attr("d",n.svgArcExpandedSub).each(function(t){n.isDonutType(t.data)})}))},d.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+B.chartArc)).selectAll("path").transition().duration(50).attr("d",e.svgArc),e.svg.selectAll("."+B.arc).style("opacity",1))},d.shouldExpand=function(t){var e=this,n=e.config;return e.isDonutType(t)&&n.donut_expand||e.isGaugeType(t)&&n.gauge_expand||e.isPieType(t)&&n.pie_expand},d.shouldShowArcLabel=function(){var t=this,e=t.config,n=!0;return t.hasType("donut")?n=e.donut_label_show:t.hasType("pie")&&(n=e.pie_label_show),n},d.meetsArcLabelThreshold=function(t){var e=this,n=e.config;return(e.hasType("donut")?n.donut_label_threshold:n.pie_label_threshold)<=t},d.getArcLabelFormat=function(){var t=this,e=t.config,n=e.pie_label_format;return t.hasType("gauge")?n=e.gauge_label_format:t.hasType("donut")&&(n=e.donut_label_format),n},d.getArcTitle=function(){var t=this;return t.hasType("donut")?t.config.donut_title:""},d.updateTargetsForArc=function(t){var e,n=this,r=n.main,i=n.classChartArc.bind(n),a=n.classArcs.bind(n),o=n.classFocus.bind(n);(e=r.select("."+B.chartArcs).selectAll("."+B.chartArc).data(n.pie(t)).attr("class",function(t){return i(t)+o(t.data)}).enter().append("g").attr("class",i)).append("g").attr("class",a),e.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},d.initArc=function(){var t=this;t.arcs=t.main.select("."+B.chart).append("g").attr("class",B.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",B.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},d.redrawArc=function(t,e,n){var r,i=this,a=i.d3,o=i.config,s=i.main;(r=s.selectAll("."+B.arcs).selectAll("."+B.arc).data(i.arcData.bind(i))).enter().append("path").attr("class",i.classArc.bind(i)).style("fill",function(t){return i.color(t.data)}).style("cursor",function(t){return o.interaction_enabled&&o.data_selection_isselectable(t)?"pointer":null}).style("opacity",0).each(function(t){i.isGaugeType(t.data)&&(t.startAngle=t.endAngle=Math.PI/2*-1),this._current=t}),r.attr("transform",function(t){return!i.isGaugeType(t.data)&&n?"scale(0)":""}).style("opacity",function(t){return t===this._current?0:1}).on("mouseover",o.interaction_enabled?function(t){var e,n;i.transiting||(e=i.updateAngle(t),n=i.convertToArcData(e),i.expandArc(e.data.id),i.api.focus(e.data.id),i.toggleFocusLegend(e.data.id,!0),i.config.data_onmouseover(n,this))}:null).on("mousemove",o.interaction_enabled?function(t){var e=i.updateAngle(t),n=[i.convertToArcData(e)];i.showTooltip(n,this)}:null).on("mouseout",o.interaction_enabled?function(t){var e,n;i.transiting||(e=i.updateAngle(t),n=i.convertToArcData(e),i.unexpandArc(e.data.id),i.api.revert(),i.revertLegend(),i.hideTooltip(),i.config.data_onmouseout(n,this))}:null).on("click",o.interaction_enabled?function(t,e){var n=i.updateAngle(t),r=i.convertToArcData(n);i.toggleShape&&i.toggleShape(this,r,e),i.config.data_onclick.call(i.api,r,this)}:null).each(function(){i.transiting=!0}).transition().duration(t).attrTween("d",function(n){var r,t=i.updateAngle(n);return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),r=a.interpolate(this._current,t),this._current=r(0),function(t){var e=r(t);return e.data=n.data,i.getArc(e,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(t){return i.levelColor?i.levelColor(t.data.values[0].value):i.color(t.data.id)}).style("opacity",1).call(i.endall,function(){i.transiting=!1}),r.exit().transition().duration(e).style("opacity",0).remove(),s.selectAll("."+B.chartArc).select("text").style("opacity",0).attr("class",function(t){return i.isGaugeType(t.data)?B.gaugeValue:""}).text(i.textForArcLabel.bind(i)).attr("transform",i.transformForArcLabel.bind(i)).style("font-size",function(t){return i.isGaugeType(t.data)?Math.round(i.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return i.isTargetToShow(t.data.id)&&i.isArcType(t.data)?1:0}),s.select("."+B.chartArcsTitle).style("opacity",i.hasType("donut")||i.hasType("gauge")?1:0),i.hasType("gauge")&&(i.arcs.select("."+B.chartArcsBackground).attr("d",function(){var t={data:[{value:o.gauge_max}],startAngle:Math.PI/2*-1,endAngle:Math.PI/2};return i.getArc(t,!0,!0)}),i.arcs.select("."+B.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:""),i.arcs.select("."+B.chartArcsGaugeMin).attr("dx",-1*(i.innerRadius+(i.radius-i.innerRadius)/2)+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_min:""),i.arcs.select("."+B.chartArcsGaugeMax).attr("dx",i.innerRadius+(i.radius-i.innerRadius)/2+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_max:""))},d.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("path").attr("class",B.chartArcsBackground),t.append("text").attr("class",B.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",B.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",B.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},d.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},d.initRegion=function(){var t=this;t.region=t.main.append("g").attr("clip-path",t.clipPath).attr("class",B.regions)},d.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select("."+B.regions).selectAll("."+B.region).data(n.regions),e.mainRegion.enter().append("g").attr("class",e.classRegion.bind(e)).append("rect").style("fill-opacity",0),e.mainRegion.exit().transition().duration(t).style("opacity",0).remove()},d.redrawRegion=function(t){var e=this,n=e.mainRegion.selectAll("rect"),r=e.regionX.bind(e),i=e.regionY.bind(e),a=e.regionWidth.bind(e),o=e.regionHeight.bind(e);return[(t?n.transition():n).attr("x",r).attr("y",i).attr("width",a).attr("height",o).style("fill-opacity",function(t){return S(t.opacity)?t.opacity:.1})]},d.regionX=function(t){var e=this,n=e.config,r="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?n.axis_rotated&&"start"in t?r(t.start):0:n.axis_rotated?0:"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},d.regionY=function(t){var e=this,n=e.config,r="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?n.axis_rotated?0:"end"in t?r(t.end):0:n.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},d.regionWidth=function(t){var e,n=this,r=n.config,i=n.regionX(t),a="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?r.axis_rotated&&"end"in t?a(t.end):n.width:r.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width)<i?0:e-i},d.regionHeight=function(t){var e,n=this,r=n.config,i=this.regionY(t),a="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?r.axis_rotated?n.height:"start"in t?a(t.start):n.height:r.axis_rotated&&"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.height)<i?0:e-i},d.isRegionOnX=function(t){return!t.axis||"x"===t.axis},d.drag=function(t){var e,n,r,i,d,h,g,p,x=this,a=x.config,o=x.main,v=x.d3;x.hasArcType()||a.data_selection_enabled&&(a.zoom_enabled&&!x.zoom.altDomain||a.data_selection_multiple&&(e=x.dragStart[0],n=x.dragStart[1],r=t[0],i=t[1],d=Math.min(e,r),h=Math.max(e,r),g=a.data_selection_grouped?x.margin.top:Math.min(n,i),p=a.data_selection_grouped?x.height:Math.max(n,i),o.select("."+B.dragarea).attr("x",d).attr("y",g).attr("width",h-d).attr("height",p-g),o.selectAll("."+B.shapes).selectAll("."+B.shape).filter(function(t){return a.data_selection_isselectable(t)}).each(function(t,e){var n,r,i,a,o,s,u=v.select(this),c=u.classed(B.SELECTED),l=u.classed(B.INCLUDED),f=!1;if(u.classed(B.circle))n=1*u.attr("cx"),r=1*u.attr("cy"),o=x.togglePoint,f=d<n&&n<h&&g<r&&r<p;else{if(!u.classed(B.bar))return;n=(s=y(this)).x,r=s.y,i=s.width,a=s.height,o=x.togglePath,f=!(h<n||n+i<d||p<r||r+a<g)}f^l&&(u.classed(B.INCLUDED,!l),u.classed(B.SELECTED,!c),o.call(x,!c,u,t,e))})))},d.dragstart=function(t){var e=this,n=e.config;e.hasArcType()||n.data_selection_enabled&&(e.dragStart=t,e.main.select("."+B.chart).append("rect").attr("class",B.dragarea).style("opacity",.1),e.dragging=!0)},d.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+B.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+B.shape).classed(B.INCLUDED,!1),t.dragging=!1)},d.selectPoint=function(t,e,n){var r=this,i=r.config,a=(i.axis_rotated?r.circleY:r.circleX).bind(r),o=(i.axis_rotated?r.circleX:r.circleY).bind(r),s=r.pointSelectR.bind(r);i.data_onselected.call(r.api,e,t.node()),r.main.select("."+B.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll("."+B.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return r.generateClass(B.selectedCircle,n)}).attr("cx",a).attr("cy",o).attr("stroke",function(){return r.color(e)}).attr("r",function(t){return 1.4*r.pointSelectR(t)}).transition().duration(100).attr("r",s)},d.unselectPoint=function(t,e,n){var r=this;r.config.data_onunselected(e,t.node()),r.main.select("."+B.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll("."+B.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},d.togglePoint=function(t,e,n,r){t?this.selectPoint(e,n,r):this.unselectPoint(e,n,r)},d.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),t.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(e)).brighter(.75)})},d.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),t.transition().duration(100).style("fill",function(){return n.color(e)})},d.togglePath=function(t,e,n,r){t?this.selectPath(e,n,r):this.unselectPath(e,n,r)},d.getToggle=function(t,e){var n,r=this;return"circle"===t.nodeName?n=r.isStepType(e)?function(){}:r.togglePoint:"path"===t.nodeName&&(n=r.togglePath),n},d.toggleShape=function(t,e,n){var r=this,i=r.d3,a=r.config,o=i.select(t),s=o.classed(B.SELECTED),u=r.getToggle(t,e).bind(r);a.data_selection_enabled&&a.data_selection_isselectable(e)&&(a.data_selection_multiple||r.main.selectAll("."+B.shapes+(a.data_selection_grouped?r.getTargetSelectorSuffix(e.id):"")).selectAll("."+B.shape).each(function(t,e){var n=i.select(this);n.classed(B.SELECTED)&&u(!1,n.classed(B.SELECTED,!1),t,e)}),o.classed(B.SELECTED,!s),u(!s,o,e,n))},d.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on("brush",function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select("."+B.brush).call(this),this},e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}},d.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));n.style("visibility",e.subchart_show?"visible":"hidden"),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",B.chart),n.select("."+B.chart).append("g").attr("class",B.chartBars),n.select("."+B.chart).append("g").attr("class",B.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",B.brush).call(t.brush),t.axes.subx=n.append("g").attr("class",B.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis)},d.updateTargetsForSubchart=function(t){var e,n=this,r=n.context,i=n.config,a=n.classChartBar.bind(n),o=n.classBars.bind(n),s=n.classChartLine.bind(n),u=n.classLines.bind(n),c=n.classAreas.bind(n);i.subchart_show&&(r.select("."+B.chartBars).selectAll("."+B.chartBar).data(t).attr("class",a).enter().append("g").style("opacity",0).attr("class",a).append("g").attr("class",o),(e=r.select("."+B.chartLines).selectAll("."+B.chartLine).data(t).attr("class",s).enter().append("g").style("opacity",0).attr("class",s)).append("g").attr("class",u),e.append("g").attr("class",c),r.selectAll("."+B.brush+" rect").attr(i.axis_rotated?"width":"height",i.axis_rotated?n.width2:n.height2))},d.updateBarForSubchart=function(t){var e=this;e.contextBar=e.context.selectAll("."+B.bars).selectAll("."+B.bar).data(e.barData.bind(e)),e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color),e.contextBar.style("opacity",e.initialOpacity.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity",0).remove()},d.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition().duration(n):this.contextBar).attr("d",t).style("opacity",1)},d.updateLineForSubchart=function(t){var e=this;e.contextLine=e.context.selectAll("."+B.lines).selectAll("."+B.line).data(e.lineData.bind(e)),e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.contextLine.style("opacity",e.initialOpacity.bind(e)),e.contextLine.exit().transition().duration(t).style(
"opacity",0).remove()},d.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition().duration(n):this.contextLine).attr("d",t).style("opacity",1)},d.updateAreaForSubchart=function(t){var e=this,n=e.d3;e.contextArea=e.context.selectAll("."+B.areas).selectAll("."+B.area).data(e.lineData.bind(e)),e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.contextArea.style("opacity",0),e.contextArea.exit().transition().duration(t).style("opacity",0).remove()},d.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition().duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},d.redrawSubchart=function(t,e,n,r,i,a,o){var s,u,c,l=this,f=l.d3,d=l.config;l.context.style("visibility",d.subchart_show?"visible":"hidden"),d.subchart_show&&(f.event&&"zoom"===f.event.type&&l.brush.extent(l.x.orgDomain()).update(),t&&(l.brush.empty()||l.brush.extent(l.x.orgDomain()).update(),s=l.generateDrawArea(i,!0),u=l.generateDrawBar(a,!0),c=l.generateDrawLine(o,!0),l.updateBarForSubchart(n),l.updateLineForSubchart(n),l.updateAreaForSubchart(n),l.redrawBarForSubchart(u,n,n),l.redrawLineForSubchart(c,n,n),l.redrawAreaForSubchart(s,n,n)))},d.redrawForBrush=function(){var t=this,e=t.x;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,e.orgDomain())},d.transformContext=function(t,e){var n,r=this;e&&e.axisSubX?n=e.axisSubX:(n=r.context.select("."+B.axisX),t&&(n=n.transition())),r.context.attr("transform",r.getTranslate("context")),n.attr("transform",r.getTranslate("subx"))},d.getDefaultExtent=function(){var t=this,e=t.config,n=h(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;return t.isTimeSeries()&&(n=[t.parseDate(n[0]),t.parseDate(n[1])]),n},d.initZoom=function(){var e,n=this,r=n.d3,i=n.config;n.zoom=r.behavior.zoom().on("zoomstart",function(){e=r.event.sourceEvent,n.zoom.altDomain=r.event.sourceEvent.altKey?n.x.orgDomain():null,i.zoom_onzoomstart.call(n.api,r.event.sourceEvent)}).on("zoom",function(){n.redrawForZoom.call(n)}).on("zoomend",function(){var t=r.event.sourceEvent;t&&e.clientX===t.clientX&&e.clientY===t.clientY||(n.redrawEventRect(),n.updateZoom(),i.zoom_onzoomend.call(n.api,n.x.orgDomain()))}),n.zoom.scale=function(t){return i.axis_rotated?this.y(t):this.x(t)},n.zoom.orgScaleExtent=function(){var t=i.zoom_extent?i.zoom_extent:[1,10];return[t[0],Math.max(n.getMaxDataCount()/t[1],t[1])]},n.zoom.updateScaleExtent=function(){var t=z(n.x.orgDomain())/z(n.orgXDomain),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this}},d.updateZoom=function(){var t=this,e=t.config.zoom_enabled?t.zoom:function(){};t.main.select("."+B.zoomRect).call(e).on("dblclick.zoom",null),t.main.selectAll("."+B.eventRect).call(e).on("dblclick.zoom",null)},d.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,r=t.zoom,i=t.x;if(n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length){if("mousemove"===e.event.sourceEvent.type&&r.altDomain)return i.domain(r.altDomain),void r.scale(i).updateScaleExtent();t.isCategorized()&&i.orgDomain()[0]===t.orgXDomain[0]&&i.domain([t.orgXDomain[0]-1e-10,i.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0),n.zoom_onzoom.call(t.api,i.orgDomain())}},d.generateColor=function(){var t=this,e=t.config,n=t.d3,r=e.data_colors,i=L(e.color_pattern)?e.color_pattern:n.scale.category10().range(),a=e.data_color,o=[];return function(t){var e,n=t.id||t.data&&t.data.id||t;return r[n]instanceof Function?e=r[n](t):r[n]?e=r[n]:(o.indexOf(n)<0&&o.push(n),e=i[o.indexOf(n)%i.length],r[n]=e),a instanceof Function?a(e,t):e}},d.generateLevelColor=function(){var t=this.config,r=t.color_pattern,e=t.color_threshold,i="value"===e.unit,a=e.values&&e.values.length?e.values:[],o=e.max||100;return L(t.color_threshold)?function(t){var e,n=r[r.length-1];for(e=0;e<a.length;e++)if((i?t:100*t/o)<a[e]){n=r[e];break}return n}:null},d.getYFormat=function(t){var r=this,i=t&&!r.hasType("gauge")?r.defaultArcValueFormat:r.yFormat,a=t&&!r.hasType("gauge")?r.defaultArcValueFormat:r.y2Format;return function(t,e,n){return("y2"===r.axis.getId(n)?a:i).call(r,t,e)}},d.yFormat=function(t){var e=this,n=e.config;return(n.axis_y_tick_format?n.axis_y_tick_format:e.defaultValueFormat)(t)},d.y2Format=function(t){var e=this,n=e.config;return(n.axis_y2_tick_format?n.axis_y2_tick_format:e.defaultValueFormat)(t)},d.defaultValueFormat=function(t){return S(t)?+t:""},d.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},d.dataLabelFormat=function(t){var e=this.config.data_labels,n=function(t){return S(t)?+t:""};return"function"==typeof e.format?e.format:"object"==typeof e.format?e.format[t]?!0===e.format[t]?n:e.format[t]:function(){return""}:n},d.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},d.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},d.getCaches=function(t){var e,n=[];for(e=0;e<t.length;e++)t[e]in this.cache&&n.push(this.cloneTarget(this.cache[t[e]]));return n};var B=d.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};d.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)},d.classText=function(t){return this.generateClass(B.text,t.index)},d.classTexts=function(t){return this.generateClass(B.texts,t.id)},d.classShape=function(t){return this.generateClass(B.shape,t.index)},d.classShapes=function(t){return this.generateClass(B.shapes,t.id)},d.classLine=function(t){return this.classShape(t)+this.generateClass(B.line,t.id)},d.classLines=function(t){return this.classShapes(t)+this.generateClass(B.lines,t.id)},d.classCircle=function(t){return this.classShape(t)+this.generateClass(B.circle,t.index)},d.classCircles=function(t){return this.classShapes(t)+this.generateClass(B.circles,t.id)},d.classBar=function(t){return this.classShape(t)+this.generateClass(B.bar,t.index)},d.classBars=function(t){return this.classShapes(t)+this.generateClass(B.bars,t.id)},d.classArc=function(t){return this.classShape(t.data)+this.generateClass(B.arc,t.data.id)},d.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(B.arcs,t.data.id)},d.classArea=function(t){return this.classShape(t)+this.generateClass(B.area,t.id)},d.classAreas=function(t){return this.classShapes(t)+this.generateClass(B.areas,t.id)},d.classRegion=function(t,e){return this.generateClass(B.region,e)+" "+("class"in t?t["class"]:"")},d.classEvent=function(t){return this.generateClass(B.eventRect,t.index)},d.classTarget=function(t){var e=this,n=e.config.data_classes[t],r="";return n&&(r=" "+B.target+"-"+n),e.generateClass(B.target,t)+r},d.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},d.classFocused=function(t){return" "+(0<=this.focusedTargetIds.indexOf(t.id)?B.focused:"")},d.classDefocused=function(t){return" "+(0<=this.defocusedTargetIds.indexOf(t.id)?B.defocused:"")},d.classChartText=function(t){return B.chartText+this.classTarget(t.id)},d.classChartLine=function(t){return B.chartLine+this.classTarget(t.id)},d.classChartBar=function(t){return B.chartBar+this.classTarget(t.id)},d.classChartArc=function(t){return B.chartArc+this.classTarget(t.data.id)},d.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},d.selectorTarget=function(t,e){return(e||"")+"."+B.target+this.getTargetSelectorSuffix(t)},d.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map(function(t){return n.selectorTarget(t,e)}):null},d.selectorLegend=function(t){return"."+B.legendItem+this.getTargetSelectorSuffix(t)},d.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null};var o,S=d.isValue=function(t){return t||0===t},h=d.isFunction=function(t){return"function"==typeof t},u=d.isString=function(t){return"string"==typeof t},w=d.isUndefined=function(t){return void 0===t},X=d.isDefined=function(t){return void 0!==t},c=d.ceil10=function(t){return 10*Math.ceil(t/10)},g=d.asHalfPixel=function(t){return Math.ceil(t)+.5},z=d.diffDomain=function(t){return t[1]-t[0]},p=d.isEmpty=function(t){return!t||u(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length},L=d.notEmpty=function(t){return 0<Object.keys(t).length},H=d.getOption=function(t,e,n){return X(t[e])?t[e]:n},x=d.hasValue=function(e,n){var r=!1;return Object.keys(e).forEach(function(t){e[t]===n&&(r=!0)}),r},y=d.getPathBox=function(t){var e=t.getBoundingClientRect(),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)];return{x:n[0].x,y:Math.min(n[0].y,n[1].y),width:e.width,height:e.height}};a.focus=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),t.classed(B.focused,!0).classed(B.defocused,!1),n.hasArcType()&&n.expandArc(e),n.toggleFocusLegend(e,!0),n.focusedTargetIds=e,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},a.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(B.focused,!1).classed(B.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},a.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(B.focused,!1).classed(B.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(B.legendItemFocused)}).classed(B.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},a.show=function(t,e){var n,r=this.internal;t=r.mapToTargetIds(t),e=e||{},r.removeHiddenTargetIds(t),(n=r.svg.selectAll(r.selectorTargets(t))).transition().style("opacity",1,"important").call(r.endall,function(){n.style("opacity",null).style("opacity",1)}),e.withLegend&&r.showLegend(t),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},a.hide=function(t,e){var n,r=this.internal;t=r.mapToTargetIds(t),e=e||{},r.addHiddenTargetIds(t),(n=r.svg.selectAll(r.selectorTargets(t))).transition().style("opacity",0,"important").call(r.endall,function(){n.style("opacity",null).style("opacity",0)}),e.withLegend&&r.hideLegend(t),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},a.toggle=function(t,e){var n=this,r=this.internal;r.mapToTargetIds(t).forEach(function(t){r.isTargetToShow(t)?n.hide(t,e):n.show(t,e)})},a.zoom=function(t){var e=this.internal;return t&&(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.brush.extent(t),e.redraw({withUpdateXDomain:!0,withY:e.config.zoom_rescale}),e.config.zoom_onzoom.call(this,e.x.orgDomain())),e.brush.extent()},a.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},a.unzoom=function(){var t=this.internal;t.brush.clear().update(),t.redraw({withUpdateXDomain:!0})},a.load=function(e){var t=this.internal,n=t.config;e.xs&&t.addXs(e.xs),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?t.load(t.getCaches(e.cacheIds),e.done):"unload"in e?t.unload(t.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e)},a.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},a.flow=function(t){var i,e,n,r,a,o,s,u=this.internal,c=[],l=u.getMaxDataCount(),f=0,d=0;if(t.json)e=u.convertJsonToData(t.json,t.keys);else if(t.rows)e=u.convertRowsToData(t.rows);else{if(!t.columns)return;e=u.convertColumnsToData(t.columns)}i=u.convertDataToTargets(e,!0),u.data.targets.forEach(function(t){var e,n,r=!1;for(e=0;e<i.length;e++)if(t.id===i[e].id){for(r=!0,t.values[t.values.length-1]&&(d=t.values[t.values.length-1].index+1),f=i[e].values.length,n=0;n<f;n++)i[e].values[n].index=d+n,u.isTimeSeries()||(i[e].values[n].x=d+n);t.values=t.values.concat(i[e].values),i.splice(e,1);break}r||c.push(t.id)}),u.data.targets.forEach(function(t){var e,n;for(e=0;e<c.length;e++)if(t.id===c[e])for(d=t.values[t.values.length-1].index+1,n=0;n<f;n++)t.values.push({id:t.id,index:d+n,x:u.isTimeSeries()?u.getOtherTargetX(d+n):d+n,value:null})}),u.data.targets.length&&i.forEach(function(t){var e,n=[];for(e=u.data.targets[0].values[0].index;e<d;e++)n.push({id:t.id,index:e,x:u.isTimeSeries()?u.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){t.index+=d,u.isTimeSeries()||(t.x+=d)}),t.values=n.concat(t.values)}),u.data.targets=u.data.targets.concat(i),u.getMaxDataCount(),a=(r=u.data.targets[0]).values[0],X(t.to)?(f=0,s=u.isTimeSeries()?u.parseDate(t.to):t.to,r.values.forEach(function(t){t.x<s&&f++})):X(t.length)&&(f=t.length),l?1===l&&u.isTimeSeries()&&(o=(r.values[r.values.length-1].x-a.x)/2,n=[new Date(+a.x-o),new Date(+a.x+o)],u.updateXDomain(null,!0,!0,!1,n)):(o=u.isTimeSeries()?1<r.values.length?r.values[r.values.length-1].x-a.x:a.x-u.getXDomain(u.data.targets)[0]:1,n=[a.x-o,a.x],u.updateXDomain(null,!0,!0,!1,n)),u.updateTargets(u.data.targets),u.redraw({flow:{index:a.index,length:f,duration:S(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:1<l,withTrimXDomain:!1,withUpdateXAxis:!0})},d.generateFlow=function(D){var I=this,X=I.config,F=I.d3;return function(){var t,e,n,r=D.targets,i=D.flow,a=D.drawBar,o=D.drawLine,s=D.drawArea,u=D.cx,c=D.cy,l=D.xv,f=D.xForText,d=D.yForText,h=D.duration,g=1,p=i.index,x=i.length,v=I.getValueOnIndex(I.data.targets[0].values,p),y=I.getValueOnIndex(I.data.targets[0].values,p+x),m=I.x.domain(),_=i.duration||h,b=i.done||function(){},w=I.generateWait(),T=I.xgrid||F.selectAll([]),A=I.xgridLines||F.selectAll([]),M=I.mainRegion||F.selectAll([]),S=I.mainText||F.selectAll([]),L=I.mainBar||F.selectAll([]),k=I.mainLine||F.selectAll([]),C=I.mainArea||F.selectAll([]),E=I.mainCircle||F.selectAll([]);I.flowing=!0,I.data.targets.forEach(function(t){t.values.splice(0,x)}),n=I.updateXDomain(r,!0,!0),I.updateXGrid&&I.updateXGrid(!0),t=i.orgDataCount?1===i.orgDataCount||v.x===y.x?I.x(m[0])-I.x(n[0]):I.isTimeSeries()?I.x(m[0])-I.x(n[0]):I.x(v.x)-I.x(y.x):1!==I.data.targets[0].values.length?I.x(m[0])-I.x(n[0]):I.isTimeSeries()?(v=I.getValueOnIndex(I.data.targets[0].values,0),y=I.getValueOnIndex(I.data.targets[0].values,I.data.targets[0].values.length-1),I.x(v.x)-I.x(y.x)):z(n)/2,g=z(m)/z(n),e="translate("+t+",0) scale("+g+",1)",I.hideXGridFocus(),I.hideTooltip(),F.transition().ease("linear").duration(_).each(function(){w.add(I.axes.x.transition().call(I.xAxis)),w.add(L.transition().attr("transform",e)),w.add(k.transition().attr("transform",e)),w.add(C.transition().attr("transform",e)),w.add(E.transition().attr("transform",e)),w.add(S.transition().attr("transform",e)),w.add(M.filter(I.isRegionOnX).transition().attr("transform",e)),w.add(T.transition().attr("transform",e)),w.add(A.transition().attr("transform",e))}).call(w,function(){var t,e=[],n=[],r=[];if(x){for(t=0;t<x;t++)e.push("."+B.shape+"-"+(p+t)),n.push("."+B.text+"-"+(p+t)),r.push("."+B.eventRect+"-"+(p+t));I.svg.selectAll("."+B.shapes).selectAll(e).remove(),I.svg.selectAll("."+B.texts).selectAll(n).remove(),I.svg.selectAll("."+B.eventRects).selectAll(r).remove(),I.svg.select("."+B.xgrid).remove()}T.attr("transform",null).attr(I.xgridAttr),A.attr("transform",null),A.select("line").attr("x1",X.axis_rotated?0:l).attr("x2",X.axis_rotated?I.width:l),A.select("text").attr("x",X.axis_rotated?I.width:0).attr("y",l),L.attr("transform",null).attr("d",a),k.attr("transform",null).attr("d",o),C.attr("transform",null).attr("d",s),E.attr("transform",null).attr("cx",u).attr("cy",c),S.attr("transform",null).attr("x",f).attr("y",d).style("fill-opacity",I.opacityForText.bind(I)),M.attr("transform",null),M.select("rect").filter(I.isRegionOnX).attr("x",I.regionX.bind(I)).attr("width",I.regionWidth.bind(I)),X.interaction_enabled&&I.redrawEventRect(),b(),I.flowing=!1})}},a.selected=function(t){var e=this.internal,n=e.d3;return n.merge(e.main.selectAll("."+B.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+B.shape).filter(function(){return n.select(this).classed(B.SELECTED)}).map(function(t){return t.map(function(t){var e=t.__data__;return e.data?e.data:e})}))},a.select=function(u,c,l){var f=this.internal,d=f.d3,h=f.config;h.data_selection_enabled&&f.main.selectAll("."+B.shapes).selectAll("."+B.shape).each(function(t,e){var n=d.select(this),r=t.data?t.data.id:t.id,i=f.getToggle(this,t).bind(f),a=h.data_selection_grouped||!u||0<=u.indexOf(r),o=!c||0<=c.indexOf(e),s=n.classed(B.SELECTED);n.classed(B.line)||n.classed(B.area)||(a&&o?h.data_selection_isselectable(t)&&!s&&i(!0,n.classed(B.SELECTED,!0),t,e):X(l)&&l&&s&&i(!1,n.classed(B.SELECTED,!1),t,e))})},a.unselect=function(u,c){var l=this.internal,f=l.d3,d=l.config;d.data_selection_enabled&&l.main.selectAll("."+B.shapes).selectAll("."+B.shape).each(function(t,e){var n=f.select(this),r=t.data?t.data.id:t.id,i=l.getToggle(this,t).bind(l),a=d.data_selection_grouped||!u||0<=u.indexOf(r),o=!c||0<=c.indexOf(e),s=n.classed(B.SELECTED);n.classed(B.line)||n.classed(B.area)||a&&o&&d.data_selection_isselectable(t)&&s&&i(!1,n.classed(B.SELECTED,!1),t,e)})},a.transform=function(t,e){var n=this.internal,r=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;n.transformTo(e,t,r)},d.transformTo=function(t,e,n){var r=this,i=!r.hasArcType(),a=n||{withTransitionForAxis:i};a.withTransitionForTransform=!1,r.transiting=!1,r.setTargetType(t,e),r.updateTargets(r.data.targets),r.updateAndRedraw(a)},a.groups=function(t){var e=this.internal,n=e.config;return w(t)||(n.data_groups=t,e.redraw()),n.data_groups},a.xgrids=function(t){var e=this.internal,n=e.config;return t&&(n.grid_x_lines=t,e.redrawWithoutRescale()),n.grid_x_lines},a.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},a.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},a.ygrids=function(t){var e=this.internal,n=e.config;return t&&(n.grid_y_lines=t,e.redrawWithoutRescale()),n.grid_y_lines},a.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},a.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},a.regions=function(t){var e=this.internal,n=e.config;return t&&(n.regions=t,e.redrawWithoutRescale()),n.regions},a.regions.add=function(t){var e=this.internal,n=e.config;return t&&(n.regions=n.regions.concat(t),e.redrawWithoutRescale()),n.regions},a.regions.remove=function(t){var e,n,r,i=this.internal,a=i.config;return t=t||{},e=i.getOption(t,"duration",a.transition_duration),n=i.getOption(t,"classes",[B.region]),r=i.main.select("."+B.regions).selectAll(n.map(function(t){return"."+t})),(e?r.transition().duration(e):r).style("opacity",0).remove(),a.regions=a.regions.filter(function(t){var e=!1;return!t["class"]||(t["class"].split(" ").forEach(function(t){0<=n.indexOf(t)&&(e=!0)}),!e)}),a.regions},a.data=function(e){var t=this.internal.data.targets;return void 0===e?t:t.filter(function(t){return 0<=[].concat(e).indexOf(t.id)})},a.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},a.data.values=function(t){var e,n=null;return t&&(n=(e=this.data(t))[0]?e[0].values.map(function(t){return t.value}):null),n},a.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},a.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},a.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},a.category=function(t,e){var n=this.internal,r=n.config;return 1<arguments.length&&(r.axis_x_categories[t]=e,n.redraw()),r.axis_x_categories[t]},a.categories=function(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories},a.color=function(t){return this.internal.color(t)},a.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},a.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},a.axis=function(){},a.axis.labels=function(e){var n=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){n.axis.setLabelText(t,e[t])}),n.axis.updateLabels())},a.axis.max=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max};"object"==typeof t?(S(t.x)&&(n.axis_x_max=t.x),S(t.y)&&(n.axis_y_max=t.y),S(t.y2)&&(n.axis_y2_max=t.y2)):n.axis_y_max=n.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},a.axis.min=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min};"object"==typeof t?(S(t.x)&&(n.axis_x_min=t.x),S(t.y)&&(n.axis_y_min=t.y),S(t.y2)&&(n.axis_y2_min=t.y2)):n.axis_y_min=n.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},a.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};X(t.max)&&this.axis.max(t.max),X(t.min)&&this.axis.min(t.min)},a.legend=function(){},a.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},a.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},a.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},a.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},a.destroy=function(){var e=this.internal;return l.clearInterval(e.intervalForObserveInserted),l.onresize=null,e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},a.tooltip=function(){},a.tooltip.show=function(t){var e,n,r=this.internal;t.mouse&&(n=t.mouse),t.data?e=r.isMultipleX()?(n=[r.x(t.data.x),r.getYScale(t.data.id)(t.data.value)],null):S(t.data.index)?t.data.index:r.getIndexByX(t.data.x):"undefined"!=typeof t.x?e=r.getIndexByX(t.x):"undefined"!=typeof t.index&&(e=t.index),r.dispatchEvent("mouseover",e,n),r.dispatchEvent("mousemove",e,n)},a.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)},d.isSafari=function(){var t=l.navigator.userAgent;return 0<=t.indexOf("Safari")&&t.indexOf("Chrome")<0},d.isChrome=function(){return 0<=l.navigator.userAgent.indexOf("Chrome")},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),"function"==typeof define&&define.amd?define("c3",["d3"],i):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=i:l.c3=i}(window);var c3ext={generate:function(t){function e(){r()}function a(t,e,n,r){var i=t.slice(e[0],e[1]),a=1,o=i;if(o.length>r){a=Math.ceil(i.length/r);o=o.splitIntoChunksOf(a).map(n)}return o}function o(t){return t[0]}function n(e){c.columns.removeAll(function(t){e.contains(t)})}function r(){var t=Q.copy(c);g(t),x(t)}if(null!=t.zoom2&&(s=t.zoom2.reducers||{},i=t.zoom2.enabled,_zoom2_factor=t.zoom2.factor||1,u=t.zoom2.maxItems),!i)return c3.generate(t);var s,i,u,c=Q.copy(t.data);if(null==u){var l=d3.select(t.bindto)[0][0];if(null!=l){var f=l.clientWidth,d=20;u=Math.ceil(f/d)}(null==u||u<10)&&(u=10)}var h=c3ext.ZoomBehavior({changed:e,bindto:t.bindto});h.enhance=function(){u*=2;var t=h.getZoom().totalItems;t<u&&(u=t),r()},h.dehance=function(){u=Math.ceil(u/2)+1,r()},h.maxItems=function(){return u};var g=function(t){if(null!=t.columns&&0!=t.columns.length){var i=h.getZoom();return i.totalItems!=t.columns[0].length-1&&(h.setOptions({totalItems:t.columns[0].length-1}),i=h.getZoom()),t.columns=c.columns.map(function(t){var e=t[0],n=s[e]||o,r=a(t.slice(1),i.currentZoom,n,u);return[e].concat(r)}),t}};g(t.data);var p=c3.generate(t),x=p.load.bind(p);return p.zoom2=h,p.load=function(t){t.unload&&(n(t.unload),delete t.unload),Q.copy(t,c),r()},p.unload=function(t){n(t),r()},p},ZoomBehavior:function(t){function r(t){if(t[1]>l){var e=t[1]-l;t[0]-=e,t[1]-=e}if(t[0]<0){e=-1*t[0];t[0]+=e,t[1]+=e}t[1]>l&&(t[1]=l),t[0]<0&&(t[0]=0)}function e(t,e){var n=[e,e+Math.ceil(l/t)];r(n),f=n,i()}function i(){null!=x&&x(g.getZoom())}function s(){e(o,c)}function u(){return Math.ceil(l/o)}function n(){if(0!=v){var t=10,e=(t+v)/t;console.log({deltaY:v,multiply:e}),g.zoomAndPanByRatio(e,y),v=0}}function a(t){v+=t.deltaY,y=(t.offsetX-70)/(t.currentTarget.offsetWidth-70),h.set(150),t.preventDefault()}var o,c,l,f,d,h,g={__type:"ZoomBehavior"},p=t.bindto,x=t.changed||function(){},v=0,y=0;return g.setOptions=function(t){null==t&&(t={}),o=t.factor||1,c=0,l=t.totalItems||0,f=[0,l],x=t.changed||x},g.setOptions(t),g.getZoom=function(){return{totalItems:l,currentZoom:f.slice()}},g.factor=function(t,e){if(0==arguments.length)return o;(o=t)<1&&(o=1),e||s()},g.left=function(t,e){if(0==arguments.length)return c;(c=t)<0&&(c=0);var n=u();l<c+n&&(c=l-n),console.log({left:c,pageSize:n}),e||s()},g.zoomAndPanByRatio=function(t,e){var n=u(),r=Math.round(n*e),i=c+r;g.factor(g.factor()*t,!0);var a=i;if(1!=t){var o=u();a=i-Math.round(o*e)}g.left(a,!0),s()},g.zoomIn=function(){g.zoomAndPanByRatio(2,0)},g.zoomOut=function(){g.zoomAndPanByRatio(.5,0)},g.panLeft=function(){g.zoomAndPanByRatio(1,-1)},g.panRight=function(){g.zoomAndPanByRatio(1,1)},g.reset=function(){c=0,o=1,s()},null!=p&&(d=$(t.bindto)).mousewheel&&(h=new Timer(n),d.mousewheel(a)),g}};if(void 0===Q){var Q=function(){};Q.copy=function(t,e,n,r){if(null==r&&(r=0),100==r&&console.warn("Q.copy is in depth of 100 - possible circular reference"),n=n||{overwrite:!1},t==e||null==t)return e;if("object"!=typeof t)return n.overwrite||null==e?t:e;if("function"==typeof t.clone)return n.overwrite||null==e?t.clone():e;if(null==e&&(e=t instanceof Array?[]:{}),t instanceof Array){for(var i=0;i<t.length;i++){var a=t[i],o=e[i];o=Q.copy(a,o,n,r+1),e[i]=o}return e.splice(t.length,e.length-t.length),e}for(var s in t){var u=t[s],c=e[s];c=Q.copy(u,c,n,r+1),e[s]=c}return e}}if(void 0===Timer){var Timer=function(t,e){this.action=t,null!=e&&this.set(e)};Timer.prototype.set=function(t){null==t?t=this._ms:this._ms=t,this.clear(),null!=t&&(this.timeout=window.setTimeout(this.onTick.bind(this),t))},Timer.prototype.onTick=function(){this.clear(),this.action()},Timer.prototype.clear=function(){null!=this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}}"undefined"==typeof Array.prototype.splitIntoChunksOf&&(Array.prototype.splitIntoChunksOf=function(t){Math.ceil(this.length/t);for(var e=[],n=0;n<this.length;n+=t)e.push(this.slice(n,n+t));return e}),function(){"use strict";var t;t=function(t){var e;e={bindto:t,data:{x:"x",url:$(t).data("graph"),mimeType:"json"},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}}},c3.generate(e)},App.Stats={initialize:function(){$("[data-graph]").each(function(){t(this)})}}}.call(this);var initialize_stats_modules=function(){"use strict";App.Stats.initialize()};$(document).on("turbolinks:load",initialize_stats_modules),$(document).on("ajax:complete",initialize_stats_modules);